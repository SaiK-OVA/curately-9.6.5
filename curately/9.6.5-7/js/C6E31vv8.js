import{r as s,cl as ee,k as l,O as b,l as h,T as re,B as v,A as oe,V as c}from"./Cgppv_Sf.js";import{w as te,u as le,F as ne,H as se,I as ie}from"./DRgYIgAI.js";import{D as ae,H as ce}from"./B2_5Y_RJ.js";import"./BFeG3Rrm.js";import{T as ue}from"./BxLAtHuG.js";import{v as d}from"./Ch9TGLTe.js";const de=te("div"),Ce=({formIdPassed:k,formNamePassed:g,callParentSave:N,cancelClicked:L,isFormBuilder:C,showSave:w,showCancel:W,canDelete:T,generateDataKey:S=!1,customFields:B,isCustomFieldDeleteSettingEnabled:R=!0})=>{const[t,u]=s.useContext(ee),[D,j]=s.useState(0),[V,I]=s.useState(!1),p=s.useRef(0),[U,M]=s.useState(!1),[m,Y]=s.useState(g),[x,O]=s.useState(!1),P=s.useRef(null),[F,a]=s.useState(null),$=r=>{I(r)},z=s.useCallback((r,o)=>{u(e=>le(e,{$splice:[[r,1],[o,0,e[r]]]}))},[t]),y=(r,o,e)=>(console.log(o,"heree"),[...r.slice(0,o),e,...r.slice(o)]),A=r=>{t.forEach(n=>{n.isActive=!1});let o;const e={...r};e.id=d(),e.isActive=!0,e.labelName="",e.description="",e.value="",console.log("addingPosition : "+D),console.log("addingPositionTemp : "+p.current),e.hasOwnProperty("labelValue")&&(e.labelValue=""),e.fieldType==="checkbox"&&(e.id=d(),e.labelName="New Checkbox Label",e.checked=!1,e.isTouched=!1),e.fieldType==="multiplechoice"&&(e.choices=[{id:1+e.id,character:"A",value:"Choice 1"}]),o=y(t,U?0:p.current+1,e),o.forEach(n=>{n.id||(n.id=d()),n.value=""}),u([...o]),M(!1),a(e.id)},H=r=>{console.log(r,"tttee");const o=t.filter(e=>e.id!==r);u([...o])},q=(r,o)=>{const e={...r};e.id=d(),e.labelName=r.labelName?"Copy Of "+r.labelName:"",e.description=r.description?r.description:"",e.datakey="",e.value="";let n=[];if(e.fieldType==="weightedmultiplechoice"||e.fieldType==="multiplechoice"){let i=1;e.choices.forEach(X=>{const E={...X},_=i+e.id;E.id=_,n.push(E),i++})}e.choices=[...n];const f=y(t,o,e);f.forEach(i=>{i.id||(i.id=d()),i.value=""}),console.log(f);let K=f.map(i=>(i.id===f[o].id?i.isActive=!0:i.isActive=!1,i));u([...K]),a(e.id)},G=r=>{console.log(r,"getAdingPosition"),p.current=r,j(r)},Q=s.useCallback((r,o)=>l.jsxDEV(ne,{index:o,id:r.id,moveCard:z,addFormElement:A,deleteFormElement:H,copyFormElement:q,formItem:r,getAdingPosition:G,addingPosition:D,focusId:F,canDelete:T,generateDataKey:S,setFocusId:a,isCustomFieldDeleteSettingEnabled:R},r.id,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:288,columnNumber:17},void 0),[t,F]);s.useEffect(()=>{C&&u([...t])},[]);const Z=r=>{oe.saveAuditLog(r)},J=async()=>{if(!m){c("Please enter Form Name.","error");return}let r=!1;for(let o=0;o<t.length;o++)if(!["conditionallogic","label","divider","displaytext","pagebreak"].includes(t[o].fieldType))if(t[o].inputType==="checkbox")if(t[o].checkboxOption.value){if(!/^(?=.*[a-zA-Z0-9]).{1,}$/.test(t[o].checkboxOption.value)){r=!0,a(t[o].id),c("Please Enter valid Checkbox Option","error");break}}else{r=!0,a(t[o].id),c("Please Enter Checkbox Option","error");break}else if(t[o].labelName){if(!/^(?=.*[a-zA-Z0-9]).{1,}$/.test(t[o].labelName)){r=!0,a(t[o].id),c("Please Enter valid Question","error");break}}else{r=!0,a(t[o].id),c("Please Enter Question","error");break}if(!r){const o=t.filter(e=>e.fieldType==="weightedmultiplechoice");if(o.length>0)for(let e=0;e<o.length;e++){const n=o[e];if(!("weightedPoints"in n)||n.weightedPoints===""){a(n.id),c(`Please enter points for ${n.labelName}`,"error");break}else if(!("weightedCorrectAnswer"in n)||n.weightedCorrectAnswer===""){a(n.id),c(`Please enter Correct Answer for ${n.labelName}`,"error");break}else o.length-1===e&&N(t,m)}else N(t,m)}};return l.jsxDEV(b,{sx:{display:"flex"},className:"formBuilder",children:l.jsxDEV(b,{sx:{flexGrow:1},children:[l.jsxDEV(b,{children:l.jsxDEV(b,{container:!0,direction:"row",justifyContent:"space-evenly",alignItems:"center",className:"topBar px-4",children:[l.jsxDEV(h,{children:[l.jsxDEV(ue,{type:"text",variant:"standard",required:!0,error:x,label:"Enter Form Name",className:`form-name-text ${C?"":"d-none"}`,sx:{background:"#fff",borderRadius:"4px","& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"rgb(187, 186, 184)"},"& .MuiInputBase-input.MuiOutlinedInput-input":{color:"#1A1A1A",fontSize:"13px",fontWeight:600,fontFamily:"Segoe UI"},"& .MuiOutlinedInput-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--c-primary-color)"},"& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--c-primary-color)",borderWidth:"2px"},mb:1,mr:2},placeholder:"",value:m,onChange:r=>{Y(r.target.value),O(!1)}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:419,columnNumber:29},void 0),x&&l.jsxDEV(re,{className:"form-name-error-text",sx:{pb:1},children:" Form name is required."},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:452,columnNumber:47},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:418,columnNumber:25},void 0),l.jsxDEV(h,{children:l.jsxDEV(se,{setFocusId:r=>a(r),customFields:B},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:456,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:455,columnNumber:25},void 0),l.jsxDEV(h,{className:"d-flex",children:[w?l.jsxDEV(v,{size:"small",variant:"contained",color:"primary",className:"form-action-btn",sx:{mr:1},onClick:()=>{J(),Z(4279)},disabled:t.length===0,children:k?"Update":"Save"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:461,columnNumber:37},void 0):null,W?l.jsxDEV(v,{size:"small",variant:"outlined",color:"secondary",className:"form-action-btn",onClick:L,children:"Cancel"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:467,columnNumber:37},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:458,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:410,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:409,columnNumber:17},void 0),l.jsxDEV("div",{className:"mainForm",ref:P,children:[l.jsxDEV(ae,{backend:ce,children:l.jsxDEV(de,{children:t&&(t==null?void 0:t.map((r,o)=>Q(r,o)))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:478,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:477,columnNumber:21},void 0),l.jsxDEV(ie,{openInsertModal:V,closeInsertModal:$,createdFields:t,addElement:A},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:486,columnNumber:21},void 0),l.jsxDEV("br",{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:501,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:475,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:408,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/Workflow/FormBuilder/forms/FormContainer.tsx",lineNumber:404,columnNumber:10},void 0)};export{Ce as F};
