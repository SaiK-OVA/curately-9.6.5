import{q as Sr,v as Di,R as V,r as _,c3 as Ci,k as H,B as It,cl as Ti,L as _t,D as vr,O as Ve,o as _r,V as At,I as Mi,b1 as Ii,W as vn,A as Dt}from"./Cgppv_Sf.js";import{a as nn,m as ut}from"./BKUcwd0Z.js";import{c as Li,s as zt}from"./D1kmJn5E.js";import{C as Ao}from"./D6SqIoha.js";import{D as Ri}from"./D7gGb2eC.js";import{D as Vi}from"./CMCYaaxo.js";import{M as $i}from"./BkbKJ9R6.js";import{E as ki}from"./BfY8VhOC.js";import{F as Fi}from"./C6E31vv8.js";import{D as Ar}from"./B-98_CNj.js";import{T as Oi,F as zn,C as zi}from"./BxLAtHuG.js";import{S as Do}from"./DYhLeBIs.js";import{F as Ui,S as Hi,M as Pi}from"./XPHitdj4.js";import{M as Un}from"./ChUKxi90.js";import{v as Hn}from"./Ch9TGLTe.js";import{T as Yi}from"./CagltWra.js";import{a as Co}from"./CtTUZ4Jr.js";import{L as To}from"./XFArKoHE.js";import{l as Wi}from"./kx4FOAoQ.js";import"./DThR_4yw.js";import"./DRgYIgAI.js";import"./Dxq25FgU.js";import"./BFeG3Rrm.js";import"./CRJpcgJc.js";import"./BJotH55m.js";import"./BkKnc3pH.js";import"./FVe6lIVR.js";import"./DfZvsVaa.js";import"./CB9QYnGm.js";import"./C7pzRmL5.js";import"./dZX7lgtO.js";import"./oe9WjlWR.js";import"./BGveyHVg.js";import"./CAWvjt4G.js";import"./CbCF5Xps.js";import"./Bp2g836F.js";import"./BESjHuWm.js";import"./BP4ZMwX4.js";import"./C148XJoK.js";import"./BDDXo8MR.js";import"./B93O5liC.js";import"./CVtbaTfk.js";import"./DIGW6AYh.js";import"./C-VMvMKD.js";import"./BAcuJNx9.js";import"./Cv_2edHZ.js";import"./CB9nuhLI.js";import"./BKURaxCk.js";import"./DaGbQO6h.js";import"./Dau3miA7.js";import"./rYcqsWUw.js";import"./CtuCFr0K.js";import"./BJCg17MG.js";import"./DI3-CCgY.js";import"./C-Jq_Y4P.js";import"./6HgfybZm.js";import"./_Jx2zO5I.js";import"./BTMlLxsk.js";import"./B2_5Y_RJ.js";import"./jMXFmExr.js";import"./BiLTbjOU.js";import"./DUrHk-MO.js";import"./CPvg8iC8.js";var Bi={value:()=>{}};function hn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Jt(n)}function Jt(e){this._=e}function Xi(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Jt.prototype=hn.prototype={constructor:Jt,on:function(e,t){var n=this._,o=Xi(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=Gi(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=Mo(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Mo(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Jt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function Gi(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Mo(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Bi,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var dt=0,Ct=0,wt=0,Dr=1e3,on,Tt,rn=0,je=0,pn=0,Lt=typeof performance=="object"&&performance.now?performance:Date,Cr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oo(){return je||(Cr(ji),je=Lt.now()+pn)}function ji(){je=0}function sn(){this._call=this._time=this._next=null}sn.prototype=Tr.prototype={constructor:sn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oo():+n)+(t==null?0:+t),!this._next&&Tt!==this&&(Tt?Tt._next=this:on=this,Tt=this),this._call=e,this._time=n,Pn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pn())}};function Tr(e,t,n){var o=new sn;return o.restart(e,t,n),o}function qi(){oo(),++dt;for(var e=on,t;e;)(t=je-e._time)>=0&&e._call.call(void 0,t),e=e._next;--dt}function Io(){je=(rn=Lt.now())+pn,dt=Ct=0;try{qi()}finally{dt=0,Zi(),je=0}}function Ki(){var e=Lt.now(),t=e-rn;t>Dr&&(pn-=t,rn=e)}function Zi(){for(var e,t=on,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:on=n);Tt=e,Pn(o)}function Pn(e){if(!dt){Ct&&(Ct=clearTimeout(Ct));var t=e-je;t>24?(e<1/0&&(Ct=setTimeout(Io,e-Lt.now()-pn)),wt&&(wt=clearInterval(wt))):(wt||(rn=Lt.now(),wt=setInterval(Ki,Dr)),dt=1,Cr(Io))}}function Lo(e,t,n){var o=new sn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}function ae(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ae(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var _n={exports:{}},An={},Dn={exports:{}},Cn={},Ro;function Ji(){if(Ro)return Cn;Ro=1;/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=Sr(),t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function n(A){{for(var y=arguments.length,C=new Array(y>1?y-1:0),I=1;I<y;I++)C[I-1]=arguments[I];o("error",A,C)}}function o(A,y,C){{var I=t.ReactDebugCurrentFrame,M=I.getStackAddendum();M!==""&&(y+="%s",C=C.concat([M]));var w=C.map(function(D){return String(D)});w.unshift("Warning: "+y),Function.prototype.apply.call(console[A],console,w)}}function r(A,y){return A===y&&(A!==0||1/A===1/y)||A!==A&&y!==y}var s=typeof Object.is=="function"?Object.is:r,i=e.useState,a=e.useEffect,c=e.useLayoutEffect,u=e.useDebugValue,l=!1,d=!1;function m(A,y,C){l||e.startTransition!==void 0&&(l=!0,n("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var I=y();if(!d){var M=y();s(I,M)||(n("The result of getSnapshot should be cached to avoid an infinite loop"),d=!0)}var w=i({inst:{value:I,getSnapshot:y}}),D=w[0].inst,$=w[1];return c(function(){D.value=I,D.getSnapshot=y,h(D)&&$({inst:D})},[A,I,y]),a(function(){h(D)&&$({inst:D});var T=function(){h(D)&&$({inst:D})};return A(T)},[A]),u(I),I}function h(A){var y=A.getSnapshot,C=A.value;try{var I=y();return!s(C,I)}catch{return!0}}function x(A,y,C){return y()}var p=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b=!p,g=b?x:m,v=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g;Cn.useSyncExternalStore=v,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}(),Cn}var Vo;function Qi(){return Vo||(Vo=1,Dn.exports=Ji()),Dn.exports}var $o;function ea(){if($o)return An;$o=1;/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=Sr(),t=Qi();function n(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var o=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,a=e.useMemo,c=e.useDebugValue;function u(l,d,m,h,x){var p=s(null),b;p.current===null?(b={hasValue:!1,value:null},p.current=b):b=p.current;var g=a(function(){var C=!1,I,M,w=function(F){if(!C){C=!0,I=F;var L=h(F);if(x!==void 0&&b.hasValue){var f=b.value;if(x(f,L))return M=f,f}return M=L,L}var S=I,N=M;if(o(S,F))return N;var R=h(F);return x!==void 0&&x(N,R)?N:(I=F,M=R,R)},D=m===void 0?null:m,$=function(){return w(d())},T=D===null?void 0:function(){return w(D())};return[$,T]},[d,m,h,x]),v=g[0],A=g[1],y=r(l,v,A);return i(function(){b.hasValue=!0,b.value=y},[y]),c(y),y}An.useSyncExternalStoreWithSelector=u,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}(),An}var ko;function ta(){return ko||(ko=1,_n.exports=ea()),_n.exports}var na=ta();const oa=Di(na),ra={BASE_URL:"./",DEV:!0,MODE:"prod",PROD:!1,SSR:!1,VITE_APP_NAME:"CURATELY_PROD",VITE_APP_VERSION:"9.6.5-7",VITE_AUTH0_CLIENT_ID:"xmOUjYS28Lbq7SR3BtZQ1RFtlDKLfz3I",VITE_AUTH0_CLIENT_SECRET:"VO31mQosOL-1FsYyQa6CCUfLNczeUlk_INP2GvyEU0S4R8O_slzrwbeiw4eIXJpJ",VITE_AUTH0_DOMAIN:"auth.curately.ai",VITE_BEEFREESDK_CLIENT_ID:"e5c7bb16-b6ab-439a-956c-774488f760c5",VITE_BEEFREESDK_CLIENT_SECRET:"xRRXwrfVAUrTAO0e2ltIi405B4tSdUc2fUwvOZv3m3x9eLZjkTWt",VITE_CRONOFY_CLIENT_ID:"m9CLjBOcu4YrcgJge5vBCRxEHVj2OjHi",VITE_CRONOFY_CLIENT_SECRET:"CRN_JWrrXUDBfhUjYGd26nxpEqfgSL3lvQYfTrHOaR",VITE_ENV:"prod",VITE_GEOCODEPROVIDERKEY:"<<GeocodeProviderKey>>",VITE_SMARTY_KEY:"96941923756189618",VITE_STRIPE_PUBLISHABLE_KEY:"pk_live_51PICH9RwmwbNTU5F7K2ey1rPMcVzXuIct2eFoPt5OmbjX67q8VUwL3VoWG44sYuHicV7gN5akQobzWQU3k79GDpc00tYcnEMmY",VITE_STRIPE_TABLE_ID:"prctbl_1QKOIiRwmwbNTU5FnuTbi7Mz",VITE_URL_171:"https://resume.accuick.com/Pipl/",VITE_URL_193:"https://app.curately.ai/",VITE_URL_214:"https://api.curately.ai/QADemoCurately/",VITE_URL_216:"https://devapi.cxninja.com/",VITE_URL_2168095:"https://qa.ova.work/",VITE_URL_233:"https://sequence.accuick.com/Automation/",VITE_URL_233SEQ:"https://sequence.accuick.com/",VITE_URL_ADMIN:"https://adminapi.curately.ai/curatelyAdmin/",VITE_URL_ADMIN_ONLY:"https://adminapi.curately.ai/",VITE_URL_ADMIN_REPORTING:"https://adminapi.curately.ai/reporting-service/",VITE_URL_ATS:"https://adminapi.curately.ai/ats-service-prod/",VITE_URL_AWS:"https://ovastorage.s3.us-west-2.amazonaws.com/",VITE_URL_BEELINE:"https://adminapi.curately.ai/beeline-service-prod/",VITE_URL_BULLHORN:"https://adminapi.curately.ai/bullhorn-service-prod/",VITE_URL_CHAT:"https://qaapi.cxninja.com/ChatGPT/",VITE_URL_CSR:"https://devapi.csrninja.com/System_Checker/",VITE_URL_CTS:"https://qaapi.cxninja.com/CloudTalentApi/api/",VITE_URL_CXADMIN:"https://adminapi.cxninja.com/",VITE_URL_JD:"https://jdparse.accuick.com/",VITE_URL_MERGE:"https://adminapi.cxninja.com/merge-uapi-service/",VITE_URL_OVA:"https://www.ova.work/CommonApis/",VITE_URL_PEOPLE:"https://api.curately.ai/QADemoCurately/",VITE_URL_VOICEAI:"https://adminapi.cxninja.com/voice-ai-prod/"},Fo=e=>{let t;const n=new Set,o=(l,d)=>{const m=typeof l=="function"?l(t):l;if(!Object.is(m,t)){const h=t;t=d??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(x=>x(t,h))}},r=()=>t,c={setState:o,getState:r,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(ra?"prod":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(o,r,c);return c},sa=e=>e?Fo(e):Fo,{useDebugValue:ia}=V,{useSyncExternalStoreWithSelector:aa}=oa,ca=e=>e;function Mr(e,t=ca,n){const o=aa(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ia(o),o}const Oo=(e,t)=>{const n=sa(e),o=(r,s=t)=>Mr(n,r,s);return Object.assign(o,n),o},la=(e,t)=>e?Oo(e,t):Oo;function ie(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var Yn="http://www.w3.org/1999/xhtml";const zo={svg:"http://www.w3.org/2000/svg",xhtml:Yn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zo.hasOwnProperty(t)?{space:zo[t],local:e}:e}function ua(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Yn&&t.documentElement.namespaceURI===Yn?t.createElement(e):t.createElementNS(n,e)}}function da(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ir(e){var t=gn(e);return(t.local?da:ua)(t)}function fa(){}function ro(e){return e==null?fa:function(){return this.querySelector(e)}}function ma(e){typeof e!="function"&&(e=ro(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),c,u,l=0;l<i;++l)(c=s[l])&&(u=e.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new le(o,this._parents)}function ha(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function pa(){return[]}function Lr(e){return e==null?pa:function(){return this.querySelectorAll(e)}}function ga(e){return function(){return ha(e.apply(this,arguments))}}function ya(e){typeof e=="function"?e=ga(e):e=Lr(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&(o.push(e.call(c,c.__data__,u,i)),r.push(c));return new le(o,r)}function Rr(e){return function(){return this.matches(e)}}function Vr(e){return function(t){return t.matches(e)}}var xa=Array.prototype.find;function Na(e){return function(){return xa.call(this.children,e)}}function wa(){return this.firstElementChild}function ba(e){return this.select(e==null?wa:Na(typeof e=="function"?e:Vr(e)))}var Ea=Array.prototype.filter;function Sa(){return Array.from(this.children)}function va(e){return function(){return Ea.call(this.children,e)}}function _a(e){return this.selectAll(e==null?Sa:va(typeof e=="function"?e:Vr(e)))}function Aa(e){typeof e!="function"&&(e=Rr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new le(o,this._parents)}function $r(e){return new Array(e.length)}function Da(){return new le(this._enter||this._groups.map($r),this._parents)}function an(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}an.prototype={constructor:an,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ca(e){return function(){return e}}function Ta(e,t,n,o,r,s){for(var i=0,a,c=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new an(e,s[i]);for(;i<c;++i)(a=t[i])&&(r[i]=a)}function Ma(e,t,n,o,r,s,i){var a,c,u=new Map,l=t.length,d=s.length,m=new Array(l),h;for(a=0;a<l;++a)(c=t[a])&&(m[a]=h=i.call(c,c.__data__,a,t)+"",u.has(h)?r[a]=c:u.set(h,c));for(a=0;a<d;++a)h=i.call(e,s[a],a,s)+"",(c=u.get(h))?(o[a]=c,c.__data__=s[a],u.delete(h)):n[a]=new an(e,s[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(m[a])===c&&(r[a]=c)}function Ia(e){return e.__data__}function La(e,t){if(!arguments.length)return Array.from(this,Ia);var n=t?Ma:Ta,o=this._parents,r=this._groups;typeof e!="function"&&(e=Ca(e));for(var s=r.length,i=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var l=o[u],d=r[u],m=d.length,h=Ra(e.call(l,l&&l.__data__,u,o)),x=h.length,p=a[u]=new Array(x),b=i[u]=new Array(x),g=c[u]=new Array(m);n(l,d,p,b,g,h,t);for(var v=0,A=0,y,C;v<x;++v)if(y=p[v]){for(v>=A&&(A=v+1);!(C=b[A])&&++A<x;);y._next=C||null}}return i=new le(i,o),i._enter=a,i._exit=c,i}function Ra(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Va(){return new le(this._exit||this._groups.map($r),this._parents)}function $a(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function ka(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),c=0;c<i;++c)for(var u=n[c],l=o[c],d=u.length,m=a[c]=new Array(d),h,x=0;x<d;++x)(h=u[x]||l[x])&&(m[x]=h);for(;c<r;++c)a[c]=n[c];return new le(a,this._parents)}function Fa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Oa(e){e||(e=za);function t(d,m){return d&&m?e(d.__data__,m.__data__):!d-!m}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,c=r[s]=new Array(a),u,l=0;l<a;++l)(u=i[l])&&(c[l]=u);c.sort(t)}return new le(r,this._parents).order()}function za(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ua(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ha(){return Array.from(this)}function Pa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function Ya(){let e=0;for(const t of this)++e;return e}function Wa(){return!this.node()}function Ba(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function Xa(e){return function(){this.removeAttribute(e)}}function Ga(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ja(e,t){return function(){this.setAttribute(e,t)}}function qa(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ka(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Za(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ja(e,t){var n=gn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ga:Xa:typeof t=="function"?n.local?Za:Ka:n.local?qa:ja)(n,t))}function kr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Qa(e){return function(){this.style.removeProperty(e)}}function ec(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tc(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function nc(e,t,n){return arguments.length>1?this.each((t==null?Qa:typeof t=="function"?tc:ec)(e,t,n??"")):ft(this.node(),e)}function ft(e,t){return e.style.getPropertyValue(t)||kr(e).getComputedStyle(e,null).getPropertyValue(t)}function oc(e){return function(){delete this[e]}}function rc(e,t){return function(){this[e]=t}}function sc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ic(e,t){return arguments.length>1?this.each((t==null?oc:typeof t=="function"?sc:rc)(e,t)):this.node()[e]}function Fr(e){return e.trim().split(/^|\s+/)}function so(e){return e.classList||new Or(e)}function Or(e){this._node=e,this._names=Fr(e.getAttribute("class")||"")}Or.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zr(e,t){for(var n=so(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Ur(e,t){for(var n=so(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function ac(e){return function(){zr(this,e)}}function cc(e){return function(){Ur(this,e)}}function lc(e,t){return function(){(t.apply(this,arguments)?zr:Ur)(this,e)}}function uc(e,t){var n=Fr(e+"");if(arguments.length<2){for(var o=so(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?lc:t?ac:cc)(n,t))}function dc(){this.textContent=""}function fc(e){return function(){this.textContent=e}}function mc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hc(e){return arguments.length?this.each(e==null?dc:(typeof e=="function"?mc:fc)(e)):this.node().textContent}function pc(){this.innerHTML=""}function gc(e){return function(){this.innerHTML=e}}function yc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xc(e){return arguments.length?this.each(e==null?pc:(typeof e=="function"?yc:gc)(e)):this.node().innerHTML}function Nc(){this.nextSibling&&this.parentNode.appendChild(this)}function wc(){return this.each(Nc)}function bc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ec(){return this.each(bc)}function Sc(e){var t=typeof e=="function"?e:Ir(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vc(){return null}function _c(e,t){var n=typeof e=="function"?e:Ir(e),o=t==null?vc:typeof t=="function"?t:ro(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ac(){var e=this.parentNode;e&&e.removeChild(this)}function Dc(){return this.each(Ac)}function Cc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mc(e){return this.select(e?Tc:Cc)}function Ic(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Lc(e){return function(t){e.call(this,t,this.__data__)}}function Rc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Vc(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function $c(e,t,n){return function(){var o=this.__on,r,s=Lc(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function kc(e,t,n){var o=Rc(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value}return}for(a=t?$c:Vc,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function Hr(e,t,n){var o=kr(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Fc(e,t){return function(){return Hr(this,e,t)}}function Oc(e,t){return function(){return Hr(this,e,t.apply(this,arguments))}}function zc(e,t){return this.each((typeof t=="function"?Oc:Fc)(e,t))}function*Uc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var Pr=[null];function le(e,t){this._groups=e,this._parents=t}function Ut(){return new le([[document.documentElement]],Pr)}function Hc(){return this}le.prototype=Ut.prototype={constructor:le,select:ma,selectAll:ya,selectChild:ba,selectChildren:_a,filter:Aa,data:La,enter:Da,exit:Va,join:$a,merge:ka,selection:Hc,order:Fa,sort:Oa,call:Ua,nodes:Ha,node:Pa,size:Ya,empty:Wa,each:Ba,attr:Ja,style:nc,property:ic,classed:uc,text:hc,html:xc,raise:wc,lower:Ec,append:Sc,insert:_c,remove:Dc,clone:Mc,datum:Ic,on:kc,dispatch:zc,[Symbol.iterator]:Uc};function ge(e){return typeof e=="string"?new le([[document.querySelector(e)]],[document.documentElement]):new le([[e]],Pr)}function Pc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function be(e,t){if(e=Pc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Yc={passive:!1},Rt={capture:!0,passive:!1};function Tn(e){e.stopImmediatePropagation()}function it(e){e.preventDefault(),e.stopImmediatePropagation()}function Yr(e){var t=e.document.documentElement,n=ge(e).on("dragstart.drag",it,Rt);"onselectstart"in t?n.on("selectstart.drag",it,Rt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Wr(e,t){var n=e.document.documentElement,o=ge(e).on("dragstart.drag",null);t&&(o.on("click.drag",it,Rt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Yt=e=>()=>e;function Wn(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Wn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Wc(e){return!e.ctrlKey&&!e.button}function Bc(){return this.parentNode}function Xc(e,t){return t??{x:e.x,y:e.y}}function Gc(){return navigator.maxTouchPoints||"ontouchstart"in this}function jc(){var e=Wc,t=Bc,n=Xc,o=Gc,r={},s=hn("start","drag","end"),i=0,a,c,u,l,d=0;function m(y){y.on("mousedown.drag",h).filter(o).on("touchstart.drag",b).on("touchmove.drag",g,Yc).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,C){if(!(l||!e.call(this,y,C))){var I=A(this,t.call(this,y,C),y,C,"mouse");I&&(ge(y.view).on("mousemove.drag",x,Rt).on("mouseup.drag",p,Rt),Yr(y.view),Tn(y),u=!1,a=y.clientX,c=y.clientY,I("start",y))}}function x(y){if(it(y),!u){var C=y.clientX-a,I=y.clientY-c;u=C*C+I*I>d}r.mouse("drag",y)}function p(y){ge(y.view).on("mousemove.drag mouseup.drag",null),Wr(y.view,u),it(y),r.mouse("end",y)}function b(y,C){if(e.call(this,y,C)){var I=y.changedTouches,M=t.call(this,y,C),w=I.length,D,$;for(D=0;D<w;++D)($=A(this,M,y,C,I[D].identifier,I[D]))&&(Tn(y),$("start",y,I[D]))}}function g(y){var C=y.changedTouches,I=C.length,M,w;for(M=0;M<I;++M)(w=r[C[M].identifier])&&(it(y),w("drag",y,C[M]))}function v(y){var C=y.changedTouches,I=C.length,M,w;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),M=0;M<I;++M)(w=r[C[M].identifier])&&(Tn(y),w("end",y,C[M]))}function A(y,C,I,M,w,D){var $=s.copy(),T=be(D||I,C),F,L,f;if((f=n.call(y,new Wn("beforestart",{sourceEvent:I,target:m,identifier:w,active:i,x:T[0],y:T[1],dx:0,dy:0,dispatch:$}),M))!=null)return F=f.x-T[0]||0,L=f.y-T[1]||0,function S(N,R,O){var E=T,k;switch(N){case"start":r[w]=S,k=i++;break;case"end":delete r[w],--i;case"drag":T=be(O||R,C),k=i;break}$.call(N,y,new Wn(N,{sourceEvent:R,subject:f,target:m,identifier:w,active:k,x:T[0]+F,y:T[1]+L,dx:T[0]-E[0],dy:T[1]-E[1],dispatch:$}),M)}}return m.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Yt(!!y),m):e},m.container=function(y){return arguments.length?(t=typeof y=="function"?y:Yt(y),m):t},m.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Yt(y),m):n},m.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:Yt(!!y),m):o},m.on=function(){var y=s.on.apply(s,arguments);return y===s?m:y},m.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,m):Math.sqrt(d)},m}function io(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Br(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ht(){}var Vt=.7,cn=1/Vt,at="\\s*([+-]?\\d+)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qc=/^#([0-9a-f]{3,8})$/,Kc=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),Zc=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Jc=new RegExp(`^rgba\\(${at},${at},${at},${$t}\\)$`),Qc=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${$t}\\)$`),el=new RegExp(`^hsl\\(${$t},${Ee},${Ee}\\)$`),tl=new RegExp(`^hsla\\(${$t},${Ee},${Ee},${$t}\\)$`),Uo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};io(Ht,kt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ho,formatHex:Ho,formatHex8:nl,formatHsl:ol,formatRgb:Po,toString:Po});function Ho(){return this.rgb().formatHex()}function nl(){return this.rgb().formatHex8()}function ol(){return Xr(this).formatHsl()}function Po(){return this.rgb().formatRgb()}function kt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=qc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yo(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kc.exec(e))?new se(t[1],t[2],t[3],1):(t=Zc.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Jc.exec(e))?Wt(t[1],t[2],t[3],t[4]):(t=Qc.exec(e))?Wt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=el.exec(e))?Xo(t[1],t[2]/100,t[3]/100,1):(t=tl.exec(e))?Xo(t[1],t[2]/100,t[3]/100,t[4]):Uo.hasOwnProperty(e)?Yo(Uo[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function Yo(e){return new se(e>>16&255,e>>8&255,e&255,1)}function Wt(e,t,n,o){return o<=0&&(e=t=n=NaN),new se(e,t,n,o)}function rl(e){return e instanceof Ht||(e=kt(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function Bn(e,t,n,o){return arguments.length===1?rl(e):new se(e,t,n,o??1)}function se(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}io(se,Bn,Br(Ht,{brighter(e){return e=e==null?cn:Math.pow(cn,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Vt:Math.pow(Vt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(Ge(this.r),Ge(this.g),Ge(this.b),ln(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wo,formatHex:Wo,formatHex8:sl,formatRgb:Bo,toString:Bo}));function Wo(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}`}function sl(){return`#${Be(this.r)}${Be(this.g)}${Be(this.b)}${Be((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bo(){const e=ln(this.opacity);return`${e===1?"rgb(":"rgba("}${Ge(this.r)}, ${Ge(this.g)}, ${Ge(this.b)}${e===1?")":`, ${e})`}`}function ln(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ge(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Be(e){return e=Ge(e),(e<16?"0":"")+e.toString(16)}function Xo(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ye(e,t,n,o)}function Xr(e){if(e instanceof ye)return new ye(e.h,e.s,e.l,e.opacity);if(e instanceof Ht||(e=kt(e)),!e)return new ye;if(e instanceof ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),s=Math.max(t,n,o),i=NaN,a=s-r,c=(s+r)/2;return a?(t===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-t)/a+2:i=(t-n)/a+4,a/=c<.5?s+r:2-s-r,i*=60):a=c>0&&c<1?0:i,new ye(i,a,c,e.opacity)}function il(e,t,n,o){return arguments.length===1?Xr(e):new ye(e,t,n,o??1)}function ye(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}io(ye,il,Br(Ht,{brighter(e){return e=e==null?cn:Math.pow(cn,e),new ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Vt:Math.pow(Vt,e),new ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new se(Mn(e>=240?e-240:e+120,r,o),Mn(e,r,o),Mn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ye(Go(this.h),Bt(this.s),Bt(this.l),ln(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ln(this.opacity);return`${e===1?"hsl(":"hsla("}${Go(this.h)}, ${Bt(this.s)*100}%, ${Bt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Go(e){return e=(e||0)%360,e<0?e+360:e}function Bt(e){return Math.max(0,Math.min(1,e||0))}function Mn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gr=e=>()=>e;function al(e,t){return function(n){return e+n*t}}function cl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function ll(e){return(e=+e)==1?jr:function(t,n){return n-t?cl(t,n,e):Gr(isNaN(t)?n:t)}}function jr(e,t){var n=t-e;return n?al(e,n):Gr(isNaN(e)?t:e)}const jo=function e(t){var n=ll(t);function o(r,s){var i=n((r=Bn(r)).r,(s=Bn(s)).r),a=n(r.g,s.g),c=n(r.b,s.b),u=jr(r.opacity,s.opacity);return function(l){return r.r=i(l),r.g=a(l),r.b=c(l),r.opacity=u(l),r+""}}return o.gamma=e,o}(1);function Ie(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,In=new RegExp(Xn.source,"g");function ul(e){return function(){return e}}function dl(e){return function(t){return e(t)+""}}function fl(e,t){var n=Xn.lastIndex=In.lastIndex=0,o,r,s,i=-1,a=[],c=[];for(e=e+"",t=t+"";(o=Xn.exec(e))&&(r=In.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,c.push({i,x:Ie(o,r)})),n=In.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?c[0]?dl(c[0].x):ul(t):(t=c.length,function(u){for(var l=0,d;l<t;++l)a[(d=c[l]).i]=d.x(u);return a.join("")})}var qo=180/Math.PI,Gn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qr(e,t,n,o,r,s){var i,a,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*qo,skewX:Math.atan(c)*qo,scaleX:i,scaleY:a}}var Xt;function ml(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gn:qr(t.a,t.b,t.c,t.d,t.e,t.f)}function hl(e){return e==null||(Xt||(Xt=document.createElementNS("http://www.w3.org/2000/svg","g")),Xt.setAttribute("transform",e),!(e=Xt.transform.baseVal.consolidate()))?Gn:(e=e.matrix,qr(e.a,e.b,e.c,e.d,e.e,e.f))}function Kr(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function s(u,l,d,m,h,x){if(u!==d||l!==m){var p=h.push("translate(",null,t,null,n);x.push({i:p-4,x:Ie(u,d)},{i:p-2,x:Ie(l,m)})}else(d||m)&&h.push("translate("+d+t+m+n)}function i(u,l,d,m){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),m.push({i:d.push(r(d)+"rotate(",null,o)-2,x:Ie(u,l)})):l&&d.push(r(d)+"rotate("+l+o)}function a(u,l,d,m){u!==l?m.push({i:d.push(r(d)+"skewX(",null,o)-2,x:Ie(u,l)}):l&&d.push(r(d)+"skewX("+l+o)}function c(u,l,d,m,h,x){if(u!==d||l!==m){var p=h.push(r(h)+"scale(",null,",",null,")");x.push({i:p-4,x:Ie(u,d)},{i:p-2,x:Ie(l,m)})}else(d!==1||m!==1)&&h.push(r(h)+"scale("+d+","+m+")")}return function(u,l){var d=[],m=[];return u=e(u),l=e(l),s(u.translateX,u.translateY,l.translateX,l.translateY,d,m),i(u.rotate,l.rotate,d,m),a(u.skewX,l.skewX,d,m),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,m),u=l=null,function(h){for(var x=-1,p=m.length,b;++x<p;)d[(b=m[x]).i]=b.x(h);return d.join("")}}}var pl=Kr(ml,"px, ","px)","deg)"),gl=Kr(hl,", ",")",")"),yl=1e-12;function Ko(e){return((e=Math.exp(e))+1/e)/2}function xl(e){return((e=Math.exp(e))-1/e)/2}function Nl(e){return((e=Math.exp(2*e))-1)/(e+1)}const wl=function e(t,n,o){function r(s,i){var a=s[0],c=s[1],u=s[2],l=i[0],d=i[1],m=i[2],h=l-a,x=d-c,p=h*h+x*x,b,g;if(p<yl)g=Math.log(m/u)/t,b=function(M){return[a+M*h,c+M*x,u*Math.exp(t*M*g)]};else{var v=Math.sqrt(p),A=(m*m-u*u+o*p)/(2*u*n*v),y=(m*m-u*u-o*p)/(2*m*n*v),C=Math.log(Math.sqrt(A*A+1)-A),I=Math.log(Math.sqrt(y*y+1)-y);g=(I-C)/t,b=function(M){var w=M*g,D=Ko(C),$=u/(n*v)*(D*Nl(t*w+C)-xl(C));return[a+$*h,c+$*x,u*D/Ko(t*w+C)]}}return b.duration=g*1e3*t/Math.SQRT2,b}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,c=a*a;return e(i,a,c)},r}(Math.SQRT2,2,4);var bl=hn("start","end","cancel","interrupt"),El=[],Zr=0,Zo=1,jn=2,Qt=3,Jo=4,qn=5,en=6;function yn(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Sl(e,n,{name:t,index:o,group:r,on:bl,tween:El,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Zr})}function ao(e,t){var n=xe(e,t);if(n.state>Zr)throw new Error("too late; already scheduled");return n}function Se(e,t){var n=xe(e,t);if(n.state>Qt)throw new Error("too late; already running");return n}function xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Sl(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Tr(s,0,n.time);function s(u){n.state=Zo,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var l,d,m,h;if(n.state!==Zo)return c();for(l in o)if(h=o[l],h.name===n.name){if(h.state===Qt)return Lo(i);h.state===Jo?(h.state=en,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[l]):+l<t&&(h.state=en,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[l])}if(Lo(function(){n.state===Qt&&(n.state=Jo,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=jn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jn){for(n.state=Qt,r=new Array(m=n.tween.length),l=0,d=-1;l<m;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=qn,1),d=-1,m=r.length;++d<m;)r[d].call(e,l);n.state===qn&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=en,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function tn(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>jn&&o.state<qn,o.state=en,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function vl(e){return this.each(function(){tn(this,e)})}function _l(e,t){var n,o;return function(){var r=Se(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Al(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Se(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}s.tween=r}}function Dl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=xe(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?_l:Al)(n,e,t))}function co(e,t,n){var o=e._id;return e.each(function(){var r=Se(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return xe(r,o).value[t]}}function Jr(e,t){var n;return(typeof t=="number"?Ie:t instanceof kt?jo:(n=kt(t))?(t=n,jo):fl)(e,t)}function Cl(e){return function(){this.removeAttribute(e)}}function Tl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ml(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function Il(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function Ll(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function Rl(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function Vl(e,t){var n=gn(e),o=n==="transform"?gl:Jr;return this.attrTween(e,typeof t=="function"?(n.local?Rl:Ll)(n,o,co(this,"attr."+e,t)):t==null?(n.local?Tl:Cl)(n):(n.local?Il:Ml)(n,o,t))}function $l(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function kl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Fl(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&kl(e,s)),n}return r._value=t,r}function Ol(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&$l(e,s)),n}return r._value=t,r}function zl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=gn(e);return this.tween(n,(o.local?Fl:Ol)(o,t))}function Ul(e,t){return function(){ao(this,e).delay=+t.apply(this,arguments)}}function Hl(e,t){return t=+t,function(){ao(this,e).delay=t}}function Pl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ul:Hl)(t,e)):xe(this.node(),t).delay}function Yl(e,t){return function(){Se(this,e).duration=+t.apply(this,arguments)}}function Wl(e,t){return t=+t,function(){Se(this,e).duration=t}}function Bl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yl:Wl)(t,e)):xe(this.node(),t).duration}function Xl(e,t){if(typeof t!="function")throw new Error;return function(){Se(this,e).ease=t}}function Gl(e){var t=this._id;return arguments.length?this.each(Xl(t,e)):xe(this.node(),t).ease}function jl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Se(this,e).ease=n}}function ql(e){if(typeof e!="function")throw new Error;return this.each(jl(this._id,e))}function Kl(e){typeof e!="function"&&(e=Rr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new Ce(o,this._parents,this._name,this._id)}function Zl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var c=t[a],u=n[a],l=c.length,d=i[a]=new Array(l),m,h=0;h<l;++h)(m=c[h]||u[h])&&(d[h]=m);for(;a<o;++a)i[a]=t[a];return new Ce(i,this._parents,this._name,this._id)}function Jl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ql(e,t,n){var o,r,s=Jl(t)?ao:Se;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function eu(e,t){var n=this._id;return arguments.length<2?xe(this.node(),n).on.on(e):this.each(Ql(n,e,t))}function tu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function nu(){return this.on("end.remove",tu(this._id))}function ou(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ro(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],c=a.length,u=s[i]=new Array(c),l,d,m=0;m<c;++m)(l=a[m])&&(d=e.call(l,l.__data__,m,a))&&("__data__"in l&&(d.__data__=l.__data__),u[m]=d,yn(u[m],t,n,m,u,xe(l,n)));return new Ce(s,this._parents,t,n)}function ru(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lr(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var c=o[a],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var m=e.call(l,l.__data__,d,c),h,x=xe(l,n),p=0,b=m.length;p<b;++p)(h=m[p])&&yn(h,t,n,p,m,x);s.push(m),i.push(l)}return new Ce(s,i,t,n)}var su=Ut.prototype.constructor;function iu(){return new su(this._groups,this._parents)}function au(e,t){var n,o,r;return function(){var s=ft(this,e),i=(this.style.removeProperty(e),ft(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function Qr(e){return function(){this.style.removeProperty(e)}}function cu(e,t,n){var o,r=n+"",s;return function(){var i=ft(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function lu(e,t,n){var o,r,s;return function(){var i=ft(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),ft(this,e))),i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a))}}function uu(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var c=Se(this,e),u=c.on,l=c.value[s]==null?a||(a=Qr(t)):void 0;(u!==n||r!==l)&&(o=(n=u).copy()).on(i,r=l),c.on=o}}function du(e,t,n){var o=(e+="")=="transform"?pl:Jr;return t==null?this.styleTween(e,au(e,o)).on("end.style."+e,Qr(e)):typeof t=="function"?this.styleTween(e,lu(e,o,co(this,"style."+e,t))).each(uu(this._id,e)):this.styleTween(e,cu(e,o,t),n).on("end.style."+e,null)}function fu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function mu(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&fu(e,i,n)),o}return s._value=t,s}function hu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,mu(e,t,n??""))}function pu(e){return function(){this.textContent=e}}function gu(e){return function(){var t=e(this);this.textContent=t??""}}function yu(e){return this.tween("text",typeof e=="function"?gu(co(this,"text",e)):pu(e==null?"":e+""))}function xu(e){return function(t){this.textContent=e.call(this,t)}}function Nu(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&xu(r)),t}return o._value=e,o}function wu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Nu(e))}function bu(){for(var e=this._name,t=this._id,n=es(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,u=0;u<a;++u)if(c=i[u]){var l=xe(c,t);yn(c,e,n,u,i,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ce(o,this._parents,e,n)}function Eu(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},c={value:function(){--r===0&&s()}};n.each(function(){var u=Se(this,o),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),r===0&&s()})}var Su=0;function Ce(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function es(){return++Su}var Ae=Ut.prototype;Ce.prototype={constructor:Ce,select:ou,selectAll:ru,selectChild:Ae.selectChild,selectChildren:Ae.selectChildren,filter:Kl,merge:Zl,selection:iu,transition:bu,call:Ae.call,nodes:Ae.nodes,node:Ae.node,size:Ae.size,empty:Ae.empty,each:Ae.each,on:eu,attr:Vl,attrTween:zl,style:du,styleTween:hu,text:yu,textTween:wu,remove:nu,tween:Dl,delay:Pl,duration:Bl,ease:Gl,easeVarying:ql,end:Eu,[Symbol.iterator]:Ae[Symbol.iterator]};function vu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _u={time:null,delay:0,duration:250,ease:vu};function Au(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Du(e){var t,n;e instanceof Ce?(t=e._id,e=e._name):(t=es(),(n=_u).time=oo(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&yn(c,e,t,u,i,n||Au(c,t));return new Ce(o,this._parents,e,t)}Ut.prototype.interrupt=vl;Ut.prototype.transition=Du;const Gt=e=>()=>e;function Cu(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function De(e,t,n){this.k=e,this.x=t,this.y=n}De.prototype={constructor:De,scale:function(e){return e===1?this:new De(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new De(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $e=new De(1,0,0);De.prototype;function Ln(e){e.stopImmediatePropagation()}function bt(e){e.preventDefault(),e.stopImmediatePropagation()}function Tu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Mu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Qo(){return this.__zoom||$e}function Iu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Lu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ru(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Vu(){var e=Tu,t=Mu,n=Ru,o=Iu,r=Lu,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,c=wl,u=hn("start","zoom","end"),l,d,m,h=500,x=150,p=0,b=10;function g(f){f.property("__zoom",Qo).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",$).filter(r).on("touchstart.zoom",T).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(f,S,N,R){var O=f.selection?f.selection():f;O.property("__zoom",Qo),f!==O?C(f,S,N,R):O.interrupt().each(function(){I(this,arguments).event(R).start().zoom(null,typeof S=="function"?S.apply(this,arguments):S).end()})},g.scaleBy=function(f,S,N,R){g.scaleTo(f,function(){var O=this.__zoom.k,E=typeof S=="function"?S.apply(this,arguments):S;return O*E},N,R)},g.scaleTo=function(f,S,N,R){g.transform(f,function(){var O=t.apply(this,arguments),E=this.__zoom,k=N==null?y(O):typeof N=="function"?N.apply(this,arguments):N,z=E.invert(k),U=typeof S=="function"?S.apply(this,arguments):S;return n(A(v(E,U),k,z),O,i)},N,R)},g.translateBy=function(f,S,N,R){g.transform(f,function(){return n(this.__zoom.translate(typeof S=="function"?S.apply(this,arguments):S,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),i)},null,R)},g.translateTo=function(f,S,N,R,O){g.transform(f,function(){var E=t.apply(this,arguments),k=this.__zoom,z=R==null?y(E):typeof R=="function"?R.apply(this,arguments):R;return n($e.translate(z[0],z[1]).scale(k.k).translate(typeof S=="function"?-S.apply(this,arguments):-S,typeof N=="function"?-N.apply(this,arguments):-N),E,i)},R,O)};function v(f,S){return S=Math.max(s[0],Math.min(s[1],S)),S===f.k?f:new De(S,f.x,f.y)}function A(f,S,N){var R=S[0]-N[0]*f.k,O=S[1]-N[1]*f.k;return R===f.x&&O===f.y?f:new De(f.k,R,O)}function y(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function C(f,S,N,R){f.on("start.zoom",function(){I(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(R).end()}).tween("zoom",function(){var O=this,E=arguments,k=I(O,E).event(R),z=t.apply(O,E),U=N==null?y(z):typeof N=="function"?N.apply(O,E):N,P=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),Y=O.__zoom,X=typeof S=="function"?S.apply(O,E):S,G=c(Y.invert(U).concat(P/Y.k),X.invert(U).concat(P/X.k));return function(q){if(q===1)q=X;else{var K=G(q),ee=P/K[2];q=new De(ee,U[0]-K[0]*ee,U[1]-K[1]*ee)}k.zoom(null,q)}})}function I(f,S,N){return!N&&f.__zooming||new M(f,S)}function M(f,S){this.that=f,this.args=S,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,S),this.taps=0}M.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,S){return this.mouse&&f!=="mouse"&&(this.mouse[1]=S.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=S.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=S.invert(this.touch1[0])),this.that.__zoom=S,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var S=ge(this.that).datum();u.call(f,this.that,new Cu(f,{sourceEvent:this.sourceEvent,target:g,type:f,transform:this.that.__zoom,dispatch:u}),S)}};function w(f,...S){if(!e.apply(this,arguments))return;var N=I(this,S).event(f),R=this.__zoom,O=Math.max(s[0],Math.min(s[1],R.k*Math.pow(2,o.apply(this,arguments)))),E=be(f);if(N.wheel)(N.mouse[0][0]!==E[0]||N.mouse[0][1]!==E[1])&&(N.mouse[1]=R.invert(N.mouse[0]=E)),clearTimeout(N.wheel);else{if(R.k===O)return;N.mouse=[E,R.invert(E)],tn(this),N.start()}bt(f),N.wheel=setTimeout(k,x),N.zoom("mouse",n(A(v(R,O),N.mouse[0],N.mouse[1]),N.extent,i));function k(){N.wheel=null,N.end()}}function D(f,...S){if(m||!e.apply(this,arguments))return;var N=f.currentTarget,R=I(this,S,!0).event(f),O=ge(f.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",P,!0),E=be(f,N),k=f.clientX,z=f.clientY;Yr(f.view),Ln(f),R.mouse=[E,this.__zoom.invert(E)],tn(this),R.start();function U(Y){if(bt(Y),!R.moved){var X=Y.clientX-k,G=Y.clientY-z;R.moved=X*X+G*G>p}R.event(Y).zoom("mouse",n(A(R.that.__zoom,R.mouse[0]=be(Y,N),R.mouse[1]),R.extent,i))}function P(Y){O.on("mousemove.zoom mouseup.zoom",null),Wr(Y.view,R.moved),bt(Y),R.event(Y).end()}}function $(f,...S){if(e.apply(this,arguments)){var N=this.__zoom,R=be(f.changedTouches?f.changedTouches[0]:f,this),O=N.invert(R),E=N.k*(f.shiftKey?.5:2),k=n(A(v(N,E),R,O),t.apply(this,S),i);bt(f),a>0?ge(this).transition().duration(a).call(C,k,R,f):ge(this).call(g.transform,k,R,f)}}function T(f,...S){if(e.apply(this,arguments)){var N=f.touches,R=N.length,O=I(this,S,f.changedTouches.length===R).event(f),E,k,z,U;for(Ln(f),k=0;k<R;++k)z=N[k],U=be(z,this),U=[U,this.__zoom.invert(U),z.identifier],O.touch0?!O.touch1&&O.touch0[2]!==U[2]&&(O.touch1=U,O.taps=0):(O.touch0=U,E=!0,O.taps=1+!!l);l&&(l=clearTimeout(l)),E&&(O.taps<2&&(d=U[0],l=setTimeout(function(){l=null},h)),tn(this),O.start())}}function F(f,...S){if(this.__zooming){var N=I(this,S).event(f),R=f.changedTouches,O=R.length,E,k,z,U;for(bt(f),E=0;E<O;++E)k=R[E],z=be(k,this),N.touch0&&N.touch0[2]===k.identifier?N.touch0[0]=z:N.touch1&&N.touch1[2]===k.identifier&&(N.touch1[0]=z);if(k=N.that.__zoom,N.touch1){var P=N.touch0[0],Y=N.touch0[1],X=N.touch1[0],G=N.touch1[1],q=(q=X[0]-P[0])*q+(q=X[1]-P[1])*q,K=(K=G[0]-Y[0])*K+(K=G[1]-Y[1])*K;k=v(k,Math.sqrt(q/K)),z=[(P[0]+X[0])/2,(P[1]+X[1])/2],U=[(Y[0]+G[0])/2,(Y[1]+G[1])/2]}else if(N.touch0)z=N.touch0[0],U=N.touch0[1];else return;N.zoom("touch",n(A(k,z,U),N.extent,i))}}function L(f,...S){if(this.__zooming){var N=I(this,S).event(f),R=f.changedTouches,O=R.length,E,k;for(Ln(f),m&&clearTimeout(m),m=setTimeout(function(){m=null},h),E=0;E<O;++E)k=R[E],N.touch0&&N.touch0[2]===k.identifier?delete N.touch0:N.touch1&&N.touch1[2]===k.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(k=be(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<b)){var z=ge(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return g.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:Gt(+f),g):o},g.filter=function(f){return arguments.length?(e=typeof f=="function"?f:Gt(!!f),g):e},g.touchable=function(f){return arguments.length?(r=typeof f=="function"?f:Gt(!!f),g):r},g.extent=function(f){return arguments.length?(t=typeof f=="function"?f:Gt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),g):t},g.scaleExtent=function(f){return arguments.length?(s[0]=+f[0],s[1]=+f[1],g):[s[0],s[1]]},g.translateExtent=function(f){return arguments.length?(i[0][0]=+f[0][0],i[1][0]=+f[1][0],i[0][1]=+f[0][1],i[1][1]=+f[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(f){return arguments.length?(n=f,g):n},g.duration=function(f){return arguments.length?(a=+f,g):a},g.interpolate=function(f){return arguments.length?(c=f,g):c},g.on=function(){var f=u.on.apply(u,arguments);return f===u?g:f},g.clickDistance=function(f){return arguments.length?(p=(f=+f)*f,g):Math.sqrt(p)},g.tapDistance=function(f){return arguments.length?(b=+f,g):b},g}const xn=_.createContext(null),$u=xn.Provider,Te={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ts=Te.error001();function Q(e,t){const n=_.useContext(xn);if(n===null)throw new Error(ts);return Mr(n,e,t)}const oe=()=>{const e=_.useContext(xn);if(e===null)throw new Error(ts);return _.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ku=e=>e.userSelectionActive?"none":"all";function ns({position:e,children:t,className:n,style:o,...r}){const s=Q(ku),i=`${e}`.split("-");return V.createElement("div",{className:ae(["react-flow__panel",n,...i]),style:{...o,pointerEvents:s},...r},t)}function Fu({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:V.createElement(ns,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Ou=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const d=_.useRef(null),[m,h]=_.useState({x:0,y:0,width:0,height:0}),x=ae(["react-flow__edge-textwrapper",u]);return _.useEffect(()=>{if(d.current){const p=d.current.getBBox();h({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:V.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:x,visibility:m.width?"visible":"hidden",...l},r&&V.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),V.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:d,style:o},n),c)};var zu=_.memo(Ou);const lo=e=>({width:e.offsetWidth,height:e.offsetHeight}),mt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),uo=(e={x:0,y:0},t)=>({x:mt(e.x,t[0][0],t[1][0]),y:mt(e.y,t[0][1],t[1][1])}),er=(e,t,n)=>e<t?mt(Math.abs(e-t),1,50)/50:e>n?-mt(Math.abs(e-n),1,50)/50:0,os=(e,t)=>{const n=er(e.x,35,t.width-35)*20,o=er(e.y,35,t.height-35)*20;return[n,o]},rs=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Uu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),fo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Hu=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),tr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Kn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Pu=e=>fe(e.width)&&fe(e.height)&&fe(e.x)&&fe(e.y),fe=e=>!isNaN(e)&&isFinite(e),te=Symbol.for("internals"),ss=["Enter"," ","Escape"],Yu=(e,t)=>{},Wu=e=>"nativeEvent"in e;function Zn(e){var r,s;const t=Wu(e)?e.nativeEvent:e,n=((s=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const is=e=>"clientX"in e,ke=(e,t)=>{var s,i;const n=is(e),o=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},un=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},pt=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:m,interactionWidth:h=20})=>V.createElement(V.Fragment,null,V.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:m}),h&&V.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&fe(n)&&fe(o)?V.createElement(zu,{x:n,y:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);pt.displayName="BaseEdge";function Et(e,t,n){return n===void 0?n:o=>{const r=t().edges.find(s=>s.id===e);r&&n(o,{...r})}}function as({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[s,a,r,i]}function cs({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const c=e*.125+r*.375+i*.375+n*.125,u=t*.125+s*.375+a*.375+o*.125,l=Math.abs(c-e),d=Math.abs(u-t);return[c,u,l,d]}var qe;(function(e){e.Strict="strict",e.Loose="loose"})(qe||(qe={}));var Xe;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Xe||(Xe={}));var Ft;(function(e){e.Partial="partial",e.Full="full"})(Ft||(Ft={}));var Re;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Re||(Re={}));var dn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(dn||(dn={}));var W;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(W||(W={}));function nr({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===W.Left||e===W.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function ls({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:s=W.Top}){const[i,a]=nr({pos:n,x1:e,y1:t,x2:o,y2:r}),[c,u]=nr({pos:s,x1:o,y1:r,x2:e,y2:t}),[l,d,m,h]=cs({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${a} ${c},${u} ${o},${r}`,l,d,m,h]}const mo=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=W.Bottom,targetPosition:s=W.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:x,interactionWidth:p})=>{const[b,g,v]=ls({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:s});return V.createElement(pt,{path:b,labelX:g,labelY:v,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:x,interactionWidth:p})});mo.displayName="SimpleBezierEdge";const or={[W.Left]:{x:-1,y:0},[W.Right]:{x:1,y:0},[W.Top]:{x:0,y:-1},[W.Bottom]:{x:0,y:1}},Bu=({source:e,sourcePosition:t=W.Bottom,target:n})=>t===W.Left||t===W.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},rr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Xu({source:e,sourcePosition:t=W.Bottom,target:n,targetPosition:o=W.Top,center:r,offset:s}){const i=or[t],a=or[o],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},l=Bu({source:c,sourcePosition:t,target:u}),d=l.x!==0?"x":"y",m=l[d];let h=[],x,p;const b={x:0,y:0},g={x:0,y:0},[v,A,y,C]=as({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*a[d]===-1){x=r.x??v,p=r.y??A;const M=[{x,y:c.y},{x,y:u.y}],w=[{x:c.x,y:p},{x:u.x,y:p}];i[d]===m?h=d==="x"?M:w:h=d==="x"?w:M}else{const M=[{x:c.x,y:u.y}],w=[{x:u.x,y:c.y}];if(d==="x"?h=i.x===m?w:M:h=i.y===m?M:w,t===o){const L=Math.abs(e[d]-n[d]);if(L<=s){const f=Math.min(s-1,s-L);i[d]===m?b[d]=(c[d]>e[d]?-1:1)*f:g[d]=(u[d]>n[d]?-1:1)*f}}if(t!==o){const L=d==="x"?"y":"x",f=i[d]===a[L],S=c[L]>u[L],N=c[L]<u[L];(i[d]===1&&(!f&&S||f&&N)||i[d]!==1&&(!f&&N||f&&S))&&(h=d==="x"?M:w)}const D={x:c.x+b.x,y:c.y+b.y},$={x:u.x+g.x,y:u.y+g.y},T=Math.max(Math.abs(D.x-h[0].x),Math.abs($.x-h[0].x)),F=Math.max(Math.abs(D.y-h[0].y),Math.abs($.y-h[0].y));T>=F?(x=(D.x+$.x)/2,p=h[0].y):(x=h[0].x,p=(D.y+$.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...h,{x:u.x+g.x,y:u.y+g.y},n],x,p,y,C]}function Gu(e,t,n,o){const r=Math.min(rr(e,t)/2,rr(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${s+r*u},${i}Q ${s},${i} ${s},${i+r*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${i+r*c}Q ${s},${i} ${s+r*a},${i}`}function fn({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:s=W.Top,borderRadius:i=5,centerX:a,centerY:c,offset:u=20}){const[l,d,m,h,x]=Xu({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:c},offset:u});return[l.reduce((b,g,v)=>{let A="";return v>0&&v<l.length-1?A=Gu(l[v-1],g,l[v+1],i):A=`${v===0?"M":"L"}${g.x} ${g.y}`,b+=A,b},""),d,m,h,x]}const Nn=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:d=W.Bottom,targetPosition:m=W.Top,markerEnd:h,markerStart:x,pathOptions:p,interactionWidth:b})=>{const[g,v,A]=fn({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:o,targetPosition:m,borderRadius:p==null?void 0:p.borderRadius,offset:p==null?void 0:p.offset});return V.createElement(pt,{path:g,labelX:v,labelY:A,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:h,markerStart:x,interactionWidth:b})});Nn.displayName="SmoothStepEdge";const ho=_.memo(e=>{var t;return V.createElement(Nn,{...e,pathOptions:_.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});ho.displayName="StepEdge";function ju({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,s,i,a]=as({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,s,i,a]}const po=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:m,interactionWidth:h})=>{const[x,p,b]=ju({sourceX:e,sourceY:t,targetX:n,targetY:o});return V.createElement(pt,{path:x,labelX:p,labelY:b,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:m,interactionWidth:h})});po.displayName="StraightEdge";function jt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function sr({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){switch(e){case W.Left:return[t-jt(t-o,s),n];case W.Right:return[t+jt(o-t,s),n];case W.Top:return[t,n-jt(n-r,s)];case W.Bottom:return[t,n+jt(r-n,s)]}}function us({sourceX:e,sourceY:t,sourcePosition:n=W.Bottom,targetX:o,targetY:r,targetPosition:s=W.Top,curvature:i=.25}){const[a,c]=sr({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[u,l]=sr({pos:s,x1:o,y1:r,x2:e,y2:t,c:i}),[d,m,h,x]=cs({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${o},${r}`,d,m,h,x]}const mn=_.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=W.Bottom,targetPosition:s=W.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:x,pathOptions:p,interactionWidth:b})=>{const[g,v,A]=us({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:s,curvature:p==null?void 0:p.curvature});return V.createElement(pt,{path:g,labelX:v,labelY:A,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:m,markerEnd:h,markerStart:x,interactionWidth:b})});mn.displayName="BezierEdge";const go=_.createContext(null),qu=go.Provider;go.Consumer;const Ku=()=>_.useContext(go),Zu=e=>"id"in e&&"source"in e&&"target"in e,ds=e=>"id"in e&&!("source"in e)&&!("target"in e),Ju=(e,t,n)=>{if(!ds(e))return[];const o=n.filter(r=>r.source===e.id).map(r=>r.target);return t.filter(r=>o.includes(r.id))},Qu=(e,t,n)=>{if(!ds(e))return[];const o=n.filter(r=>r.target===e.id).map(r=>r.source);return t.filter(r=>o.includes(r.id))},ed=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,Jn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,td=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),fs=(e,t)=>{if(!e.source||!e.target)return t;let n;return Zu(e)?n={...e}:n={...e,id:ed(e)},td(n,t)?t:t.concat(n)},Qn=({x:e,y:t},[n,o,r],s,[i,a])=>{const c={x:(e-n)/r,y:(t-o)/r};return s?{x:i*Math.round(c.x/i),y:a*Math.round(c.y/a)}:c},ms=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),ct=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},yo=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const{x:s,y:i}=ct(r,t).positionAbsolute;return Uu(o,fo({x:s,y:i,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Hu(n)},hs=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(l=>{const{width:d,height:m,selectable:h=!0,hidden:x=!1}=l;if(i&&!h||x)return!1;const{positionAbsolute:p}=ct(l,a),b={x:p.x,y:p.y,width:d||0,height:m||0},g=Kn(c,b),v=typeof d>"u"||typeof m>"u"||d===null||m===null,A=s&&g>0,y=(d||0)*(m||0);(v||A||g>=y||l.dragging)&&u.push(l)}),u},xo=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},ps=(e,t,n,o,r,s=.1)=>{const i=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(i,a),u=mt(c,o,r),l=e.x+e.width/2,d=e.y+e.height/2,m=t/2-l*u,h=n/2-d*u;return{x:m,y:h,zoom:u}},We=(e,t=0)=>e.transition().duration(t);function ir(e,t,n,o){return(t[n]||[]).reduce((r,s)=>{var i,a;return`${e.id}-${s.id}-${n}`!==o&&r.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),r},[])}function nd(e,t,n,o,r,s){const{x:i,y:a}=ke(e),u=t.elementsFromPoint(i,a).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const p=No(void 0,u),b=u.getAttribute("data-handleid"),g=s({nodeId:x,id:b,type:p});if(g){const v=r.find(A=>A.nodeId===x&&A.type===p&&A.id===b);return{handle:{id:b,type:p,nodeId:x,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:g}}}}let l=[],d=1/0;if(r.forEach(x=>{const p=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(p<=o){const b=s(x);p<=d&&(p<d?l=[{handle:x,validHandleResult:b}]:p===d&&l.push({handle:x,validHandleResult:b}),d=p)}}),!l.length)return{handle:null,validHandleResult:gs()};if(l.length===1)return l[0];const m=l.some(({validHandleResult:x})=>x.isValid),h=l.some(({handle:x})=>x.type==="target");return l.find(({handle:x,validHandleResult:p})=>h?x.type==="target":m?p.isValid:!0)||l[0]}const od={source:null,target:null,sourceHandle:null,targetHandle:null},gs=()=>({handleDomNode:null,isValid:!1,connection:od,endHandle:null});function ys(e,t,n,o,r,s,i){const a=r==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...gs(),handleDomNode:c};if(c){const l=No(void 0,c),d=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),p={source:a?d:n,sourceHandle:a?m:o,target:a?n:d,targetHandle:a?o:m};u.connection=p,h&&x&&(t===qe.Strict?a&&l==="source"||!a&&l==="target":d!==n||m!==o)&&(u.endHandle={nodeId:d,handleId:m,type:l},u.isValid=s(p))}return u}function rd({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,s)=>{if(s[te]){const{handleBounds:i}=s[te];let a=[],c=[];i&&(a=ir(s,i,"source",`${t}-${n}-${o}`),c=ir(s,i,"target",`${t}-${n}-${o}`)),r.push(...a,...c)}return r},[])}function No(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Rn(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function sd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function xs({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const l=rs(e.target),{connectionMode:d,domNode:m,autoPanOnConnect:h,connectionRadius:x,onConnectStart:p,panBy:b,getNodes:g,cancelConnection:v}=s();let A=0,y;const{x:C,y:I}=ke(e),M=l==null?void 0:l.elementFromPoint(C,I),w=No(c,M),D=m==null?void 0:m.getBoundingClientRect();if(!D||!w)return;let $,T=ke(e,D),F=!1,L=null,f=!1,S=null;const N=rd({nodes:g(),nodeId:n,handleId:t,handleType:w}),R=()=>{if(!h)return;const[k,z]=os(T,D);b({x:k,y:z}),A=requestAnimationFrame(R)};i({connectionPosition:T,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:w,connectionStartHandle:{nodeId:n,handleId:t,type:w},connectionEndHandle:null}),p==null||p(e,{nodeId:n,handleId:t,handleType:w});function O(k){const{transform:z}=s();T=ke(k,D);const{handle:U,validHandleResult:P}=nd(k,l,Qn(T,z,!1,[1,1]),x,N,Y=>ys(Y,d,n,t,r?"target":"source",a,l));if(y=U,F||(R(),F=!0),S=P.handleDomNode,L=P.connection,f=P.isValid,i({connectionPosition:y&&f?ms({x:y.x,y:y.y},z):T,connectionStatus:sd(!!y,f),connectionEndHandle:P.endHandle}),!y&&!f&&!S)return Rn($);L.source!==L.target&&S&&(Rn($),$=S,S.classList.add("connecting","react-flow__handle-connecting"),S.classList.toggle("valid",f),S.classList.toggle("react-flow__handle-valid",f))}function E(k){var z,U;(y||S)&&L&&f&&(o==null||o(L)),(U=(z=s()).onConnectEnd)==null||U.call(z,k),c&&(u==null||u(k)),Rn($),v(),cancelAnimationFrame(A),F=!1,f=!1,L=null,S=null,l.removeEventListener("mousemove",O),l.removeEventListener("mouseup",E),l.removeEventListener("touchmove",O),l.removeEventListener("touchend",E)}l.addEventListener("mousemove",O),l.addEventListener("mouseup",E),l.addEventListener("touchmove",O),l.addEventListener("touchend",E)}const ar=()=>!0,id=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),ad=(e,t,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:i}=o;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Ns=_.forwardRef(({type:e="source",position:t=W.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:d,...m},h)=>{var D,$;const x=i||null,p=e==="target",b=oe(),g=Ku(),{connectOnClick:v,noPanClassName:A}=Q(id,ie),{connecting:y,clickConnecting:C}=Q(ad(g,x,e),ie);g||($=(D=b.getState()).onError)==null||$.call(D,"010",Te.error010());const I=T=>{const{defaultEdgeOptions:F,onConnect:L,hasDefaultEdges:f}=b.getState(),S={...F,...T};if(f){const{edges:N,setEdges:R}=b.getState();R(fs(S,N))}L==null||L(S),a==null||a(S)},M=T=>{if(!g)return;const F=is(T);r&&(F&&T.button===0||!F)&&xs({event:T,handleId:x,nodeId:g,onConnect:I,isTarget:p,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||ar}),F?l==null||l(T):d==null||d(T)},w=T=>{const{onClickConnectStart:F,onClickConnectEnd:L,connectionClickStartHandle:f,connectionMode:S,isValidConnection:N}=b.getState();if(!g||!f&&!r)return;if(!f){F==null||F(T,{nodeId:g,handleId:x,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:x}});return}const R=rs(T.target),O=n||N||ar,{connection:E,isValid:k}=ys({nodeId:g,id:x,type:e},S,f.nodeId,f.handleId||null,f.type,O,R);k&&I(E),L==null||L(T),b.setState({connectionClickStartHandle:null})};return V.createElement("div",{"data-handleid":x,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${x}-${e}`,className:ae(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",A,u,{source:!p,target:p,connectable:o,connectablestart:r,connectableend:s,connecting:C,connectionindicator:o&&(r&&!y||s&&y)}]),onMouseDown:M,onTouchStart:M,onClick:v?w:void 0,ref:h,...m},c)});Ns.displayName="Handle";var ht=_.memo(Ns);const ws=({data:e,isConnectable:t,targetPosition:n=W.Top,sourcePosition:o=W.Bottom})=>V.createElement(V.Fragment,null,V.createElement(ht,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,V.createElement(ht,{type:"source",position:o,isConnectable:t}));ws.displayName="DefaultNode";var eo=_.memo(ws);const bs=({data:e,isConnectable:t,sourcePosition:n=W.Bottom})=>V.createElement(V.Fragment,null,e==null?void 0:e.label,V.createElement(ht,{type:"source",position:n,isConnectable:t}));bs.displayName="InputNode";var Es=_.memo(bs);const Ss=({data:e,isConnectable:t,targetPosition:n=W.Top})=>V.createElement(V.Fragment,null,V.createElement(ht,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ss.displayName="OutputNode";var vs=_.memo(Ss);const wo=()=>null;wo.displayName="GroupNode";const cd=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),qt=e=>e.id;function ld(e,t){return ie(e.selectedNodes.map(qt),t.selectedNodes.map(qt))&&ie(e.selectedEdges.map(qt),t.selectedEdges.map(qt))}const _s=_.memo(({onSelectionChange:e})=>{const t=oe(),{selectedNodes:n,selectedEdges:o}=Q(cd,ld);return _.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChange.forEach(s=>s(r))},[n,o,e]),null});_s.displayName="SelectionListener";const ud=e=>!!e.onSelectionChange;function dd({onSelectionChange:e}){const t=Q(ud);return e||t?V.createElement(_s,{onSelectionChange:e}):null}const fd=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function tt(e,t){_.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function j(e,t,n){_.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const md=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:d,edgesFocusable:m,edgesUpdatable:h,elevateNodesOnSelect:x,minZoom:p,maxZoom:b,nodeExtent:g,onNodesChange:v,onEdgesChange:A,elementsSelectable:y,connectionMode:C,snapGrid:I,snapToGrid:M,translateExtent:w,connectOnClick:D,defaultEdgeOptions:$,fitView:T,fitViewOptions:F,onNodesDelete:L,onEdgesDelete:f,onNodeDrag:S,onNodeDragStart:N,onNodeDragStop:R,onSelectionDrag:O,onSelectionDragStart:E,onSelectionDragStop:k,noPanClassName:z,nodeOrigin:U,rfId:P,autoPanOnConnect:Y,autoPanOnNodeDrag:X,onError:G,connectionRadius:q,isValidConnection:K,nodeDragThreshold:ee})=>{const{setNodes:Z,setEdges:me,setDefaultNodesAndEdges:ue,setMinZoom:he,setMaxZoom:de,setTranslateExtent:ne,setNodeExtent:Ne,reset:J}=Q(fd,ie),B=oe();return _.useEffect(()=>{const ce=o==null?void 0:o.map(Fe=>({...Fe,...$}));return ue(n,ce),()=>{J()}},[]),j("defaultEdgeOptions",$,B.setState),j("connectionMode",C,B.setState),j("onConnect",r,B.setState),j("onConnectStart",s,B.setState),j("onConnectEnd",i,B.setState),j("onClickConnectStart",a,B.setState),j("onClickConnectEnd",c,B.setState),j("nodesDraggable",u,B.setState),j("nodesConnectable",l,B.setState),j("nodesFocusable",d,B.setState),j("edgesFocusable",m,B.setState),j("edgesUpdatable",h,B.setState),j("elementsSelectable",y,B.setState),j("elevateNodesOnSelect",x,B.setState),j("snapToGrid",M,B.setState),j("snapGrid",I,B.setState),j("onNodesChange",v,B.setState),j("onEdgesChange",A,B.setState),j("connectOnClick",D,B.setState),j("fitViewOnInit",T,B.setState),j("fitViewOnInitOptions",F,B.setState),j("onNodesDelete",L,B.setState),j("onEdgesDelete",f,B.setState),j("onNodeDrag",S,B.setState),j("onNodeDragStart",N,B.setState),j("onNodeDragStop",R,B.setState),j("onSelectionDrag",O,B.setState),j("onSelectionDragStart",E,B.setState),j("onSelectionDragStop",k,B.setState),j("noPanClassName",z,B.setState),j("nodeOrigin",U,B.setState),j("rfId",P,B.setState),j("autoPanOnConnect",Y,B.setState),j("autoPanOnNodeDrag",X,B.setState),j("onError",G,B.setState),j("connectionRadius",q,B.setState),j("isValidConnection",K,B.setState),j("nodeDragThreshold",ee,B.setState),tt(e,Z),tt(t,me),tt(p,he),tt(b,de),tt(w,ne),tt(g,Ne),null},cr={display:"none"},hd={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},As="react-flow__node-desc",Ds="react-flow__edge-desc",pd="react-flow__aria-live",gd=e=>e.ariaLiveMessage;function yd({rfId:e}){const t=Q(gd);return V.createElement("div",{id:`${pd}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:hd},t)}function xd({rfId:e,disableKeyboardA11y:t}){return V.createElement(V.Fragment,null,V.createElement("div",{id:`${As}-${e}`,style:cr},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),V.createElement("div",{id:`${Ds}-${e}`,style:cr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&V.createElement(yd,{rfId:e}))}var Ot=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=_.useState(!1),r=_.useRef(!1),s=_.useRef(new Set([])),[i,a]=_.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=u.reduce((d,m)=>d.concat(...m),[]);return[u,l]}return[[],[]]},[e]);return _.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const l=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Zn(h))return!1;const p=ur(h.code,a);s.current.add(h[p]),lr(i,s.current,!1)&&(h.preventDefault(),o(!0))},d=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Zn(h))return!1;const p=ur(h.code,a);lr(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(h[p]),h.key==="Meta"&&s.current.clear(),r.current=!1},m=()=>{s.current.clear(),o(!1)};return u==null||u.addEventListener("keydown",l),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",l),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",m)}}},[e,o]),n};function lr(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function ur(e,t){return t.includes(e)?"code":"key"}function Cs(e,t,n,o){var a,c;const r=e.parentNode||e.parentId;if(!r)return n;const s=t.get(r),i=ct(s,o);return Cs(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((a=s[te])==null?void 0:a.z)??0)>(n.z??0)?((c=s[te])==null?void 0:c.z)??0:n.z??0},o)}function Ts(e,t,n){e.forEach(o=>{var s;const r=o.parentNode||o.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[o.id]){const{x:i,y:a,z:c}=Cs(o,e,{...o.position,z:((s=o[te])==null?void 0:s.z)??0},t);o.positionAbsolute={x:i,y:a},o[te].z=c,n!=null&&n[o.id]&&(o[te].isParent=!0)}})}function Vn(e,t,n,o){const r=new Map,s={},i=o?1e3:0;return e.forEach(a=>{var h;const c=(fe(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(s[d]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(l,te,{enumerable:!1,value:{handleBounds:m||(h=u==null?void 0:u[te])==null?void 0:h.handleBounds,z:c}}),r.set(a.id,l)}),Ts(r,n,s),r}function Ms(e,t={}){const{getNodes:n,width:o,height:r,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:d}=e(),m=t.initial&&!u&&l;if(a&&c&&(m||!t.initial)){const x=n().filter(b=>{var v;const g=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(v=t.nodes)!=null&&v.length?g&&t.nodes.some(A=>A.id===b.id):g}),p=x.every(b=>b.width&&b.height);if(x.length>0&&p){const b=yo(x,d),{x:g,y:v,zoom:A}=ps(b,o,r,t.minZoom??s,t.maxZoom??i,t.padding??.1),y=$e.translate(g,v).scale(A);return typeof t.duration=="number"&&t.duration>0?a.transform(We(c,t.duration),y):a.transform(c,y),!0}}return!1}function Nd(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[te]:o[te],selected:n.selected})}),new Map(t)}function wd(e,t){return t.map(n=>{const o=e.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Kt({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:r,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&o({nodeInternals:Nd(e,r)}),i==null||i(e)),t!=null&&t.length&&(u&&o({edges:wd(t,s)}),a==null||a(t))}const nt=()=>{},bd={zoomIn:nt,zoomOut:nt,zoomTo:nt,getZoom:()=>1,setViewport:nt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:nt,fitBounds:nt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Ed=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Sd=()=>{const e=oe(),{d3Zoom:t,d3Selection:n}=Q(Ed,ie);return _.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(We(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(We(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,s)=>t.scaleTo(We(n,s==null?void 0:s.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,s)=>{const[i,a,c]=e.getState().transform,u=$e.translate(r.x??i,r.y??a).scale(r.zoom??c);t.transform(We(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[r,s,i]=e.getState().transform;return{x:r,y:s,zoom:i}},fitView:r=>Ms(e.getState,r),setCenter:(r,s,i)=>{const{width:a,height:c,maxZoom:u}=e.getState(),l=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,d=a/2-r*l,m=c/2-s*l,h=$e.translate(d,m).scale(l);t.transform(We(n,i==null?void 0:i.duration),h)},fitBounds:(r,s)=>{const{width:i,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:d,zoom:m}=ps(r,i,a,c,u,(s==null?void 0:s.padding)??.1),h=$e.translate(l,d).scale(m);t.transform(We(n,s==null?void 0:s.duration),h)},project:r=>{const{transform:s,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Qn(r,s,i,a)},screenToFlowPosition:r=>{const{transform:s,snapToGrid:i,snapGrid:a,domNode:c}=e.getState();if(!c)return r;const{x:u,y:l}=c.getBoundingClientRect(),d={x:r.x-u,y:r.y-l};return Qn(d,s,i,a)},flowToScreenPosition:r=>{const{transform:s,domNode:i}=e.getState();if(!i)return r;const{x:a,y:c}=i.getBoundingClientRect(),u=ms(r,s);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:bd,[t,n])};function wn(){const e=Sd(),t=oe(),n=_.useCallback(()=>t.getState().getNodes().map(p=>({...p})),[]),o=_.useCallback(p=>t.getState().nodeInternals.get(p),[]),r=_.useCallback(()=>{const{edges:p=[]}=t.getState();return p.map(b=>({...b}))},[]),s=_.useCallback(p=>{const{edges:b=[]}=t.getState();return b.find(g=>g.id===p)},[]),i=_.useCallback(p=>{const{getNodes:b,setNodes:g,hasDefaultNodes:v,onNodesChange:A}=t.getState(),y=b(),C=typeof p=="function"?p(y):p;if(v)g(C);else if(A){const I=C.length===0?y.map(M=>({type:"remove",id:M.id})):C.map(M=>({item:M,type:"reset"}));A(I)}},[]),a=_.useCallback(p=>{const{edges:b=[],setEdges:g,hasDefaultEdges:v,onEdgesChange:A}=t.getState(),y=typeof p=="function"?p(b):p;if(v)g(y);else if(A){const C=y.length===0?b.map(I=>({type:"remove",id:I.id})):y.map(I=>({item:I,type:"reset"}));A(C)}},[]),c=_.useCallback(p=>{const b=Array.isArray(p)?p:[p],{getNodes:g,setNodes:v,hasDefaultNodes:A,onNodesChange:y}=t.getState();if(A){const I=[...g(),...b];v(I)}else if(y){const C=b.map(I=>({item:I,type:"add"}));y(C)}},[]),u=_.useCallback(p=>{const b=Array.isArray(p)?p:[p],{edges:g=[],setEdges:v,hasDefaultEdges:A,onEdgesChange:y}=t.getState();if(A)v([...g,...b]);else if(y){const C=b.map(I=>({item:I,type:"add"}));y(C)}},[]),l=_.useCallback(()=>{const{getNodes:p,edges:b=[],transform:g}=t.getState(),[v,A,y]=g;return{nodes:p().map(C=>({...C})),edges:b.map(C=>({...C})),viewport:{x:v,y:A,zoom:y}}},[]),d=_.useCallback(({nodes:p,edges:b})=>{const{nodeInternals:g,getNodes:v,edges:A,hasDefaultNodes:y,hasDefaultEdges:C,onNodesDelete:I,onEdgesDelete:M,onNodesChange:w,onEdgesChange:D}=t.getState(),$=(p||[]).map(S=>S.id),T=(b||[]).map(S=>S.id),F=v().reduce((S,N)=>{const R=N.parentNode||N.parentId,O=!$.includes(N.id)&&R&&S.find(k=>k.id===R);return(typeof N.deletable=="boolean"?N.deletable:!0)&&($.includes(N.id)||O)&&S.push(N),S},[]),L=A.filter(S=>typeof S.deletable=="boolean"?S.deletable:!0),f=L.filter(S=>T.includes(S.id));if(F||f){const S=xo(F,L),N=[...f,...S],R=N.reduce((O,E)=>(O.includes(E.id)||O.push(E.id),O),[]);if((C||y)&&(C&&t.setState({edges:A.filter(O=>!R.includes(O.id))}),y&&(F.forEach(O=>{g.delete(O.id)}),t.setState({nodeInternals:new Map(g)}))),R.length>0&&(M==null||M(N),D&&D(R.map(O=>({id:O,type:"remove"})))),F.length>0&&(I==null||I(F),w)){const O=F.map(E=>({id:E.id,type:"remove"}));w(O)}}},[]),m=_.useCallback(p=>{const b=Pu(p),g=b?null:t.getState().nodeInternals.get(p.id);return!b&&!g?[null,null,b]:[b?p:tr(g),g,b]},[]),h=_.useCallback((p,b=!0,g)=>{const[v,A,y]=m(p);return v?(g||t.getState().getNodes()).filter(C=>{if(!y&&(C.id===A.id||!C.positionAbsolute))return!1;const I=tr(C),M=Kn(I,v);return b&&M>0||M>=v.width*v.height}):[]},[]),x=_.useCallback((p,b,g=!0)=>{const[v]=m(p);if(!v)return!1;const A=Kn(v,b);return g&&A>0||A>=v.width*v.height},[]);return _.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:r,getEdge:s,setNodes:i,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:x}),[e,n,o,r,s,i,a,c,u,l,d,h,x])}const vd={actInsideInputWithModifier:!1};var _d=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=oe(),{deleteElements:o}=wn(),r=Ot(e,vd),s=Ot(t);_.useEffect(()=>{if(r){const{edges:i,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=i.filter(l=>l.selected);o({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),_.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function Ad(e){const t=oe();_.useEffect(()=>{let n;const o=()=>{var s,i;if(!e.current)return;const r=lo(e.current);(r.height===0||r.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Te.error004())),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const bo={position:"absolute",width:"100%",height:"100%",top:0,left:0},Dd=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Zt=e=>({x:e.x,y:e.y,zoom:e.k}),ot=(e,t)=>e.target.closest(`.${t}`),dr=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),fr=e=>{const t=e.ctrlKey&&un()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Cd=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Td=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Xe.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:m,translateExtent:h,minZoom:x,maxZoom:p,zoomActivationKeyCode:b,preventScrolling:g=!0,children:v,noWheelClassName:A,noPanClassName:y})=>{const C=_.useRef(),I=oe(),M=_.useRef(!1),w=_.useRef(!1),D=_.useRef(null),$=_.useRef({x:0,y:0,zoom:0}),{d3Zoom:T,d3Selection:F,d3ZoomHandler:L,userSelectionActive:f}=Q(Cd,ie),S=Ot(b),N=_.useRef(0),R=_.useRef(!1),O=_.useRef();return Ad(D),_.useEffect(()=>{if(D.current){const E=D.current.getBoundingClientRect(),k=Vu().scaleExtent([x,p]).translateExtent(h),z=ge(D.current).call(k),U=$e.translate(m.x,m.y).scale(mt(m.zoom,x,p)),P=[[0,0],[E.width,E.height]],Y=k.constrain()(U,P,h);k.transform(z,Y),k.wheelDelta(fr),I.setState({d3Zoom:k,d3Selection:z,d3ZoomHandler:z.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:D.current.closest(".react-flow")})}},[]),_.useEffect(()=>{F&&T&&(i&&!S&&!f?F.on("wheel.zoom",E=>{if(ot(E,A))return!1;E.preventDefault(),E.stopImmediatePropagation();const k=F.property("__zoom").k||1;if(E.ctrlKey&&s){const K=be(E),ee=fr(E),Z=k*Math.pow(2,ee);T.scaleTo(F,Z,K,E);return}const z=E.deltaMode===1?20:1;let U=c===Xe.Vertical?0:E.deltaX*z,P=c===Xe.Horizontal?0:E.deltaY*z;!un()&&E.shiftKey&&c!==Xe.Vertical&&(U=E.deltaY*z,P=0),T.translateBy(F,-(U/k)*a,-(P/k)*a,{internal:!0});const Y=Zt(F.property("__zoom")),{onViewportChangeStart:X,onViewportChange:G,onViewportChangeEnd:q}=I.getState();clearTimeout(O.current),R.current||(R.current=!0,t==null||t(E,Y),X==null||X(Y)),R.current&&(e==null||e(E,Y),G==null||G(Y),O.current=setTimeout(()=>{n==null||n(E,Y),q==null||q(Y),R.current=!1},150))},{passive:!1}):typeof L<"u"&&F.on("wheel.zoom",function(E,k){if(!g&&E.type==="wheel"&&!E.ctrlKey||ot(E,A))return null;E.preventDefault(),L.call(this,E,k)},{passive:!1}))},[f,i,c,F,T,L,S,s,g,A,t,e,n]),_.useEffect(()=>{T&&T.on("start",E=>{var U,P;if(!E.sourceEvent||E.sourceEvent.internal)return null;N.current=(U=E.sourceEvent)==null?void 0:U.button;const{onViewportChangeStart:k}=I.getState(),z=Zt(E.transform);M.current=!0,$.current=z,((P=E.sourceEvent)==null?void 0:P.type)==="mousedown"&&I.setState({paneDragging:!0}),k==null||k(z),t==null||t(E.sourceEvent,z)})},[T,t]),_.useEffect(()=>{T&&(f&&!M.current?T.on("zoom",null):f||T.on("zoom",E=>{var z;const{onViewportChange:k}=I.getState();if(I.setState({transform:[E.transform.x,E.transform.y,E.transform.k]}),w.current=!!(o&&dr(d,N.current??0)),(e||k)&&!((z=E.sourceEvent)!=null&&z.internal)){const U=Zt(E.transform);k==null||k(U),e==null||e(E.sourceEvent,U)}}))},[f,T,e,d,o]),_.useEffect(()=>{T&&T.on("end",E=>{if(!E.sourceEvent||E.sourceEvent.internal)return null;const{onViewportChangeEnd:k}=I.getState();if(M.current=!1,I.setState({paneDragging:!1}),o&&dr(d,N.current??0)&&!w.current&&o(E.sourceEvent),w.current=!1,(n||k)&&Dd($.current,E.transform)){const z=Zt(E.transform);$.current=z,clearTimeout(C.current),C.current=setTimeout(()=>{k==null||k(z),n==null||n(E.sourceEvent,z)},i?150:0)}})},[T,i,d,n,o]),_.useEffect(()=>{T&&T.filter(E=>{const k=S||r,z=s&&E.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&E.button===1&&E.type==="mousedown"&&(ot(E,"react-flow__node")||ot(E,"react-flow__edge")))return!0;if(!d&&!k&&!i&&!u&&!s||f||!u&&E.type==="dblclick"||ot(E,A)&&E.type==="wheel"||ot(E,y)&&(E.type!=="wheel"||i&&E.type==="wheel"&&!S)||!s&&E.ctrlKey&&E.type==="wheel"||!k&&!i&&!z&&E.type==="wheel"||!d&&(E.type==="mousedown"||E.type==="touchstart")||Array.isArray(d)&&!d.includes(E.button)&&E.type==="mousedown")return!1;const U=Array.isArray(d)&&d.includes(E.button)||!E.button||E.button<=1;return(!E.ctrlKey||E.type==="wheel")&&U})},[f,T,r,s,i,u,d,l,S]),V.createElement("div",{className:"react-flow__renderer",ref:D,style:bo},v)},Md=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Id(){const{userSelectionActive:e,userSelectionRect:t}=Q(Md,ie);return e&&t?V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function mr(e,t){const n=t.parentNode||t.parentId,o=e.find(r=>r.id===n);if(o){const r=t.position.x+t.width-o.width,s=t.position.y+t.height-o.height;if(r>0||s>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),s>0&&(o.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);o.position.x=o.position.x-i,o.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);o.position.y=o.position.y-i,o.style.height+=i,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function Is(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,r)=>{const s=e.filter(a=>a.id===r.id);if(s.length===0)return o.push(r),o;const i={...r};for(const a of s)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&mr(o,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&mr(o,i);break}case"remove":return o}return o.push(i),o},n)}function Ls(e,t){return Is(e,t)}function Ld(e,t){return Is(e,t)}const Le=(e,t)=>({id:e,type:"select",selected:t});function st(e,t){return e.reduce((n,o)=>{const r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Le(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Le(o.id,!1))),n},[])}const $n=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Rd=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Rs=_.memo(({isSelecting:e,selectionMode:t=Ft.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:d})=>{const m=_.useRef(null),h=oe(),x=_.useRef(0),p=_.useRef(0),b=_.useRef(),{userSelectionActive:g,elementsSelectable:v,dragging:A}=Q(Rd,ie),y=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,p.current=0},C=L=>{s==null||s(L),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){L.preventDefault();return}i==null||i(L)},M=a?L=>a(L):void 0,w=L=>{const{resetSelectedElements:f,domNode:S}=h.getState();if(b.current=S==null?void 0:S.getBoundingClientRect(),!v||!e||L.button!==0||L.target!==m.current||!b.current)return;const{x:N,y:R}=ke(L,b.current);f(),h.setState({userSelectionRect:{width:0,height:0,startX:N,startY:R,x:N,y:R}}),o==null||o(L)},D=L=>{const{userSelectionRect:f,nodeInternals:S,edges:N,transform:R,onNodesChange:O,onEdgesChange:E,nodeOrigin:k,getNodes:z}=h.getState();if(!e||!b.current||!f)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const U=ke(L,b.current),P=f.startX??0,Y=f.startY??0,X={...f,x:U.x<P?U.x:P,y:U.y<Y?U.y:Y,width:Math.abs(U.x-P),height:Math.abs(U.y-Y)},G=z(),q=hs(S,X,R,t===Ft.Partial,!0,k),K=xo(q,N).map(Z=>Z.id),ee=q.map(Z=>Z.id);if(x.current!==ee.length){x.current=ee.length;const Z=st(G,ee);Z.length&&(O==null||O(Z))}if(p.current!==K.length){p.current=K.length;const Z=st(N,K);Z.length&&(E==null||E(Z))}h.setState({userSelectionRect:X})},$=L=>{if(L.button!==0)return;const{userSelectionRect:f}=h.getState();!g&&f&&L.target===m.current&&(C==null||C(L)),h.setState({nodesSelectionActive:x.current>0}),y(),r==null||r(L)},T=L=>{g&&(h.setState({nodesSelectionActive:x.current>0}),r==null||r(L)),y()},F=v&&(e||g);return V.createElement("div",{className:ae(["react-flow__pane",{dragging:A,selection:e}]),onClick:F?void 0:$n(C,m),onContextMenu:$n(I,m),onWheel:$n(M,m),onMouseEnter:F?void 0:c,onMouseDown:F?w:void 0,onMouseMove:F?D:u,onMouseUp:F?$:void 0,onMouseLeave:F?T:l,ref:m,style:bo},d,V.createElement(Id,null))});Rs.displayName="Pane";function Vs(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return o?o.selected?!0:Vs(o,t):!1}function hr(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Vd(e,t,n,o){return Array.from(e.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!Vs(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var s,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function $d(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function $s(e,t,n,o,r=[0,0],s){const i=$d(e,e.extent||o);let a=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const d=n.get(c),{x:m,y:h}=ct(d,r).positionAbsolute;a=d&&fe(m)&&fe(h)&&fe(d.width)&&fe(d.height)?[[m+e.width*r[0],h+e.height*r[1]],[m+d.width-e.width+e.width*r[0],h+d.height-e.height+e.height*r[1]]]:a}else s==null||s("005",Te.error005()),a=i;else if(e.extent&&c&&e.extent!=="parent"){const d=n.get(c),{x:m,y:h}=ct(d,r).positionAbsolute;a=[[e.extent[0][0]+m,e.extent[0][1]+h],[e.extent[1][0]+m,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const d=n.get(c);u=ct(d,r).positionAbsolute}const l=a&&a!=="parent"?uo(t,a):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function kn({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?o.find(r=>r.id===e):o[0],o]}const pr=(e,t,n,o)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const s=Array.from(r),i=t.getBoundingClientRect(),a={x:i.width*o[0],y:i.height*o[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...lo(c)}})};function St(e,t,n){return n===void 0?n:o=>{const r=t().nodeInternals.get(e);r&&n(o,{...r})}}function to({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Te.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var l;return(l=o==null?void 0:o.current)==null?void 0:l.blur()})):r([e])}function kd(){const e=oe();return _.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:s?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:s?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function Fn(e){return(t,n,o)=>e==null?void 0:e(t,o)}function ks({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:s,selectNodesOnDrag:i}){const a=oe(),[c,u]=_.useState(!1),l=_.useRef([]),d=_.useRef({x:null,y:null}),m=_.useRef(0),h=_.useRef(null),x=_.useRef({x:0,y:0}),p=_.useRef(null),b=_.useRef(!1),g=_.useRef(!1),v=_.useRef(!1),A=kd();return _.useEffect(()=>{if(e!=null&&e.current){const y=ge(e.current),C=({x:w,y:D})=>{const{nodeInternals:$,onNodeDrag:T,onSelectionDrag:F,updateNodePositions:L,nodeExtent:f,snapGrid:S,snapToGrid:N,nodeOrigin:R,onError:O}=a.getState();d.current={x:w,y:D};let E=!1,k={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&f){const U=yo(l.current,R);k=fo(U)}if(l.current=l.current.map(U=>{const P={x:w-U.distance.x,y:D-U.distance.y};N&&(P.x=S[0]*Math.round(P.x/S[0]),P.y=S[1]*Math.round(P.y/S[1]));const Y=[[f[0][0],f[0][1]],[f[1][0],f[1][1]]];l.current.length>1&&f&&!U.extent&&(Y[0][0]=U.positionAbsolute.x-k.x+f[0][0],Y[1][0]=U.positionAbsolute.x+(U.width??0)-k.x2+f[1][0],Y[0][1]=U.positionAbsolute.y-k.y+f[0][1],Y[1][1]=U.positionAbsolute.y+(U.height??0)-k.y2+f[1][1]);const X=$s(U,P,$,Y,R,O);return E=E||U.position.x!==X.position.x||U.position.y!==X.position.y,U.position=X.position,U.positionAbsolute=X.positionAbsolute,U}),!E)return;L(l.current,!0,!0),u(!0);const z=r?T:Fn(F);if(z&&p.current){const[U,P]=kn({nodeId:r,dragItems:l.current,nodeInternals:$});z(p.current,U,P)}},I=()=>{if(!h.current)return;const[w,D]=os(x.current,h.current);if(w!==0||D!==0){const{transform:$,panBy:T}=a.getState();d.current.x=(d.current.x??0)-w/$[2],d.current.y=(d.current.y??0)-D/$[2],T({x:w,y:D})&&C(d.current)}m.current=requestAnimationFrame(I)},M=w=>{var R;const{nodeInternals:D,multiSelectionActive:$,nodesDraggable:T,unselectNodesAndEdges:F,onNodeDragStart:L,onSelectionDragStart:f}=a.getState();g.current=!0;const S=r?L:Fn(f);(!i||!s)&&!$&&r&&((R=D.get(r))!=null&&R.selected||F()),r&&s&&i&&to({id:r,store:a,nodeRef:e});const N=A(w);if(d.current=N,l.current=Vd(D,T,N,r),S&&l.current){const[O,E]=kn({nodeId:r,dragItems:l.current,nodeInternals:D});S(w.sourceEvent,O,E)}};if(t)y.on(".drag",null);else{const w=jc().on("start",D=>{const{domNode:$,nodeDragThreshold:T}=a.getState();T===0&&M(D),v.current=!1;const F=A(D);d.current=F,h.current=($==null?void 0:$.getBoundingClientRect())||null,x.current=ke(D.sourceEvent,h.current)}).on("drag",D=>{var L,f;const $=A(D),{autoPanOnNodeDrag:T,nodeDragThreshold:F}=a.getState();if(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!b.current&&g.current&&T&&(b.current=!0,I()),!g.current){const S=$.xSnapped-(((L=d==null?void 0:d.current)==null?void 0:L.x)??0),N=$.ySnapped-(((f=d==null?void 0:d.current)==null?void 0:f.y)??0);Math.sqrt(S*S+N*N)>F&&M(D)}(d.current.x!==$.xSnapped||d.current.y!==$.ySnapped)&&l.current&&g.current&&(p.current=D.sourceEvent,x.current=ke(D.sourceEvent,h.current),C($))}}).on("end",D=>{if(!(!g.current||v.current)&&(u(!1),b.current=!1,g.current=!1,cancelAnimationFrame(m.current),l.current)){const{updateNodePositions:$,nodeInternals:T,onNodeDragStop:F,onSelectionDragStop:L}=a.getState(),f=r?F:Fn(L);if($(l.current,!1,!1),f){const[S,N]=kn({nodeId:r,dragItems:l.current,nodeInternals:T});f(D.sourceEvent,S,N)}}}).filter(D=>{const $=D.target;return!D.button&&(!n||!hr($,`.${n}`,e))&&(!o||hr($,o,e))});return y.call(w),()=>{y.on(".drag",null)}}}},[e,t,n,o,s,a,r,i,A]),c}function Fs(){const e=oe();return _.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),d=i().filter(v=>v.selected&&(v.draggable||l&&typeof v.draggable>"u")),m=a?c[0]:5,h=a?c[1]:5,x=n.isShiftPressed?4:1,p=n.x*m*x,b=n.y*h*x,g=d.map(v=>{if(v.positionAbsolute){const A={x:v.positionAbsolute.x+p,y:v.positionAbsolute.y+b};a&&(A.x=c[0]*Math.round(A.x/c[0]),A.y=c[1]*Math.round(A.y/c[1]));const{positionAbsolute:y,position:C}=$s(v,A,o,r,void 0,u);v.position=C,v.positionAbsolute=y}return v});s(g,!0,!1)},[])}const lt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var vt=e=>{const t=({id:n,type:o,data:r,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:d,onMouseMove:m,onMouseLeave:h,onContextMenu:x,onDoubleClick:p,style:b,className:g,isDraggable:v,isSelectable:A,isConnectable:y,isFocusable:C,selectNodesOnDrag:I,sourcePosition:M,targetPosition:w,hidden:D,resizeObserver:$,dragHandle:T,zIndex:F,isParent:L,noDragClassName:f,noPanClassName:S,initialized:N,disableKeyboardA11y:R,ariaLabel:O,rfId:E,hasHandleBounds:k})=>{const z=oe(),U=_.useRef(null),P=_.useRef(null),Y=_.useRef(M),X=_.useRef(w),G=_.useRef(o),q=A||v||l||d||m||h,K=Fs(),ee=St(n,z.getState,d),Z=St(n,z.getState,m),me=St(n,z.getState,h),ue=St(n,z.getState,x),he=St(n,z.getState,p),de=J=>{const{nodeDragThreshold:B}=z.getState();if(A&&(!I||!v||B>0)&&to({id:n,store:z,nodeRef:U}),l){const ce=z.getState().nodeInternals.get(n);ce&&l(J,{...ce})}},ne=J=>{if(!Zn(J)&&!R)if(ss.includes(J.key)&&A){const B=J.key==="Escape";to({id:n,store:z,unselect:B,nodeRef:U})}else v&&u&&Object.prototype.hasOwnProperty.call(lt,J.key)&&(z.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),K({x:lt[J.key].x,y:lt[J.key].y,isShiftPressed:J.shiftKey}))};_.useEffect(()=>()=>{P.current&&($==null||$.unobserve(P.current),P.current=null)},[]),_.useEffect(()=>{if(U.current&&!D){const J=U.current;(!N||!k||P.current!==J)&&(P.current&&($==null||$.unobserve(P.current)),$==null||$.observe(J),P.current=J)}},[D,N,k]),_.useEffect(()=>{const J=G.current!==o,B=Y.current!==M,ce=X.current!==w;U.current&&(J||B||ce)&&(J&&(G.current=o),B&&(Y.current=M),ce&&(X.current=w),z.getState().updateNodeDimensions([{id:n,nodeElement:U.current,forceUpdate:!0}]))},[n,o,M,w]);const Ne=ks({nodeRef:U,disabled:D||!v,noDragClassName:f,handleSelector:T,nodeId:n,isSelectable:A,selectNodesOnDrag:I});return D?null:V.createElement("div",{className:ae(["react-flow__node",`react-flow__node-${o}`,{[S]:v},g,{selected:u,selectable:A,parent:L,dragging:Ne}]),ref:U,style:{zIndex:F,transform:`translate(${a}px,${c}px)`,pointerEvents:q?"all":"none",visibility:N?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:Z,onMouseLeave:me,onContextMenu:ue,onClick:de,onDoubleClick:he,onKeyDown:C?ne:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":R?void 0:`${As}-${E}`,"aria-label":O},V.createElement(qu,{value:n},V.createElement(e,{id:n,data:r,type:o,xPos:s,yPos:i,selected:u,isConnectable:y,sourcePosition:M,targetPosition:w,dragging:Ne,dragHandle:T,zIndex:F})))};return t.displayName="NodeWrapper",_.memo(t)};const Fd=e=>{const t=e.getNodes().filter(n=>n.selected);return{...yo(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Od({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=oe(),{width:r,height:s,x:i,y:a,transformString:c,userSelectionActive:u}=Q(Fd,ie),l=Fs(),d=_.useRef(null);if(_.useEffect(()=>{var x;n||(x=d.current)==null||x.focus({preventScroll:!0})},[n]),ks({nodeRef:d}),u||!r||!s)return null;const m=e?x=>{const p=o.getState().getNodes().filter(b=>b.selected);e(x,p)}:void 0,h=x=>{Object.prototype.hasOwnProperty.call(lt,x.key)&&l({x:lt[x.key].x,y:lt[x.key].y,isShiftPressed:x.shiftKey})};return V.createElement("div",{className:ae(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},V.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:s,top:a,left:i}}))}var zd=_.memo(Od);const Ud=e=>e.nodesSelectionActive,Os=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:m,selectionMode:h,onSelectionStart:x,onSelectionEnd:p,multiSelectionKeyCode:b,panActivationKeyCode:g,zoomActivationKeyCode:v,elementsSelectable:A,zoomOnScroll:y,zoomOnPinch:C,panOnScroll:I,panOnScrollSpeed:M,panOnScrollMode:w,zoomOnDoubleClick:D,panOnDrag:$,defaultViewport:T,translateExtent:F,minZoom:L,maxZoom:f,preventScrolling:S,onSelectionContextMenu:N,noWheelClassName:R,noPanClassName:O,disableKeyboardA11y:E})=>{const k=Q(Ud),z=Ot(d),U=Ot(g),P=U||$,Y=U||I,X=z||m&&P!==!0;return _d({deleteKeyCode:a,multiSelectionKeyCode:b}),V.createElement(Td,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:s,elementsSelectable:A,zoomOnScroll:y,zoomOnPinch:C,panOnScroll:Y,panOnScrollSpeed:M,panOnScrollMode:w,zoomOnDoubleClick:D,panOnDrag:!z&&P,defaultViewport:T,translateExtent:F,minZoom:L,maxZoom:f,zoomActivationKeyCode:v,preventScrolling:S,noWheelClassName:R,noPanClassName:O},V.createElement(Rs,{onSelectionStart:x,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:P,isSelecting:!!X,selectionMode:h},e,k&&V.createElement(zd,{onSelectionContextMenu:N,noPanClassName:O,disableKeyboardA11y:E})))};Os.displayName="FlowRenderer";var Hd=_.memo(Os);function Pd(e){return Q(_.useCallback(n=>e?hs(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Yd(e){const t={input:vt(e.input||Es),default:vt(e.default||eo),output:vt(e.output||vs),group:vt(e.group||wo)},n={},o=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=vt(e[s]||eo),r),n);return{...t,...o}}const Wd=({x:e,y:t,width:n,height:o,origin:r})=>!n||!o?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]},Bd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),zs=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:s,onError:i}=Q(Bd,ie),a=Pd(e.onlyRenderVisibleElements),c=_.useRef(),u=_.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const m=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(m)});return c.current=l,l},[]);return _.useEffect(()=>()=>{var l;(l=c==null?void 0:c.current)==null||l.disconnect()},[]),V.createElement("div",{className:"react-flow__nodes",style:bo},a.map(l=>{var C,I,M;let d=l.type||"default";e.nodeTypes[d]||(i==null||i("003",Te.error003(d)),d="default");const m=e.nodeTypes[d]||e.nodeTypes.default,h=!!(l.draggable||t&&typeof l.draggable>"u"),x=!!(l.selectable||r&&typeof l.selectable>"u"),p=!!(l.connectable||n&&typeof l.connectable>"u"),b=!!(l.focusable||o&&typeof l.focusable>"u"),g=e.nodeExtent?uo(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,v=(g==null?void 0:g.x)??0,A=(g==null?void 0:g.y)??0,y=Wd({x:v,y:A,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return V.createElement(m,{key:l.id,id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||W.Bottom,targetPosition:l.targetPosition||W.Top,hidden:l.hidden,xPos:v,yPos:A,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:x,isConnectable:p,isFocusable:b,resizeObserver:u,dragHandle:l.dragHandle,zIndex:((C=l[te])==null?void 0:C.z)??0,isParent:!!((I=l[te])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!((M=l[te])!=null&&M.handleBounds)})}))};zs.displayName="NodeRenderer";var Xd=_.memo(zs);const Gd=(e,t,n)=>n===W.Left?e-t:n===W.Right?e+t:e,jd=(e,t,n)=>n===W.Top?e-t:n===W.Bottom?e+t:e,gr="react-flow__edgeupdater",yr=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:a})=>V.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:ae([gr,`${gr}-${a}`]),cx:Gd(t,o,e),cy:jd(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),qd=()=>!0;var rt=e=>{const t=({id:n,className:o,type:r,data:s,onClick:i,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:p,style:b,source:g,target:v,sourceX:A,sourceY:y,targetX:C,targetY:I,sourcePosition:M,targetPosition:w,elementsSelectable:D,hidden:$,sourceHandleId:T,targetHandleId:F,onContextMenu:L,onMouseEnter:f,onMouseMove:S,onMouseLeave:N,reconnectRadius:R,onReconnect:O,onReconnectStart:E,onReconnectEnd:k,markerEnd:z,markerStart:U,rfId:P,ariaLabel:Y,isFocusable:X,isReconnectable:G,pathOptions:q,interactionWidth:K,disableKeyboardA11y:ee})=>{const Z=_.useRef(null),[me,ue]=_.useState(!1),[he,de]=_.useState(!1),ne=oe(),Ne=_.useMemo(()=>`url('#${Jn(U,P)}')`,[U,P]),J=_.useMemo(()=>`url('#${Jn(z,P)}')`,[z,P]);if($)return null;const B=re=>{var we;const{edges:pe,addSelectedEdges:Ue,unselectNodesAndEdges:He,multiSelectionActive:Pe}=ne.getState(),_e=pe.find(xt=>xt.id===n);_e&&(D&&(ne.setState({nodesSelectionActive:!1}),_e.selected&&Pe?(He({nodes:[],edges:[_e]}),(we=Z.current)==null||we.blur()):Ue([n])),i&&i(re,_e))},ce=Et(n,ne.getState,a),Fe=Et(n,ne.getState,L),gt=Et(n,ne.getState,f),Ke=Et(n,ne.getState,S),Ze=Et(n,ne.getState,N),ve=(re,pe)=>{if(re.button!==0)return;const{edges:Ue,isValidConnection:He}=ne.getState(),Pe=pe?v:g,_e=(pe?F:T)||null,we=pe?"target":"source",xt=He||qd,bn=pe,Nt=Ue.find(Ye=>Ye.id===n);de(!0),E==null||E(re,Nt,we);const En=Ye=>{de(!1),k==null||k(Ye,Nt,we)};xs({event:re,handleId:_e,nodeId:Pe,onConnect:Ye=>O==null?void 0:O(Nt,Ye),isTarget:bn,getState:ne.getState,setState:ne.setState,isValidConnection:xt,edgeUpdaterType:we,onReconnectEnd:En})},Je=re=>ve(re,!0),Oe=re=>ve(re,!1),ze=()=>ue(!0),Qe=()=>ue(!1),et=!D&&!i,yt=re=>{var pe;if(!ee&&ss.includes(re.key)&&D){const{unselectNodesAndEdges:Ue,addSelectedEdges:He,edges:Pe}=ne.getState();re.key==="Escape"?((pe=Z.current)==null||pe.blur(),Ue({edges:[Pe.find(we=>we.id===n)]})):He([n])}};return V.createElement("g",{className:ae(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:c,animated:u,inactive:et,updating:me}]),onClick:B,onDoubleClick:ce,onContextMenu:Fe,onMouseEnter:gt,onMouseMove:Ke,onMouseLeave:Ze,onKeyDown:X?yt:void 0,tabIndex:X?0:void 0,role:X?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Y===null?void 0:Y||`Edge from ${g} to ${v}`,"aria-describedby":X?`${Ds}-${P}`:void 0,ref:Z},!he&&V.createElement(e,{id:n,source:g,target:v,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:m,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:p,data:s,style:b,sourceX:A,sourceY:y,targetX:C,targetY:I,sourcePosition:M,targetPosition:w,sourceHandleId:T,targetHandleId:F,markerStart:Ne,markerEnd:J,pathOptions:q,interactionWidth:K}),G&&V.createElement(V.Fragment,null,(G==="source"||G===!0)&&V.createElement(yr,{position:M,centerX:A,centerY:y,radius:R,onMouseDown:Je,onMouseEnter:ze,onMouseOut:Qe,type:"source"}),(G==="target"||G===!0)&&V.createElement(yr,{position:w,centerX:C,centerY:I,radius:R,onMouseDown:Oe,onMouseEnter:ze,onMouseOut:Qe,type:"target"})))};return t.displayName="EdgeWrapper",_.memo(t)};function Kd(e){const t={default:rt(e.default||mn),straight:rt(e.bezier||po),step:rt(e.step||ho),smoothstep:rt(e.step||Nn),simplebezier:rt(e.simplebezier||mo)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=rt(e[s]||mn),r),n);return{...t,...o}}function xr(e,t,n=null){const o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case W.Top:return{x:o+s/2,y:r};case W.Right:return{x:o+s,y:r+i/2};case W.Bottom:return{x:o+s/2,y:r+i};case W.Left:return{x:o,y:r+i/2}}}function Nr(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Zd=(e,t,n,o,r,s)=>{const i=xr(n,e,t),a=xr(s,o,r);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function Jd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:s,width:i,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=fo({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:a/c[2]}),d=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),m=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(d*m)>0}function wr(e){var o,r,s,i,a;const t=((o=e==null?void 0:e[te])==null?void 0:o.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Qd=[{level:0,isMaxLevel:!0,edges:[]}];function ef(e,t,n=!1){let o=-1;const r=e.reduce((i,a)=>{var l,d;const c=fe(a.zIndex);let u=c?a.zIndex:0;if(n){const m=t.get(a.target),h=t.get(a.source),x=a.selected||(m==null?void 0:m.selected)||(h==null?void 0:h.selected),p=Math.max(((l=h==null?void 0:h[te])==null?void 0:l.z)||0,((d=m==null?void 0:m[te])==null?void 0:d.z)||0,1e3);u=(c?a.zIndex:0)+(x?p:0)}return i[u]?i[u].push(a):i[u]=[a],o=u>o?u:o,i},{}),s=Object.entries(r).map(([i,a])=>{const c=+i;return{edges:a,level:c,isMaxLevel:c===o}});return s.length===0?Qd:s}function tf(e,t,n){const o=Q(_.useCallback(r=>e?r.edges.filter(s=>{const i=t.get(s.source),a=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Jd({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return ef(o,t,n)}const nf=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),of=({color:e="none",strokeWidth:t=1})=>V.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),br={[dn.Arrow]:nf,[dn.ArrowClosed]:of};function rf(e){const t=oe();return _.useMemo(()=>{var r,s;return Object.prototype.hasOwnProperty.call(br,e)?br[e]:((s=(r=t.getState()).onError)==null||s.call(r,"009",Te.error009(e)),null)},[e])}const sf=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const c=rf(t);return c?V.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},V.createElement(c,{color:n,strokeWidth:i})):null},af=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=Jn(i,t);o.includes(a)||(r.push({id:a,color:i.color||e,...i}),o.push(a))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},Us=({defaultColor:e,rfId:t})=>{const n=Q(_.useCallback(af({defaultColor:e,rfId:t}),[e,t]),(o,r)=>!(o.length!==r.length||o.some((s,i)=>s.id!==r[i].id)));return V.createElement("defs",null,n.map(o=>V.createElement(sf,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};Us.displayName="MarkerDefinitions";var cf=_.memo(Us);const lf=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Hs=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:m,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:p,children:b,disableKeyboardA11y:g})=>{const{edgesFocusable:v,edgesUpdatable:A,elementsSelectable:y,width:C,height:I,connectionMode:M,nodeInternals:w,onError:D}=Q(lf,ie),$=tf(t,w,n);return C?V.createElement(V.Fragment,null,$.map(({level:T,edges:F,isMaxLevel:L})=>V.createElement("svg",{key:T,style:{zIndex:T},width:C,height:I,className:"react-flow__edges react-flow__container"},L&&V.createElement(cf,{defaultColor:e,rfId:o}),V.createElement("g",null,F.map(f=>{const[S,N,R]=wr(w.get(f.source)),[O,E,k]=wr(w.get(f.target));if(!R||!k)return null;let z=f.type||"default";r[z]||(D==null||D("011",Te.error011(z)),z="default");const U=r[z]||r.default,P=M===qe.Strict?E.target:(E.target??[]).concat(E.source??[]),Y=Nr(N.source,f.sourceHandle),X=Nr(P,f.targetHandle),G=(Y==null?void 0:Y.position)||W.Bottom,q=(X==null?void 0:X.position)||W.Top,K=!!(f.focusable||v&&typeof f.focusable>"u"),ee=f.reconnectable||f.updatable,Z=typeof m<"u"&&(ee||A&&typeof ee>"u");if(!Y||!X)return D==null||D("008",Te.error008(Y,f)),null;const{sourceX:me,sourceY:ue,targetX:he,targetY:de}=Zd(S,Y,G,O,X,q);return V.createElement(U,{key:f.id,id:f.id,className:ae([f.className,s]),type:z,data:f.data,selected:!!f.selected,animated:!!f.animated,hidden:!!f.hidden,label:f.label,labelStyle:f.labelStyle,labelShowBg:f.labelShowBg,labelBgStyle:f.labelBgStyle,labelBgPadding:f.labelBgPadding,labelBgBorderRadius:f.labelBgBorderRadius,style:f.style,source:f.source,target:f.target,sourceHandleId:f.sourceHandle,targetHandleId:f.targetHandle,markerEnd:f.markerEnd,markerStart:f.markerStart,sourceX:me,sourceY:ue,targetX:he,targetY:de,sourcePosition:G,targetPosition:q,elementsSelectable:y,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:l,onEdgeDoubleClick:d,onReconnect:m,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:p,rfId:o,ariaLabel:f.ariaLabel,isFocusable:K,isReconnectable:Z,pathOptions:"pathOptions"in f?f.pathOptions:void 0,interactionWidth:f.interactionWidth,disableKeyboardA11y:g})})))),b):null};Hs.displayName="EdgeRenderer";var uf=_.memo(Hs);const df=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ff({children:e}){const t=Q(df);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function mf(e){const t=wn(),n=_.useRef(!1);_.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const hf={[W.Left]:W.Right,[W.Right]:W.Left,[W.Top]:W.Bottom,[W.Bottom]:W.Top},Ps=({nodeId:e,handleType:t,style:n,type:o=Re.Bezier,CustomComponent:r,connectionStatus:s})=>{var I,M,w;const{fromNode:i,handleId:a,toX:c,toY:u,connectionMode:l}=Q(_.useCallback(D=>({fromNode:D.nodeInternals.get(e),handleId:D.connectionHandleId,toX:(D.connectionPosition.x-D.transform[0])/D.transform[2],toY:(D.connectionPosition.y-D.transform[1])/D.transform[2],connectionMode:D.connectionMode}),[e]),ie),d=(I=i==null?void 0:i[te])==null?void 0:I.handleBounds;let m=d==null?void 0:d[t];if(l===qe.Loose&&(m=m||(d==null?void 0:d[t==="source"?"target":"source"])),!i||!m)return null;const h=a?m.find(D=>D.id===a):m[0],x=h?h.x+h.width/2:(i.width??0)/2,p=h?h.y+h.height/2:i.height??0,b=(((M=i.positionAbsolute)==null?void 0:M.x)??0)+x,g=(((w=i.positionAbsolute)==null?void 0:w.y)??0)+p,v=h==null?void 0:h.position,A=v?hf[v]:null;if(!v||!A)return null;if(r)return V.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:h,fromX:b,fromY:g,toX:c,toY:u,fromPosition:v,toPosition:A,connectionStatus:s});let y="";const C={sourceX:b,sourceY:g,sourcePosition:v,targetX:c,targetY:u,targetPosition:A};return o===Re.Bezier?[y]=us(C):o===Re.Step?[y]=fn({...C,borderRadius:0}):o===Re.SmoothStep?[y]=fn(C):o===Re.SimpleBezier?[y]=ls(C):y=`M${b},${g} ${c},${u}`,V.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};Ps.displayName="ConnectionLine";const pf=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function gf({containerStyle:e,style:t,type:n,component:o}){const{nodeId:r,handleType:s,nodesConnectable:i,width:a,height:c,connectionStatus:u}=Q(pf,ie);return!(r&&s&&a&&i)?null:V.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement("g",{className:ae(["react-flow__connection",u])},V.createElement(Ps,{nodeId:r,handleType:s,style:t,type:n,CustomComponent:o,connectionStatus:u})))}function Er(e,t){return _.useRef(null),oe(),_.useMemo(()=>t(e),[e])}const Ys=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:h,onSelectionContextMenu:x,onSelectionStart:p,onSelectionEnd:b,connectionLineType:g,connectionLineStyle:v,connectionLineComponent:A,connectionLineContainerStyle:y,selectionKeyCode:C,selectionOnDrag:I,selectionMode:M,multiSelectionKeyCode:w,panActivationKeyCode:D,zoomActivationKeyCode:$,deleteKeyCode:T,onlyRenderVisibleElements:F,elementsSelectable:L,selectNodesOnDrag:f,defaultViewport:S,translateExtent:N,minZoom:R,maxZoom:O,preventScrolling:E,defaultMarkerColor:k,zoomOnScroll:z,zoomOnPinch:U,panOnScroll:P,panOnScrollSpeed:Y,panOnScrollMode:X,zoomOnDoubleClick:G,panOnDrag:q,onPaneClick:K,onPaneMouseEnter:ee,onPaneMouseMove:Z,onPaneMouseLeave:me,onPaneScroll:ue,onPaneContextMenu:he,onEdgeContextMenu:de,onEdgeMouseEnter:ne,onEdgeMouseMove:Ne,onEdgeMouseLeave:J,onReconnect:B,onReconnectStart:ce,onReconnectEnd:Fe,reconnectRadius:gt,noDragClassName:Ke,noWheelClassName:Ze,noPanClassName:ve,elevateEdgesOnSelect:Je,disableKeyboardA11y:Oe,nodeOrigin:ze,nodeExtent:Qe,rfId:et})=>{const yt=Er(e,Yd),re=Er(t,Kd);return mf(s),V.createElement(Hd,{onPaneClick:K,onPaneMouseEnter:ee,onPaneMouseMove:Z,onPaneMouseLeave:me,onPaneContextMenu:he,onPaneScroll:ue,deleteKeyCode:T,selectionKeyCode:C,selectionOnDrag:I,selectionMode:M,onSelectionStart:p,onSelectionEnd:b,multiSelectionKeyCode:w,panActivationKeyCode:D,zoomActivationKeyCode:$,elementsSelectable:L,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:z,zoomOnPinch:U,zoomOnDoubleClick:G,panOnScroll:P,panOnScrollSpeed:Y,panOnScrollMode:X,panOnDrag:q,defaultViewport:S,translateExtent:N,minZoom:R,maxZoom:O,onSelectionContextMenu:x,preventScrolling:E,noDragClassName:Ke,noWheelClassName:Ze,noPanClassName:ve,disableKeyboardA11y:Oe},V.createElement(ff,null,V.createElement(uf,{edgeTypes:re,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:F,onEdgeContextMenu:de,onEdgeMouseEnter:ne,onEdgeMouseMove:Ne,onEdgeMouseLeave:J,onReconnect:B,onReconnectStart:ce,onReconnectEnd:Fe,reconnectRadius:gt,defaultMarkerColor:k,noPanClassName:ve,elevateEdgesOnSelect:!!Je,disableKeyboardA11y:Oe,rfId:et},V.createElement(gf,{style:v,type:g,component:A,containerStyle:y})),V.createElement("div",{className:"react-flow__edgelabel-renderer"}),V.createElement(Xd,{nodeTypes:yt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:h,selectNodesOnDrag:f,onlyRenderVisibleElements:F,noPanClassName:ve,noDragClassName:Ke,disableKeyboardA11y:Oe,nodeOrigin:ze,nodeExtent:Qe,rfId:et})))};Ys.displayName="GraphView";var yf=_.memo(Ys);const no=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Me={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:no,nodeExtent:no,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:qe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Yu,isValidConnection:void 0},xf=()=>la((e,t)=>({...Me,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:s}=t();e({nodeInternals:Vn(n,o,r,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",s=typeof o<"u",i=r?Vn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?o:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c==null?void 0:c.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:m}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((p,b)=>{const g=r.get(b.id);if(g!=null&&g.hidden)r.set(g.id,{...g,[te]:{...g[te],handleBounds:void 0}});else if(g){const v=lo(b.nodeElement);!!(v.width&&v.height&&(g.width!==v.width||g.height!==v.height||b.forceUpdate))&&(r.set(g.id,{...g,[te]:{...g[te],handleBounds:{source:pr(".source",b.nodeElement,m,u),target:pr(".target",b.nodeElement,m,u)}},...v}),p.push({id:g.id,type:"dimensions",dimensions:v}))}return p},[]);Ts(r,u);const x=i||s&&!i&&Ms(t,{initial:!0,...a});e({nodeInternals:new Map(r),fitViewOnInitDone:x}),(h==null?void 0:h.length)>0&&(o==null||o(h))},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(a=>{const c={id:a.id,type:"position",dragging:r};return o&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const u=Ls(n,a()),l=Vn(u,r,i,c);e({nodeInternals:l})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=t();let i,a=null;o?i=n.map(c=>Le(c,!0)):(i=st(s(),n),a=st(r,[])),Kt({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=t();let i,a=null;o?i=n.map(c=>Le(c,!0)):(i=st(r,n),a=st(s(),[])),Kt({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:s}=t(),i=n||s(),a=o||r,c=i.map(l=>(l.selected=!1,Le(l.id,!1))),u=a.map(l=>Le(l.id,!1));Kt({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=t();o==null||o.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=t();o==null||o.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;(o=t().d3Zoom)==null||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),s=o().filter(a=>a.selected).map(a=>Le(a.id,!1)),i=n.filter(a=>a.selected).map(a=>Le(a.id,!1));Kt({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(r=>{r.positionAbsolute=uo(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:s,d3Zoom:i,d3Selection:a,translateExtent:c}=t();if(!i||!a||!n.x&&!n.y)return!1;const u=$e.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),l=[[0,0],[r,s]],d=i==null?void 0:i.constrain()(u,l,c);return i.transform(a,d),o[0]!==d.x||o[1]!==d.y||o[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Me.connectionNodeId,connectionHandleId:Me.connectionHandleId,connectionHandleType:Me.connectionHandleType,connectionStatus:Me.connectionStatus,connectionStartHandle:Me.connectionStartHandle,connectionEndHandle:Me.connectionEndHandle}),reset:()=>e({...Me})}),Object.is),Ws=({children:e})=>{const t=_.useRef(null);return t.current||(t.current=xf()),V.createElement($u,{value:t.current},e)};Ws.displayName="ReactFlowProvider";const Bs=({children:e})=>_.useContext(xn)?V.createElement(V.Fragment,null,e):V.createElement(Ws,null,e);Bs.displayName="ReactFlowWrapper";const Nf={input:Es,default:eo,output:vs,group:wo},wf={default:mn,straight:po,step:ho,smoothstep:Nn,simplebezier:mo},bf=[0,0],Ef=[15,15],Sf={x:0,y:0,zoom:1},vf={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Xs=_.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:s=Nf,edgeTypes:i=wf,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:d,onMoveEnd:m,onConnect:h,onConnectStart:x,onConnectEnd:p,onClickConnectStart:b,onClickConnectEnd:g,onNodeMouseEnter:v,onNodeMouseMove:A,onNodeMouseLeave:y,onNodeContextMenu:C,onNodeDoubleClick:I,onNodeDragStart:M,onNodeDrag:w,onNodeDragStop:D,onNodesDelete:$,onEdgesDelete:T,onSelectionChange:F,onSelectionDragStart:L,onSelectionDrag:f,onSelectionDragStop:S,onSelectionContextMenu:N,onSelectionStart:R,onSelectionEnd:O,connectionMode:E=qe.Strict,connectionLineType:k=Re.Bezier,connectionLineStyle:z,connectionLineComponent:U,connectionLineContainerStyle:P,deleteKeyCode:Y="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:G=!1,selectionMode:q=Ft.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:ee=un()?"Meta":"Control",zoomActivationKeyCode:Z=un()?"Meta":"Control",snapToGrid:me=!1,snapGrid:ue=Ef,onlyRenderVisibleElements:he=!1,selectNodesOnDrag:de=!0,nodesDraggable:ne,nodesConnectable:Ne,nodesFocusable:J,nodeOrigin:B=bf,edgesFocusable:ce,edgesUpdatable:Fe,elementsSelectable:gt,defaultViewport:Ke=Sf,minZoom:Ze=.5,maxZoom:ve=2,translateExtent:Je=no,preventScrolling:Oe=!0,nodeExtent:ze,defaultMarkerColor:Qe="#b1b1b7",zoomOnScroll:et=!0,zoomOnPinch:yt=!0,panOnScroll:re=!1,panOnScrollSpeed:pe=.5,panOnScrollMode:Ue=Xe.Free,zoomOnDoubleClick:He=!0,panOnDrag:Pe=!0,onPaneClick:_e,onPaneMouseEnter:we,onPaneMouseMove:xt,onPaneMouseLeave:bn,onPaneScroll:Nt,onPaneContextMenu:En,children:Eo,onEdgeContextMenu:Ye,onEdgeDoubleClick:js,onEdgeMouseEnter:qs,onEdgeMouseMove:Ks,onEdgeMouseLeave:Zs,onEdgeUpdate:Js,onEdgeUpdateStart:Qs,onEdgeUpdateEnd:ei,onReconnect:ti,onReconnectStart:ni,onReconnectEnd:oi,reconnectRadius:ri=10,edgeUpdaterRadius:si=10,onNodesChange:ii,onEdgesChange:ai,noDragClassName:ci="nodrag",noWheelClassName:li="nowheel",noPanClassName:So="nopan",fitView:ui=!1,fitViewOptions:di,connectOnClick:fi=!0,attributionPosition:mi,proOptions:hi,defaultEdgeOptions:pi,elevateNodesOnSelect:gi=!0,elevateEdgesOnSelect:yi=!1,disableKeyboardA11y:vo=!1,autoPanOnConnect:xi=!0,autoPanOnNodeDrag:Ni=!0,connectionRadius:wi=20,isValidConnection:bi,onError:Ei,style:Si,id:_o,nodeDragThreshold:vi,..._i},Ai)=>{const Sn=_o||"1";return V.createElement("div",{..._i,style:{...Si,...vf},ref:Ai,className:ae(["react-flow",r]),"data-testid":"rf__wrapper",id:_o},V.createElement(Bs,null,V.createElement(yf,{onInit:u,onMove:l,onMoveStart:d,onMoveEnd:m,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:A,onNodeMouseLeave:y,onNodeContextMenu:C,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:i,connectionLineType:k,connectionLineStyle:z,connectionLineComponent:U,connectionLineContainerStyle:P,selectionKeyCode:X,selectionOnDrag:G,selectionMode:q,deleteKeyCode:Y,multiSelectionKeyCode:ee,panActivationKeyCode:K,zoomActivationKeyCode:Z,onlyRenderVisibleElements:he,selectNodesOnDrag:de,defaultViewport:Ke,translateExtent:Je,minZoom:Ze,maxZoom:ve,preventScrolling:Oe,zoomOnScroll:et,zoomOnPinch:yt,zoomOnDoubleClick:He,panOnScroll:re,panOnScrollSpeed:pe,panOnScrollMode:Ue,panOnDrag:Pe,onPaneClick:_e,onPaneMouseEnter:we,onPaneMouseMove:xt,onPaneMouseLeave:bn,onPaneScroll:Nt,onPaneContextMenu:En,onSelectionContextMenu:N,onSelectionStart:R,onSelectionEnd:O,onEdgeContextMenu:Ye,onEdgeDoubleClick:js,onEdgeMouseEnter:qs,onEdgeMouseMove:Ks,onEdgeMouseLeave:Zs,onReconnect:ti??Js,onReconnectStart:ni??Qs,onReconnectEnd:oi??ei,reconnectRadius:ri??si,defaultMarkerColor:Qe,noDragClassName:ci,noWheelClassName:li,noPanClassName:So,elevateEdgesOnSelect:yi,rfId:Sn,disableKeyboardA11y:vo,nodeOrigin:B,nodeExtent:ze}),V.createElement(md,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:x,onConnectEnd:p,onClickConnectStart:b,onClickConnectEnd:g,nodesDraggable:ne,nodesConnectable:Ne,nodesFocusable:J,edgesFocusable:ce,edgesUpdatable:Fe,elementsSelectable:gt,elevateNodesOnSelect:gi,minZoom:Ze,maxZoom:ve,nodeExtent:ze,onNodesChange:ii,onEdgesChange:ai,snapToGrid:me,snapGrid:ue,connectionMode:E,translateExtent:Je,connectOnClick:fi,defaultEdgeOptions:pi,fitView:ui,fitViewOptions:di,onNodesDelete:$,onEdgesDelete:T,onNodeDragStart:M,onNodeDrag:w,onNodeDragStop:D,onSelectionDrag:f,onSelectionDragStart:L,onSelectionDragStop:S,noPanClassName:So,nodeOrigin:B,rfId:Sn,autoPanOnConnect:xi,autoPanOnNodeDrag:Ni,onError:Ei,connectionRadius:wi,isValidConnection:bi,nodeDragThreshold:vi}),V.createElement(dd,{onSelectionChange:F}),Eo,V.createElement(Fu,{proOptions:hi,position:mi}),V.createElement(xd,{rfId:Sn,disableKeyboardA11y:vo})))});Xs.displayName="ReactFlow";const _f=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function Af({children:e}){const t=Q(_f);return t?Ci.createPortal(e,t):null}function Df(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}function Cf(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Tf(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Mf(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function If(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Lf(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Mt=({children:e,className:t,...n})=>V.createElement("button",{type:"button",className:ae(["react-flow__controls-button",t]),...n},e);Mt.displayName="ControlButton";const Rf=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Gs=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:c,className:u,children:l,position:d="bottom-left"})=>{const m=oe(),[h,x]=_.useState(!1),{isInteractive:p,minZoomReached:b,maxZoomReached:g}=Q(Rf,Df),{zoomIn:v,zoomOut:A,fitView:y}=wn();if(_.useEffect(()=>{x(!0)},[]),!h)return null;const C=()=>{v(),s==null||s()},I=()=>{A(),i==null||i()},M=()=>{y(r),a==null||a()},w=()=>{m.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),c==null||c(!p)};return V.createElement(ns,{className:ae(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&V.createElement(V.Fragment,null,V.createElement(Mt,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},V.createElement(Cf,null)),V.createElement(Mt,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},V.createElement(Tf,null))),n&&V.createElement(Mt,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view"},V.createElement(Mf,null)),o&&V.createElement(Mt,{className:"react-flow__controls-interactive",onClick:w,title:"toggle interactivity","aria-label":"toggle interactivity"},p?V.createElement(Lf,null):V.createElement(If,null)),l)};Gs.displayName="Controls";var Vf=_.memo(Gs);const Pt=Li((e,t)=>({nodes:[],edges:[],customStagesList:[],onNodesChange:n=>{e({nodes:Ls(n,t().nodes)})},onEdgesChange:n=>{e({edges:Ld(n,t().edges)})},onConnect:n=>{e({edges:fs(n,t().edges)})},setNodes:n=>{e({nodes:n})},setEdges:n=>{e({edges:n})},addNode(n){e({nodes:[...t().nodes,n]})},addMultipleNode(n){e({nodes:[...t().nodes,...n]})},addMultipleEdges(n){e({edges:[...t().edges,...n]})},updateNode(n,o){e({nodes:t().nodes.map(r=>r.id===n?{...o}:r)})},updateLabel(n,o){e({nodes:t().nodes.map(r=>r.id===n?{...r,data:{...r.data,stageLabel:o}}:r)})},updateNodeData(n,o){const r=t().customStagesList.find(s=>s.id===n);r!=null&&r.id?e({nodes:t().nodes.map(s=>s.id===n||s.data.duplicateId===n?{...s,data:{...s.data,...o}}:s),customStagesList:t().customStagesList.map(s=>s.duplicateId===n?{...s,name:o.stageLabel}:s)}):e({nodes:t().nodes.map(s=>s.id===n?{...s,data:{...s.data,...o}}:s),customStagesList:[...t().customStagesList,{id:n,stageId:o.stageId,duplicateId:n,name:o.stageLabel,type:"default",icon:H.jsxDEV(nn,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/NodeStore.tsx",lineNumber:154,columnNumber:27},this)}]})},removeNode(n){e({nodes:t().nodes.filter(o=>o.id!==n)})},setCustomStages:n=>{e({customStagesList:n})},addCustomStage(n){const o=t().customStagesList.find(r=>r.id===n.id);o!=null&&o.id?e({customStagesList:t().customStagesList.map(r=>r.id===n.id?{...n}:r)}):e({customStagesList:[...t().customStagesList,n]})},addMultipleCustomStage(n){e({customStagesList:[...t().customStagesList,...n]})},updateCustomStage(n,o){e({customStagesList:t().customStagesList.map(r=>r.id===n?{...o}:r)})},removeCustomStage(n){e({customStagesList:t().customStagesList.filter(o=>o.id!==n)})}})),$f=e=>({customStagesList:e.customStagesList}),kf=({saveFlow:e})=>{const t=(o,r,s)=>{o.dataTransfer.setData("application/reactflow",r),o.dataTransfer.setData("isCustomStage",s),o.dataTransfer.effectAllowed="move"},{customStagesList:n}=Pt($f,zt);return H.jsxDEV("aside",{className:"",children:H.jsxDEV("div",{className:"py-2",children:[H.jsxDEV("div",{className:"",children:H.jsxDEV(It,{onClick:e,variant:"outlined",color:"secondary",children:"Save"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/Sidebar.tsx",lineNumber:27,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/Sidebar.tsx",lineNumber:26,columnNumber:17},void 0),ut.map(o=>H.jsxDEV(Ao,{className:"cursor-pointer w-100 mt-5",color:`${o.type==="default"?"primary":o.type==="input"?"success":"error"}`,variant:"outlined",onDragStart:r=>t(r,`${o.stageId}`,0),draggable:!0,label:o.name,icon:o.icon,sx:{paddingLeft:"20px",justifyContent:"flex-start"}},`${o.stageId+o.name}`,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/Sidebar.tsx",lineNumber:33,columnNumber:29},void 0)),H.jsxDEV("div",{className:"mt-3",children:n.map(o=>H.jsxDEV(Ao,{className:"cursor-pointer w-100 mt-5",color:`${o.type==="default"?"warning":o.type==="input"?"success":"error"}`,variant:"outlined",onDragStart:r=>t(r,`${o.id}`,1),draggable:!0,label:o.name,icon:o.icon,sx:{paddingLeft:"20px",justifyContent:"flex-start"}},`${o.id+o.name}`,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/Sidebar.tsx",lineNumber:41,columnNumber:33},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/Sidebar.tsx",lineNumber:37,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/Sidebar.tsx",lineNumber:25,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/Sidebar.tsx",lineNumber:23,columnNumber:9},void 0)},Ff=e=>({nodes:e.nodes,updateLabel:e.updateLabel,updateNodeData:e.updateNodeData,removeNode:e.removeNode,addCustomStage:e.addCustomStage}),Of=[{value:"BMS_InternalSubmission",name:"Internal Submission",clientName:"bms"},{value:"BMS_ClientSubmission",name:"Client Submission",clientName:"bms"},{value:"BMS_Interview",name:"Interview",clientName:"bms"},{value:"BMS_Assignment",name:"Assignment",clientName:"bms"},{value:"AGILEONE_InternalSubmission",name:"Internal Submission",clientName:"agileoneaxalta"}],zf=({open:e,closePopup:t,nodeData:n})=>{const{updateNodeData:o,nodes:r}=Pt(Ff,zt),[s,i]=_.useState(n.stageLabel),[a,c]=_.useState(!1),[u,l]=_.useState([]),[d,m]=_.useState(""),h=()=>{let M=r.find(w=>w.id!==n.id&&w.data.stageLabel===s&&w.data.duplicateId==="");M&&M.id?At("Name already exists","error"):(o(n.id,{stageLabel:s,formJsonData:C,isFormEnabled:p,stageId:n.stageId,isCustomForm:a,customFormId:d}),t(!1))},x=_.useCallback(M=>{i(M.currentTarget.value)},[]),[p,b]=_.useState(n.isFormEnabled),g=M=>{b(M.target.checked)},v=()=>{},A=M=>{},y=M=>{M.target.checked&&b(!1),c(M.target.checked)},[C,I]=_.useContext(Ti);return _.useEffect(()=>(l(Of.filter(M=>M.clientName===_t.getvalue("clientName"))),I(n.formJsonData),()=>{I([])}),[]),_.useEffect(()=>{n.isCustomForm&&c(n.isCustomForm),n.customFormId&&m(n.customFormId)},[n]),H.jsxDEV(vr,{maxWidth:"sm",fullWidth:!0,open:e,id:"NodeModal",children:[H.jsxDEV(Ar,{className:"py-2",children:H.jsxDEV(Ve,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[H.jsxDEV("span",{className:"addHeader",children:n.stageName},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:136,columnNumber:17},void 0),H.jsxDEV("div",{children:H.jsxDEV(Ve,{container:!0,direction:"row",justifyContent:"end",alignItems:"center",children:[H.jsxDEV(It,{variant:"outlined",type:"button",color:"secondary",className:"mr-2",onClick:()=>t(!1),children:"Cancel"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:146,columnNumber:25},void 0),H.jsxDEV(It,{variant:"contained",type:"button",color:"primary",onClick:h,children:"Update"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:152,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:140,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:139,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:130,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:127,columnNumber:9},void 0),H.jsxDEV(_r,{className:"py-5 my-5",sx:{height:"calc(100vh - 60px)"},children:H.jsxDEV(Ve,{children:[H.jsxDEV("label",{className:"input-label",children:"Label Name"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:165,columnNumber:17},void 0),H.jsxDEV(Oi,{size:"small",fullWidth:!0,id:"text",name:"text",onChange:x,value:s},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:166,columnNumber:17},void 0),H.jsxDEV(zn,{control:H.jsxDEV(Do,{checked:p,onChange:g,inputProps:{"aria-label":"controlled"},disabled:a},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:168,columnNumber:21},void 0),label:"Enable Form Builder",className:"my-3"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:167,columnNumber:17},void 0),H.jsxDEV(zn,{control:H.jsxDEV(Do,{checked:a,onChange:M=>y(M),inputProps:{"aria-label":"controlled"}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:179,columnNumber:25},void 0),label:"Custom Form",className:"my-3"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:178,columnNumber:21},void 0),a&&H.jsxDEV(Ui,{fullWidth:!0,className:"mb-2",children:[H.jsxDEV("label",{className:"input-label mb-0",children:"Select Form"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:191,columnNumber:25},void 0),H.jsxDEV(Hi,{id:"BMS-form",size:"small",value:d,onChange:M=>m(M.target.value),children:u.map(M=>H.jsxDEV(Un,{value:M.value,children:M.name},M.value,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:200,columnNumber:44},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:192,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:190,columnNumber:21},void 0),p?H.jsxDEV(Fi,{callParentSave:A,cancelClicked:v,formIdPassed:"",formNamePassed:s,isFormBuilder:!1,showCancel:!1,showSave:!1,generateDataKey:!0},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:211,columnNumber:25},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:164,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:161,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/NodeModal/NodeModal.tsx",lineNumber:124,columnNumber:12},void 0)},Uf=e=>({nodes:e.nodes,edges:e.edges,addMultipleNode:e.addMultipleNode,addMultipleEdges:e.addMultipleEdges}),Hf=({open:e,closePopup:t,nodeData:n})=>{const{nodes:o,addMultipleNode:r,addMultipleEdges:s}=Pt(Uf,zt),[i,a]=_.useState({id:"",position:{x:screen.width/2-200,y:70},data:{}}),[c,u]=_.useState({10:!1,100:!1,200:!1,300:!1,400:!1,500:!1,600:!1,700:!1,800:!1,900:!1}),l=()=>{const m=Object.keys(c).filter(v=>c[v]===!0);let h=[],x=[],p=i.position.x-Math.floor(m.length/2)*350;const b=o.map(v=>v.data.autoId);let g=Math.max.apply(Math,b);g%1e3===0?g=g+1e3:g=Math.ceil(g/1e3)*1e3;for(let v=0;v<m.length;v++){let A=ut.find(y=>""+y.id==""+m[v]);if(A&&A.name){const y=A.type;let C=Hn();const I={id:C,type:y,sourcePosition:W.Right,targetPosition:W.Left,position:{x:p,y:215*(Math.floor(g/1e3)-1)},data:{stageId:`${A.id}`,id:`${C}`,stageName:`${A.name}`,stageLabel:`${A.name}`,isFormEnabled:!1,formJsonData:[],nextStagesList:[],type:y,autoId:g},dragHandle:".customDragHandle"};p+=350,g++,h.push(I);let M=Hn();const w={id:"reactflow__edge-"+n.id+M+"-"+C,source:n.id,sourceHandle:M,target:C,targetHandle:null,type:"buttonedge"};x.push(w)}}r(h),s(x),t(!1)};_.useEffect(()=>{let m=o.find(h=>{var x;return((x=h.data)==null?void 0:x.id)===n.id});m!=null&&m.id&&a(m)},[]);const d=(m,h)=>{u({...c,[h]:m.target.checked})};return H.jsxDEV(vr,{maxWidth:"sm",fullWidth:!0,open:e,id:"AddNodeModal",children:[H.jsxDEV(Ar,{className:"py-2",children:H.jsxDEV(Ve,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[H.jsxDEV("span",{className:"addHeader",children:n.stageName},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:171,columnNumber:17},void 0),H.jsxDEV("div",{children:H.jsxDEV(Ve,{container:!0,direction:"row",justifyContent:"end",alignItems:"center",children:[H.jsxDEV(It,{variant:"outlined",type:"button",color:"secondary",className:"mr-2",onClick:()=>t(!1),children:"Cancel"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:181,columnNumber:25},void 0),H.jsxDEV(It,{variant:"contained",type:"button",color:"primary",onClick:l,children:"Add Selected"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:187,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:175,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:174,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:165,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:162,columnNumber:9},void 0),H.jsxDEV(_r,{className:"py-5 my-5",sx:{},children:H.jsxDEV(Ve,{container:!0,children:ut.map(m=>H.jsxDEV(Ve,{sm:6,className:"mb-2",children:H.jsxDEV(zn,{control:H.jsxDEV(zi,{checked:!!c[m.id],onChange:h=>d(h,m.id),name:m.id},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:206,columnNumber:37},void 0),label:m.name},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:203,columnNumber:29},void 0)},m.id,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:202,columnNumber:32},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:199,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:196,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/AddNodeModal/AddNodeModal.tsx",lineNumber:159,columnNumber:12},void 0)},Pf=e=>({removeNode:e.removeNode}),On=({data:e,isConnectable:t})=>{var h,x;const{removeNode:n}=Pt(Pf,zt),[o,r]=_.useState(!1),[s,i]=_.useState(!1),[a,c]=_.useState(null),u=!!a,l=p=>{c(p.currentTarget)},d=()=>{c(null)},m=(h=ut.find(p=>p.stageId===e.stageId))!=null&&h.stageId?(x=ut.find(p=>p.stageId===e.stageId))==null?void 0:x.icon:H.jsxDEV(nn,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:56,columnNumber:157},void 0);return H.jsxDEV("div",{id:"CustomNode",className:`${e.customStage?"customStage":""} ${e.hideNode?"d-none":""}`,children:[H.jsxDEV(Yi,{title:e.stageLabel?e.stageLabel:e.stageName,placement:"bottom",children:H.jsxDEV("div",{className:"text-updater-node",children:[e.type==="default"||e.type==="output"?H.jsxDEV(ht,{type:"target",position:W.Left,isConnectable:t},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:66,columnNumber:29},void 0):null,H.jsxDEV(Ve,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",className:"centerNodeGrid",children:[H.jsxDEV("span",{className:"customDragHandle",children:H.jsxDEV(Ri,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:77,columnNumber:60},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:77,columnNumber:25},void 0),H.jsxDEV("span",{className:"nodeIcon",children:m},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:79,columnNumber:25},void 0),H.jsxDEV("span",{className:"nodeName",children:e.stageLabel},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:80,columnNumber:25},void 0),H.jsxDEV(Mi,{id:"node-menu-button","aria-controls":u?"node-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:l,className:`${e.stageLabel==="Trigger"?"d-none":""}`,children:H.jsxDEV($i,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:90,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:82,columnNumber:25},void 0),H.jsxDEV(Pi,{id:"node-add",anchorEl:a,open:u,onClose:d,MenuListProps:{"aria-labelledby":"node-button"},children:[H.jsxDEV(Un,{onClick:()=>{d(),Ii(`Are you sure you want to remove - ${e.stageLabel}`,()=>n(e.id),"warning")},children:[H.jsxDEV(Co,{children:H.jsxDEV(Vi,{fontSize:"small"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:117,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:116,columnNumber:33},void 0),H.jsxDEV(To,{children:"Delete"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:119,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:112,columnNumber:29},void 0),e.customStage?null:H.jsxDEV(Un,{onClick:()=>{d(),r(!0)},children:[H.jsxDEV(Co,{children:H.jsxDEV(ki,{fontSize:"small"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:130,columnNumber:45},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:129,columnNumber:41},void 0),H.jsxDEV(To,{children:"Edit"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:132,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:125,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:103,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:70,columnNumber:21},void 0),e.type==="input"||e.type==="default"&&!e.customStage?H.jsxDEV(ht,{type:"source",position:W.Right,id:"b",isConnectable:t},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:147,columnNumber:29},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:63,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:62,columnNumber:13},void 0),o&&H.jsxDEV(zf,{open:o,closePopup:()=>{r(!1)},nodeData:e},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:156,columnNumber:21},void 0),s&&H.jsxDEV(Hf,{open:s,closePopup:()=>{i(!1)},nodeData:e},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:165,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomNode/CustomNode.tsx",lineNumber:61,columnNumber:9},void 0)};function Yf({id:e,sourceX:t,sourceY:n,targetX:o,targetY:r,sourcePosition:s,targetPosition:i,style:a={},markerEnd:c}){const{setEdges:u}=wn(),[l,d,m]=fn({sourceX:t,sourceY:n,sourcePosition:s,targetX:o,targetY:r,targetPosition:i}),h=()=>{u(x=>x.filter(p=>p.id!==e))};return H.jsxDEV(H.Fragment,{children:[H.jsxDEV(pt,{path:l,markerEnd:c,style:a},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomEdge/CustomEdge.tsx",lineNumber:40,columnNumber:13},this),H.jsxDEV(Af,{children:H.jsxDEV("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${d}px,${m}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:H.jsxDEV("button",{className:"edgebutton",onClick:h,children:"×"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomEdge/CustomEdge.tsx",lineNumber:53,columnNumber:21},this)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomEdge/CustomEdge.tsx",lineNumber:42,columnNumber:17},this)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomEdge/CustomEdge.tsx",lineNumber:41,columnNumber:13},this)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/CustomEdge/CustomEdge.tsx",lineNumber:39,columnNumber:9},this)}const Wf=e=>({nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,setNodes:e.setNodes,setEdges:e.setEdges,addNode:e.addNode,addMultipleNode:e.addMultipleNode,customStagesList:e.customStagesList,setCustomStages:e.setCustomStages}),Bf={input:On,default:On,output:On},Xf={buttonedge:Yf},Gf=()=>{const{nodes:e,edges:t,onNodesChange:n,onEdgesChange:o,onConnect:r,addNode:s,addMultipleNode:i,setNodes:a,setEdges:c,customStagesList:u,setCustomStages:l}=Pt(Wf,zt),d=_.useRef(!1),m={account:"paid-pro",hideAttribution:!0},h=_.useRef(null),[x,p]=_.useState();_.useEffect(()=>{b()},[]);const b=_.useCallback(Wi.debounce(()=>{vn(Dt.getById("admin","getshortListBar",_t.getvalue("clientId")).then(w=>{var D,$,T,F,L,f,S,N,R,O,E,k,z,U;if((D=w.data.List)!=null&&D.length)if(($=w.data.List[0])!=null&&$.reactflowJSON&&((T=w.data.List[0])!=null&&T.reactflowJSON)&&((L=JSON.parse((F=w.data.List[0])==null?void 0:F.reactflowJSON))!=null&&L.nodes)){let P=(S=JSON.parse((f=w.data.List[0])==null?void 0:f.reactflowJSON))==null?void 0:S.nodes;console.log((R=JSON.parse((N=w.data.List[0])==null?void 0:N.reactflowJSON))==null?void 0:R.nodes),a(P),c((E=JSON.parse((O=w.data.List[0])==null?void 0:O.reactflowJSON))==null?void 0:E.edges);let Y=[...P].filter(G=>Number(G.data.autoId)<6e3);Math.max(...Y.map(G=>G.data.autoId),0);let X=[];for(let G=0;G<P.length;G++)((k=P[G])!=null&&k.data.hideNode||(U=(z=P[G])==null?void 0:z.data)!=null&&U.hasOwnProperty("customStage"))&&X.push({id:P[G].id,stageId:P[G].data.stageId,duplicateId:P[G].id,name:P[G].data.stageLabel,type:"default",icon:H.jsxDEV(nn,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/DragAndDrop.tsx",lineNumber:148,columnNumber:43},void 0)});X.length&&l(X)}else I();else I()}))},600),[]),g=_.useCallback(w=>{w.preventDefault(),w.dataTransfer.dropEffect="move"},[]),v=_.useCallback((w,D)=>{w.preventDefault();const $=w.dataTransfer.getData("application/reactflow"),T=!!Number(w.dataTransfer.getData("isCustomStage"));if(!(typeof $>"u"||!$)){var F=[...ut].find(L=>""+L.stageId==""+$);if(F&&F.name||(F=[...D].find(L=>""+L.id==""+$)),F&&F.name){if(x!=null&&x.screenToFlowPosition){const L=x==null?void 0:x.screenToFlowPosition({x:w.clientX,y:w.clientY}),f=F.type;let S=Hn();const N={id:S,type:f,position:L,data:{duplicateId:F!=null&&F.duplicateId?F.duplicateId:"",customStage:T,stageId:`${F.stageId}`,id:`${S}`,stageName:`${F.name}`,stageLabel:`${F.name}`,isFormEnabled:!1,formJsonData:[],nextStagesList:[],type:f,isCustomForm:!1,customFormId:""},dragHandle:".customDragHandle"};s(N)}}else return}},[x]),A=_.useCallback(w=>{c(w.reduce((D,$)=>{const T=Qu($,e,t),F=Ju($,e,t),L=xo([$],t),f=D.filter(N=>!L.includes(N)),S=T.flatMap(({id:N})=>F.map(({id:R})=>({id:`${N}->${R}`,source:N,target:R})));return[...f,...S]},t))},[e,t]),y=()=>{let w=[...e];w=w.filter($=>!$.data.duplicateId),console.log(w);const D=[...w].filter(($,T)=>w.findIndex(F=>F.data.stageLabel===$.data.stageLabel)!==T);if(console.log(D),D.length)At(`Node Name must be unique. Please update ${D[0].data.stageLabel}`,"error");else{let $=[];for(let L=0;L<w.length;L++)Number(w[L].data.autoId)>900&&(w[L].data.autoId="");let T=1e3;for(let L=0;L<w.length;L++){w[L].data.autoId||(w[L].data.autoId=T,$.push({autoId:T,name:w[L].data.stageLabel}),T=T+1);let f=t.filter(S=>S.source===w[L].id);for(let S=0;S<f.length;S++){let N=w.findIndex(R=>R.id===f[S].target);N!==-1&&(w[N].data.autoId||($.push({autoId:T,name:w[N].data.stageLabel}),w[N].data.autoId=T,T=T+1))}w[L].data.nextStagesList=f.map(S=>S.target)}console.log($);let F=[];for(let L=0;L<w.length;L++)F.push({stageId:Number(w[L].data.stageId),nodeId:w[L].id,statusId:w[L].data.autoId,label:w[L].data.stageLabel,isForm:w[L].data.isFormEnabled});vn(Dt.postWithData("admin","shortlistBarStages",{clientId:_t.getvalue("clientId"),shortlistBarStages:F}).then(L=>{L.data.Success?vn(Dt.postWithData("admin","shortlistbardetails",{reactflowJSON:JSON.stringify({nodes:e,edges:t}),userJSON:JSON.stringify({nodes:w}),createBy:_t.getvalue("recrId"),clientId:_t.getvalue("clientId")}).then(f=>{f.data.Success?(At("Flow saved successfully","success"),M(4295)):At(f.data.Message,"error")})):At(L.data.Message,"error")}))}},C={animated:!1,type:"buttonedge"},I=()=>{const w=[{id:"-1",name:"New",stageTypeButton:!1,hideNode:!0,autoId:-1},{id:"1",name:"View",stageTypeButton:!1,hideNode:!0,autoId:1},{id:"10",name:"Shortlist",stageTypeButton:!0,hideNode:!1,autoId:10},{id:"50",name:"Not Qualified",stageTypeButton:!0,hideNode:!0,autoId:50}];let D=[],$=[];for(let T=0;T<w.length;T++)D.push({id:w[T].id,type:"input",position:{x:70,y:screen.height/2-150},data:{stageId:w[T].id,id:`${w[T].id}`,stageName:w[T].name,stageLabel:w[T].name,isFormEnabled:!1,formJsonData:[],nextStagesList:[],type:"input",autoId:w[T].autoId,hideNode:w[T].hideNode,stageTypeButton:w[T].stageTypeButton},dragHandle:".customDragHandle"}),w[T].hideNode&&$.push({id:w[T].id,stageId:w[T].id,duplicateId:w[T].id,name:w[T].name,type:"default",icon:H.jsxDEV(nn,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/DragAndDrop.tsx",lineNumber:478,columnNumber:27},void 0)});d.current||(i(D),l($)),d.current=!0};_.useEffect(()=>{x!=null&&x.fitView&&e.length>3&&(x==null||x.fitView())},[x]);const M=w=>{Dt.saveAuditLog(w)};return H.jsxDEV("div",{className:"dndflow",children:[H.jsxDEV("div",{className:"reactflow-wrapper",ref:h,children:H.jsxDEV(Xs,{nodes:e,edges:t,onNodesChange:n,onEdgesChange:o,onNodesDelete:A,onConnect:r,onInit:p,onDrop:w=>v(w,u),onDragOver:g,fitView:!1,nodeTypes:Bf,edgeTypes:Xf,defaultEdgeOptions:C,proOptions:m,children:H.jsxDEV(Vf,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/DragAndDrop.tsx",lineNumber:531,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/DragAndDrop.tsx",lineNumber:513,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/DragAndDrop.tsx",lineNumber:512,columnNumber:13},void 0),H.jsxDEV(kf,{saveFlow:y},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/DragAndDrop.tsx",lineNumber:534,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/DragAndDrop/DragAndDrop.tsx",lineNumber:505,columnNumber:9},void 0)},oh=()=>{const e=t=>{Dt.saveAuditLog(t)};return _.useEffect(()=>{e(4294)},[]),H.jsxDEV("div",{id:"AutomationFlow",children:H.jsxDEV(Gf,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/AutomationFlow.tsx",lineNumber:25,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AutomationFlow/AutomationFlow.tsx",lineNumber:21,columnNumber:12},void 0)};export{oh as default};
