import{L as h,r as n,k as e,D as X,I as V,n as ee,o as ae,S as H,U as le,B as W,V as i,W as N,A as m,O as R,T as se,b1 as ie}from"./Cgppv_Sf.js";import{L as te,D as oe,E as re}from"./CtTUZ4Jr.js";import{D as de}from"./DYDlcIIt.js";import{S as ne}from"./8-7dSsDd.js";import{M as ce}from"./D8IKBRq0.js";import{u as ue}from"./C-Jq_Y4P.js";import{c as me,a as C,h as ye,d as he}from"./CRJpcgJc.js";import{A as fe,D as F,l as be}from"./kx4FOAoQ.js";import{E as De}from"./CVtbaTfk.js";import{D as pe}from"./B-98_CNj.js";import{T as Ne,I as ge}from"./BxLAtHuG.js";import{F as Ae,S as Se}from"./XPHitdj4.js";import{M}from"./ChUKxi90.js";import{C as He}from"./CAYZvuI-.js";import{S as xe}from"./DYhLeBIs.js";import{T as P}from"./CagltWra.js";import"./D6SqIoha.js";import"./Bp2g836F.js";import"./BESjHuWm.js";import"./DaGbQO6h.js";import"./6HgfybZm.js";import"./CW6dvan5.js";import"./CB9nuhLI.js";import"./Dho3ZFNS.js";import"./DZd2l5Bl.js";import"./dZX7lgtO.js";import"./DxILc9AR.js";import"./DIGW6AYh.js";import"./BiLTbjOU.js";import"./CAWvjt4G.js";import"./CbCF5Xps.js";import"./BteIfgc7.js";import"./BJCg17MG.js";const Ee=({open:T,handleClose:f,add:u,holidayData:o})=>{let x=h.getvalue("clientId");const[L,b]=n.useState(!1),l=ue({initialValues:o?{holidayName:o?o.holidayName:"",holidayDate:o?o.holidayDate:"",holidayType:o?o.holidayType.toString():"true",holidayId:o?o.holidayId:"",clientId:o?o.clientId:x}:{holidayName:"",holidayDate:"",holidayType:"false",holidayId:"",clientId:x},validationSchema:me().shape({holidayId:C(),holidayName:C().matches(/^[a-zA-Z0-9-_@() ]+$/,"holidayName can only contain letters, numbers, and spaces").required("Holiday name is required"),clientId:C(),holidayDate:ye().required("Holiday Date is required"),holidayType:C().required("Holiday Type is required"),holidayStatus:he()}),enableReinitialize:!0,onSubmit:()=>{b(!0)}}),E=()=>{if(l.values.holidayName.trim()==="")return i("Please Enter Holiday Name","error"),!1;if(l.values.holidayDate.trim()==="")return i("Please enter Holiday Date","error"),!1;if(l.values.holidayType==="")return i("Please select Holiday Type","error"),!1;b(!0);let t={holidayDate:l.values.holidayDate,holidayName:l.values.holidayName,holidayType:l.values.holidayType.toString()==="true",clientId:h.getvalue("clientId")};l.isValid?N(m.postWithData("admin","saveHolidays",t).then(y=>{y.data.Success?(i("Holiday has been saved successfully.","success"),l.resetForm(),f(!0)):i(y.data.Message?y.data.Message:"An error occured","error")})):l.errors.holidayName||i("Please fill all fields.","error")},g=()=>{if(l.values.holidayName.trim()==="")return i("Please Enter Holiday Name","error"),!1;if(l.values.holidayDate.trim()==="")return i("Please enter Holiday Date","error"),!1;if(l.values.holidayType==="")return i("Please select Holiday Type","error"),!1;b(!0),l.isValid?N(m.postWithData("admin","updateHolidays",{...l.values}).then(t=>{t.data.Success?(i("Holiday has been updated successfully.","success"),l.resetForm(),f(!0)):i(t.data.Message?t.data.Message:"An error occured","error")})):i("Please fill all fields.","error")},D=()=>{f(!1),l.resetForm()},j=t=>{m.saveAuditLog(t)};return e.jsxDEV(X,{open:T,onClose:f,maxWidth:"sm",fullWidth:!0,children:[e.jsxDEV(pe,{children:[u?"Add New":"Update "," Holiday"]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:177,columnNumber:13},void 0),e.jsxDEV(V,{"aria-label":"close",onClick:D,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.grey[500]},children:e.jsxDEV(ee,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:188,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:178,columnNumber:13},void 0),e.jsxDEV(ae,{children:e.jsxDEV("form",{onSubmit:l.handleSubmit,children:e.jsxDEV(H,{spacing:2,children:[e.jsxDEV(H,{children:[e.jsxDEV(Ne,{autoFocus:!0,id:"holidayName",label:"Holidays Name",size:"small",type:"text",fullWidth:!0,required:!0,variant:"outlined",value:l.values.holidayName,onChange:t=>{l.setFieldValue("holidayName",t.target.value)},error:l.touched.holidayName&&!!l.errors.holidayName},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:194,columnNumber:29},void 0),e.jsxDEV(De,{formikObj:l,name:"holidayName",isFormSubmitted:L},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:209,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:193,columnNumber:25},void 0),e.jsxDEV(te,{dateAdapter:fe,children:e.jsxDEV(oe,{label:"Date",value:l.values.holidayDate?F.fromISO(l.values.holidayDate):null,onChange:t=>{l.setFieldValue("holidayDate",t?t.toISODate():"")},slotProps:{textField:{size:"small"}}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:212,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:211,columnNumber:25},void 0),e.jsxDEV(Ae,{size:"small",className:"mt-5",children:[e.jsxDEV(ge,{id:"type-label",children:"Type"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:232,columnNumber:29},void 0),e.jsxDEV(Se,{labelId:"type-label",id:"holidayType",name:"holidayType",label:"Type",value:l.values.holidayType,onChange:t=>{l.setFieldValue("holidayType",t.target.value)},children:[e.jsxDEV(M,{value:"true",children:"Default"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:243,columnNumber:33},void 0),e.jsxDEV(M,{value:"false",children:"Custom"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:244,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:233,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:231,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:192,columnNumber:21},void 0)},o==null?void 0:o.holidayId,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:191,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:190,columnNumber:13},void 0),e.jsxDEV(le,{children:[e.jsxDEV(W,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:D,children:"Cancel"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:251,columnNumber:17},void 0),e.jsxDEV(W,{color:"primary",variant:"contained",size:"small",onClick:()=>{(u?E:g)(),j(4242)},children:[u?"Save":"Update"," Holiday"]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:259,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:250,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/AddHolidays.tsx",lineNumber:175,columnNumber:9},void 0)},ta=()=>{const T=h.checkSettings(130008)===5||h.checkSettings(130008)===6,f=h.checkSettings(130008)===6;let u=h.getvalue("clientId");const[o,x]=n.useState([]),[L,b]=n.useState({holidayId:"",holidayName:"",holidayDate:"",holidayType:"false",clientId:""}),[l,E]=n.useState(!1),[g,D]=n.useState(!1),[j,t]=n.useState(0),[y,w]=n.useState(""),[I,k]=n.useState([]),[A,U]=n.useState({pageIndex:0,pageSize:10}),[z,$]=n.useState([{desc:!0,id:"holidayDate"}]);n.useEffect(()=>{const a=o.filter(s=>{var d;const r=y||"";return(d=s.holidayName)==null?void 0:d.toLowerCase().includes(r.toLowerCase())});k(a),U(s=>({...s,pageIndex:0}))},[y,o]);const B=a=>new Promise((s,r)=>{N(m.getCall("admin",`getHolidaysListbyId/${a}/${u}`).then(d=>{if(d.data.list&&d.data.list[0].holidayId){const c=d.data.list[0];b({holidayId:c.holidayId,holidayName:c.holidayName,holidayDate:c.holidayDate,holidayType:c.holidayType,clientId:h.getvalue("clientId")})}else i("Unable to fetch User Data","error");E(!0),s(d)}).catch(d=>{console.error("Error fetching User details:",d),r(d)}))}),O=a=>{B(a).then(()=>{D(!0)}).catch(s=>{i("Unable to fetch User Data",s)})},q=()=>{b({holidayId:"",holidayName:"",holidayDate:"",holidayType:"false",clientId:""}),D(!0),E(!1),p(4241)},G=a=>{D(!1),a&&v()},v=n.useCallback(be.debounce(()=>{N(m.getCall("admin",`getHolidaysList/${u}`).then(a=>{let s=Array.isArray(a.data.list)?a.data.list:[];s=s.filter(r=>r.holidayType||r.isActive),x(s),t(s.length)}))},400),[u]);n.useEffect(()=>{!g&&v()},[]);const K=(a,s)=>{ie(`Are you sure you want to delete ${s} ?`,()=>{Z(a),p(4244)})},Z=a=>{N(m.deleteById("admin",`deleteHolidays/${a}`,u).then(s=>{s.data.Success?(i("Holiday has been deleted successfully.","success"),v()):i(s.data.Message?s.data.Message:"An error occured while deleting","error")}).catch(s=>{var r,d,c,S;i((d=(r=s.response)==null?void 0:r.data)!=null&&d.Message?(S=(c=s.response)==null?void 0:c.data)==null?void 0:S.Message:"An error occured while deleting","error")}))},_=(a,s)=>{N(m.postWithData("admin","enableDisableHolidays",{clientId:u,isActive:s,holidayId:a}).then(r=>{r.data.Success?(i(`Holiday has been ${s?"Enabled":"Disabled"} successfully.`,"success"),v()):i(r.data.Message?r.data.Message:"An error occured while updating status","error")}).catch(r=>{var d,c,S,Y;i((c=(d=r.response)==null?void 0:d.data)!=null&&c.Message?(Y=(S=r.response)==null?void 0:S.data)==null?void 0:Y.Message:"An error occured while updating status","error")}))},J=n.useMemo(()=>[{accessorKey:"holidayName",header:"Holidays",size:250},{accessorKey:"holidayDate",header:"Date",Cell:({row:a})=>e.jsxDEV("span",{children:a.original.holidayDate?F.fromFormat(a.original.holidayDate.substring(0,19),"yyyy-MM-dd").toFormat("MM/dd/yyyy"):""},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:239,columnNumber:9},void 0),size:250,sortType:"datetime"},{accessorKey:"holidayType",header:"Type",size:200,accessorFn:a=>`${a.holidayType}`,Cell:({row:a})=>e.jsxDEV("div",{children:e.jsxDEV("span",{children:a.original.holidayType===!0?"Default":"Custom"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:253,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:252,columnNumber:9},void 0)},{accessorKey:"Actions",header:"Enabled",enableSorting:!1,Cell:({row:a})=>e.jsxDEV(H,{children:a.original.holidayType===!0?e.jsxDEV(xe,{checked:!!a.original.isActive,onChange:s=>{_(a.original.holidayId,s.target.checked)},inputProps:{"aria-label":"controlled"}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:282,columnNumber:15},void 0):e.jsxDEV(H,{direction:"row",children:[T?e.jsxDEV(P,{title:"Edit",placement:"top",color:"primary",children:e.jsxDEV(V,{onClick:()=>{O(a.original.holidayId),p(4243)},children:e.jsxDEV(re,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:295,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:294,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:293,columnNumber:21},void 0):null,f?e.jsxDEV(P,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(V,{onClick:()=>{K(a.original.holidayId,a.original.holidayName)},children:e.jsxDEV(de,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:305,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:304,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:303,columnNumber:21},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:290,columnNumber:15},void 0)},a.original.holidayId,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:279,columnNumber:9},void 0),size:200}],[]),p=a=>{m.saveAuditLog(a)};n.useEffect(()=>{p(4240)},[]);const Q=a=>{a>A.pageIndex?p(4245):a<A.pageIndex&&p(4246)};return e.jsxDEV("div",{className:"holidays pt-3 px-5",children:[e.jsxDEV(R,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(se,{variant:"h6",className:"headerName",children:"Holidays"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:349,columnNumber:7},void 0),e.jsxDEV(H,{direction:"row",className:"btn-container",children:e.jsxDEV(W,{variant:"contained",color:"primary",size:"small",onClick:q,children:"New Holidays"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:353,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:352,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:340,columnNumber:5},void 0),e.jsxDEV(R,{container:!0,className:"customCard p-0",children:[e.jsxDEV(R,{sx:{width:"calc(100%)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(ce,{columns:J,data:I,state:{sorting:z,pagination:A,globalFilter:y},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","name"]},density:"compact",showGlobalFilter:!0},onSortingChange:$,enableDensityToggle:!1,enableFullScreenToggle:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:U,getRowId:a=>a.holidayId,icons:{ArrowDownwardIcon:a=>e.jsxDEV(ne,{...a},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:383,columnNumber:59},void 0)},rowCount:I.length,muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(He,{page:A.pageIndex,rowsPerPage:10,rowCount:I.length,onChangePage:a=>{U({...A,pageIndex:a,pageSize:10}),Q(a)},showCount:!1},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:396,columnNumber:15},void 0),onGlobalFilterChange:w},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:359,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:358,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:357,columnNumber:7},void 0),g?e.jsxDEV(Ee,{open:g,handleClose:G,add:!l,holidayData:L},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:414,columnNumber:11},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:356,columnNumber:5},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Holidays/Holidays.tsx",lineNumber:339,columnNumber:3},void 0)};export{ta as default};
