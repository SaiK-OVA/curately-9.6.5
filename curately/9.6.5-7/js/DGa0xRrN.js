import{r as l,W as I,A as b,L as n,k as a,O as D,C as Z,B as ee,T as te,V as f}from"./Cgppv_Sf.js";import{E as ae}from"./6HgfybZm.js";import{A as re}from"./CMcHlfne.js";import{u as se}from"./CysGkNnQ.js";import{V as ne}from"./CRJpcgJc.js";import{A as ie}from"./CAWvjt4G.js";import{T as C,C as L,F as le}from"./BxLAtHuG.js";import{C as me}from"./D6SqIoha.js";import{M as oe}from"./ChUKxi90.js";import{D as ce}from"./BiLTbjOU.js";import{A as ue,a as de,b as ve}from"./C7pzRmL5.js";import{F as be}from"./BJCg17MG.js";const Ae=({closeInvitePopup:R})=>{const[v,h]=l.useState([]),[W,V]=l.useState([]),[m,d]=l.useState([]),[T,j]=l.useState("2"),[N,g]=l.useState(""),[U,p]=l.useState(!1),[E,y]=l.useState(""),Y=()=>{I(b.postWithData("admin","getRoleList",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId")}).then(e=>{const t=e.data;t.Success&&V(t.list)}))};l.useEffect(()=>{Y()},[]);const k=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),S=async e=>{try{await se.validate(e),g(""),y(""),z(e)}catch(t){t instanceof ne&&y(t.message||"Invalid email format")}},w=e=>{d(m.filter(t=>t!==e))},$=(e,t)=>{g(t),k(t)?x([t]):x([])},[B,x]=l.useState([]),F=()=>{if(m.length){let e=m.filter((t,r)=>m.indexOf(t)===r);I(b.postWithData("admin","sendInviteEmail",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId"),roleId:T,emailIds:e}).then(t=>{console.log(t.data),t.data.Success?(f("Invitation sent successfully.","success"),R(!0)):f(t.data.Message?t.data.Message:"An error occured while inviting.","error")}))}else f("Please enter emails to Invite","error")},z=e=>{p(!0),b.postWithData("admin","inviteRecrAvailability",{recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId"),email:e}).then(t=>{console.log(t.data),t.data.Success?O(e):f(t.data.Message?t.data.Message:"An error occured while validating the email.","error")})},O=async e=>{try{(await re.validateWorkEmail(e)).data.debounce.free_email==="false"?d([...m,e]):f("Please Enter Work Email.","error")}catch(t){return console.error("Error validating email:",t),!1}p(!1)},[P,A]=l.useState(!1),[_,M]=l.useState(""),G=(e,t)=>{const{checked:r,value:c,name:i}=e.target;d(r?[...m,c]:m.filter(o=>o!==c));const s=v.map(o=>o.email===t.email?{...o,selected:r}:o);h(s);const u=s.every(o=>o.selected);A(u)},H=e=>{const{checked:t,value:r,name:c}=e.target;A(t);let i=m;v.forEach(u=>{t?i.includes(u.email)||i.push(u.email):i=i.filter(o=>o!==u.email)}),d([...i]);const s=v.map(u=>({...u,selected:t}));h(s)};l.useEffect(()=>{q()},[]);const K=e=>{I(b.postWithData("admin","getDomainsRecruiterDetails",{domain:n.getvalue("email").split("@")[1],recrId:n.getvalue("recrId"),clientId:n.getvalue("clientId")}).then(t=>{if(t.data.Success){const r=t.data.domainRecruiterDetails.find(c=>c.domain===n.getvalue("email").split("@")[1]);if(r!=null&&r.domain){let c=[];for(let s=0;s<e.length;s++)c.push({email:e[s].email,id:e[s].recrId,name:e[s].recruiterName,selected:!1});let i=[];for(let s=0;s<r.recruiterDetails.length;s++)r.recruiterDetails[s].recruiterName&&r.recruiterDetails[s].recrId&&!c.some(o=>o.id===r.recruiterDetails[s].recrId)&&!r.recruiterDetails[s].invited&&i.push({name:r.recruiterDetails[s].recruiterName,email:r.recruiterDetails[s].email,id:r.recruiterDetails[s].recrId,selected:!1});h(i),i.length&&(i.length===1?M(`${i[0].name} person from ${n.getvalue("email").split("@")[1]} already using Curately`):M(`${i.length} people from ${n.getvalue("email").split("@")[1]} already using Curately`))}}}))},q=()=>{I(b.getById("admin",`getCredits/${n.getvalue("clientId")}`,n.getvalue("recrId")).then(e=>{console.log(e.data),e.data.Success&&K(e.data.invitedRecruiterDetails||[])}))},[J,Q]=l.useState(!1),X=e=>(t,r)=>{Q(r?e:!1)};return a.jsxDEV("div",{id:"InviteTeamMembers",children:[a.jsxDEV(D,{container:!0,direction:"row",children:[a.jsxDEV(D,{size:7,className:"input-wrapper",children:[a.jsxDEV(ie,{multiple:!0,freeSolo:!0,value:m,onChange:(e,t)=>{if(t.length>m.length){const r=t[t.length-1];S(r)}else d(t)},options:B,inputValue:N,onInputChange:$,renderInput:e=>a.jsxDEV(C,{...e,label:"Add people using their emails",variant:"outlined",error:!!E,helperText:E,onKeyDown:t=>{t.key==="Enter"&&N&&(t.preventDefault(),S(N))}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:365,columnNumber:29},void 0),renderTags:(e,t)=>e.map((r,c)=>a.jsxDEV(me,{variant:"outlined",label:r,...t({index:c}),onDelete:()=>w(r)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:378,columnNumber:29},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:349,columnNumber:21},void 0),U&&a.jsxDEV(Z,{className:"loaderIcon",size:20},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:382,columnNumber:35},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:348,columnNumber:17},void 0),a.jsxDEV(D,{size:3,children:a.jsxDEV(C,{fullWidth:!0,className:"mt-1 ml-1",variant:"outlined",type:"text",size:"small",id:"roleId",name:"roleId",defaultValue:2,value:T,onChange:e=>j(e.target.value),select:!0,children:W.map(e=>a.jsxDEV(oe,{value:e.roleId,children:e.roleName},e.roleId,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:398,columnNumber:40},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:385,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:384,columnNumber:17},void 0),a.jsxDEV(D,{sx:{width:70},children:a.jsxDEV(ee,{color:"primary",variant:"contained",onClick:F,disabled:!m.length,className:"ml-2 my-3",children:"Invite"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:405,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:404,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:347,columnNumber:13},void 0),a.jsxDEV(ce,{className:"my-4"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:408,columnNumber:13},void 0),v.length?a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"fs-14 fw-6",children:"Recommended people for you"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:412,columnNumber:25},void 0),a.jsxDEV(ue,{expanded:J,onChange:X(!0),className:"mt-2",children:[a.jsxDEV(de,{expandIcon:a.jsxDEV(ae,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:415,columnNumber:45},void 0),"aria-controls":"teamListAccordion-content",id:"teamListAccordion-header",children:[a.jsxDEV(L,{checked:P,onChange:H,className:"pt-0",color:"secondary"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:419,columnNumber:33},void 0),a.jsxDEV(te,{children:[" ",_]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:420,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:414,columnNumber:29},void 0),a.jsxDEV(ve,{sx:{overflow:"auto",maxHeight:200},className:"pt-0",children:a.jsxDEV(be,{className:"pl-3",children:v.map(e=>a.jsxDEV(le,{control:a.jsxDEV(L,{checked:e.selected,value:e.email,onChange:t=>G(t,e)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:87},void 0),label:a.jsxDEV(a.Fragment,{children:[a.jsxDEV("span",{className:"fs-14 fw-6 pr-2",children:e.name},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:212},void 0),a.jsxDEV("span",{className:"fs-13",children:e.email},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:268},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:210},void 0)},e.id,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:428,columnNumber:42},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:423,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:422,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:413,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:411,columnNumber:21},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Invite/InviteTeamMembers/InviteTeamMembers.tsx",lineNumber:346,columnNumber:10},void 0)};export{Ae as I};
