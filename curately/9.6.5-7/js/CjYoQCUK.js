import{L as s,r as a,W as I,A as L,V as l,k as e,D as de,I as M,n as oe,o as se,S as y,B as v,U as ne,O as $,T as le,b1 as re}from"./Cgppv_Sf.js";import{D as ce}from"./DYDlcIIt.js";import{V as ue}from"./Dz7xv0gs.js";import{S as me}from"./8-7dSsDd.js";import{M as fe}from"./D8IKBRq0.js";import{L as be}from"./CbbOXEJA.js";import{C as Ae}from"./CAYZvuI-.js";import{l as G}from"./kx4FOAoQ.js";import{u as ge}from"./C-Jq_Y4P.js";import"./CRJpcgJc.js";import{D as Ve}from"./B-98_CNj.js";import{T as pe}from"./BxLAtHuG.js";import{V as De}from"./BywBrP9g.js";import{T as K}from"./CagltWra.js";import{b as he,c as _}from"./CtTUZ4Jr.js";import"./BESjHuWm.js";import"./DYhLeBIs.js";import"./DaGbQO6h.js";import"./6HgfybZm.js";import"./CW6dvan5.js";import"./CB9nuhLI.js";import"./Dho3ZFNS.js";import"./Bp2g836F.js";import"./XPHitdj4.js";import"./DZd2l5Bl.js";import"./ChUKxi90.js";import"./dZX7lgtO.js";import"./DxILc9AR.js";import"./D6SqIoha.js";import"./DIGW6AYh.js";import"./BiLTbjOU.js";import"./CAWvjt4G.js";import"./CbCF5Xps.js";import"./BteIfgc7.js";import"./BJCg17MG.js";const Ne=({open:T,handleClose:V,add:D,videoData:o,onVideoSaveSuccess:R})=>{const U=o?{Cameratagid:o?o.Cameratagid:"",autoId:o?o.autoId:"",clientId:s.getvalue("clientId"),createdDate:o?o.createdDate:"",label:o?o.label:"",recrId:o?o.recrId:"",recrName:o?o.recrName:""}:{Cameratagid:"",autoId:"",createdDate:"",label:"",recrId:"",recrName:"",clientId:s.getvalue("clientId")},c=ge({initialValues:U,onSubmit:()=>{},validateOnMount:!0}),S=()=>{V(!1),c.resetForm()},[x,p]=a.useState(""),[b,E]=a.useState({cameratagId:"",label:""}),[A,h]=a.useState(!1);a.useLayoutEffect(()=>(p(`${window.location.protocol==="https:"?"https://app.curately.ai":"http://52.41.18.83:41088"}/Accuick_API/CameraTagAccountManager.html?recrId=${s.getvalue("recrId")}`),window.addEventListener("message",u),()=>window.removeEventListener("message",u)),[]);const g=a.useRef(null);a.useEffect(()=>{const i=g.current,r=()=>{};return i&&i.addEventListener("load",r),()=>{i&&i.removeEventListener("load",r)}},[x,g]);const u=i=>{if(i.data.addCameraTagVideo){let r={cameratagId:i.data.videoUrl,label:i.data.title,createdBy:s.getvalue("recrId"),clientId:s.getvalue("clientId")};E({cameratagId:i.data.videoUrl,label:i.data.title}),p(""),I(L.postWithData("admin","savevideo",r).then(C=>{console.log(C.data),C.data.Success?(h(!1),V(!1),R(),l("Video added successfully.","success"),p(`${window.location.protocol==="https:"?"https://app.curately.ai":"http://52.41.18.83:41088"}/Accuick_API/CameraTagAccountManager.html?recrId=${s.getvalue("recrId")}`),E({cameratagId:"",label:""})):(h(!0),l(C.data.Message,"error"))}))}},W=()=>{[null,void 0,"",0].includes(b.label)||u({data:{addCameraTagVideo:!0,title:b.label,videoUrl:b.cameratagId,action:""}})},j=()=>{if(c.values.label.trim()==="")return l("Please Enter label name","error"),!1;if(c.values.autoId==="")return l("Please select 'title Type","error"),!1;c.isValid?I(L.postWithData("admin","updateVideo",{...c.values}).then(i=>{var r;(r=i==null?void 0:i.data)!=null&&r.Success?(l("Video has been updated successfully.","success"),c.resetForm(),V(!0)):l(i.data.Message?i.data.Message:"An error occured","error")})):l("Please fill all fields.","error")};return e.jsxDEV(de,{open:T,onClose:V,maxWidth:A?"xs":"md",fullWidth:!0,children:[e.jsxDEV(Ve,{children:[A?"Update Title":D?"Add":"Update"," Video"]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:229,columnNumber:7},void 0),e.jsxDEV(M,{"aria-label":"close",onClick:S,sx:{position:"absolute",right:8,top:8,color:i=>i.palette.grey[500]},children:e.jsxDEV(oe,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:240,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:230,columnNumber:7},void 0),e.jsxDEV(se,{children:e.jsxDEV("div",{id:"AddVideo",className:"p-4",children:[x?e.jsxDEV("iframe",{src:x,ref:g,title:"Recording Video",className:"iframeInApp"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:245,columnNumber:13},void 0):null,A?e.jsxDEV(y,{alignItems:"flex-end",spacing:2,py:1.5,children:[e.jsxDEV(pe,{fullWidth:!0,size:"small",label:"Video Title",placeholder:"Enter video title",name:"add_video",value:b.label,onChange:i=>E({...b,label:i.target.value})},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:255,columnNumber:17},void 0),e.jsxDEV(v,{variant:"contained",onClick:W,children:"Update"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:266,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:254,columnNumber:15},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:243,columnNumber:9},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:242,columnNumber:7},void 0),!D&&e.jsxDEV(ne,{children:[e.jsxDEV(v,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:S,children:"Cancel"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:277,columnNumber:11},void 0),e.jsxDEV(v,{color:"primary",variant:"contained",size:"small",onClick:j,children:"Update Video"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:289,columnNumber:11},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:276,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideo.tsx",lineNumber:228,columnNumber:5},void 0)},it=()=>{s.checkSettings(110005)===5||s.checkSettings(110005),s.checkSettings(110005);let T=s.getvalue("clientId"),V=s.getvalue("recrId");const[D,o]=a.useState([]),[R,U]=a.useState({Cameratagid:"",autoId:"",clientId:"",createdDate:"",label:"",recrId:"",recrName:""}),[c,S]=a.useState(!1),[x,p]=a.useState(""),[b,E]=a.useState({}),[A,h]=a.useState(!1),[g,u]=a.useState({pageIndex:0,pageSize:10}),[W,j]=a.useState(0),[i,r]=a.useState(""),[C,H]=a.useState([{desc:!0,id:"createdDate"}]),[Y,q]=a.useState("myVideos"),N=a.useCallback(G.debounce(()=>{let t={recrId:Y==="myVideos"?s.getvalue("recrId"):0,clientId:s.getvalue("clientId")};I(L.postWithData("admin","getVideoList",t).then(d=>{var m;let n=d.data.videoDetails;console.log(n,"Test..");for(let f=0;f<n.length;f++)((m=n[f].createdDate)==null?void 0:m.length)>19&&(n[f].createdDate=be.ServerEDTToSystem(n[f].createdDate.substring(0,19),"yyyy-MM-dd hh:mm:ss","MM/dd/yyyy hh:mm a"));o(d.data.videoDetails),j(d.data.videoDetails.length)}))},400),[Y]);a.useEffect(()=>{N()},[N]);const P=G.debounce(N,300);a.useEffect(()=>{u(t=>({...t,pageIndex:0}))},[i]);const J=()=>{U({Cameratagid:"",autoId:"",clientId:"",createdDate:"",label:"",recrId:"",recrName:""}),h(!0),S(!1)},Q=t=>{h(!1),t&&N()};a.useEffect(()=>{!A&&P()},[]);const X=(t,d)=>{re(`Are you sure you want to delete ${d} video ?`,()=>{Z(t)})},Z=t=>{I(L.deleteById("admin",`deleteVideo/${t}`,T).then(d=>{d.data.Success?(l("Video has been deleted successfully.","success"),N()):l(d.data.Message?d.data.Message:"An error occured while deleting","error")}).catch(d=>{var n,m,f,B;l((m=(n=d.response)==null?void 0:n.data)!=null&&m.Message?(B=(f=d.response)==null?void 0:f.data)==null?void 0:B.Message:"An error occured while deleting","error")}))},[k,F]=a.useState(!1),[O,z]=a.useState(""),ee=(t,d)=>{z(t),F(!0),p(d)},te=()=>{F(!1),z(""),p("")},ae=a.useMemo(()=>[{accessorKey:"label",header:"Name",enableColumnPinning:!0,size:150},{accessorKey:"recrName",header:"Owner",enableColumnPinning:!0,size:150},{accessorKey:"createdDate",header:"Created On",size:150},{accessorKey:"Actions",header:"Actions",enableSorting:!1,Cell:({row:t})=>{const n=t.original.recrId===V,m=t.original.cameratagId?t.original.cameratagId.startsWith("//")?`https:${t.original.cameratagId}`:t.original.cameratagId:null;return e.jsxDEV(y,{direction:"row",spacing:1,sx:{width:150},children:e.jsxDEV(y,{direction:"row",spacing:2,sx:{width:"100%",justifyContent:"space-between",alignItems:"center"},children:[m&&e.jsxDEV(K,{title:"Open Video",placement:"top",color:"primary",children:e.jsxDEV(M,{onClick:()=>ee(m,t.original.label),children:e.jsxDEV(ue,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:317,columnNumber:45},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:312,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:311,columnNumber:37},void 0),e.jsxDEV(y,{direction:"row",spacing:1,sx:{visibility:n?"visible":"hidden",width:"100%"},children:t.original.recrId===s.getvalue("recrId")&&e.jsxDEV(K,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(M,{onClick:()=>X(t.original.autoId,t.original.label),children:e.jsxDEV(ce,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:349,columnNumber:49},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:341,columnNumber:45},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:340,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:321,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:301,columnNumber:29},void 0)},t.original.autoId,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:295,columnNumber:25},void 0)},size:150}],[]),ie=(t,d)=>{console.log(d),q(d),u(n=>({...n,pageIndex:0}))},w=t=>{L.saveAuditLog(t)};return a.useEffect(()=>{w(4296)},[]),e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",id:"sourceList",children:[e.jsxDEV($,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(le,{variant:"h6",className:"headerName",children:"Videos"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:392,columnNumber:17},void 0),e.jsxDEV(y,{direction:"row",className:"btn-container",children:e.jsxDEV(v,{variant:"contained",color:"primary",size:"small",onClick:J,children:"Add Video"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:396,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:395,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:383,columnNumber:13},void 0),e.jsxDEV($,{sx:{width:"calc(100%)"},children:e.jsxDEV(he,{value:Y,onChange:ie,className:"tableTabs","aria-label":"template tabs",children:[e.jsxDEV(_,{value:"myVideos",label:"My Videos",onClick:()=>w(4255)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:411,columnNumber:21},void 0),e.jsxDEV(_,{value:"allVideos",label:"All Videos",onClick:()=>w(4256)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:412,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:407,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:406,columnNumber:13},void 0),e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(fe,{columns:ae,data:D,state:{rowSelection:b,pagination:g,globalFilter:i},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","recrName"]},density:"compact",showGlobalFilter:!0},muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(Ae,{page:g.pageIndex,rowsPerPage:10,rowCount:W,onChangePage:t=>u({...g,pageIndex:t,pageSize:10}),showCount:!1},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:444,columnNumber:25},void 0),onGlobalFilterChange:r,enableSorting:!0,onSortingChange:H,enableDensityToggle:!1,enableFullScreenToggle:!0,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:u,getRowId:t=>t.autoId,icons:{ArrowDownwardIcon:t=>e.jsxDEV(me,{...t},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:471,columnNumber:29},void 0)},rowCount:D.length},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:416,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:415,columnNumber:13},void 0),O&&k?e.jsxDEV(De,{url:O,open:k,closePopup:()=>te()},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:481,columnNumber:21},void 0):null,A?e.jsxDEV(Ne,{open:A,handleClose:Q,videoData:R,add:!c,onVideoSaveSuccess:P},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:487,columnNumber:17},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/AddVideoList/AddVideoList.tsx",lineNumber:382,columnNumber:9},void 0)};export{it as default};
