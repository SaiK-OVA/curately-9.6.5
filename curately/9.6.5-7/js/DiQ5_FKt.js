import{r as t,al as j,k as e,D as R,O as W,I as U,n as I,o as Y,l as M,S as k,U as F,B as w,L as u,A as d,V as l}from"./Cgppv_Sf.js";import{u as B}from"./C-Jq_Y4P.js";import{c as J,a as $}from"./CRJpcgJc.js";import{S as H,P as z,a as G}from"./kx4FOAoQ.js";import{D as O}from"./B-98_CNj.js";import{T as q}from"./BxLAtHuG.js";import{D as K}from"./BiLTbjOU.js";const ie=({dialogOpen:m,onClose:i,name:Q,toPhone:X,candidateId:h="",contactId:D="",workflowJobCandidateId:f="",contactName:Z,call:_,isBulkSMS:g,jobId:S})=>{t.useState(""),t.useState(!1),t.useState(!1);const{jobId:N}=j(),x=S||N,r=140,p=a=>{const o=a.target.value;a.target.value.length<=r&&s.setFieldValue("desc",o)},b={desc:""},y=J({desc:$().max(r,`Cannot exceed ${r} characters`)}),s=B({initialValues:b,onSubmit:()=>{},validationSchema:y}),P=()=>{if(s.values.desc){const a={clientId:u.getvalue("clientId"),userIds:h,recrId:u.getvalue("recrId"),jobId:x,contId:D,workflowJobCandId:f,body:s.values.desc};d.postWithData("admin","smsSent",a).then(o=>{o.data.Message==="Success"?(s.setFieldValue("desc",""),l("SMS has been sent successfully.","success"),T(4141),i()):l(o.data.Message,"error")})}else l("Please enter SMS to sent","warning")},n=t.useRef(),A=a=>{let o=n.current.selectionStart||0,L=n.current.value.substring(0,o),V=n.current.value.substring(o,n.current.value.length);const c=L+` {{${a}}} `+V;c.length>140?l("SMS body cannot exceed 140 characters.","error"):s.setFieldValue("desc",c),n.current.focus()},v=a=>{a.replace(/\n/g," ").length>140?l("SMS body cannot exceed 140 characters.","error"):s.setFieldValue("desc",a),n.current.focus()},[C,E]=t.useState(!1),T=a=>{d.saveAuditLog(a)};return e.jsxDEV(R,{maxWidth:"sm",fullWidth:!0,open:m,className:"AddJobModal",id:"PhoneDialog",children:[e.jsxDEV(O,{className:"header",children:e.jsxDEV(W,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{className:"addHeader",children:g?"Bulk SMS":"SMS"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:234,columnNumber:21},void 0),e.jsxDEV(U,{"aria-label":"close",onClick:i,className:"closeBtn",children:e.jsxDEV(I,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:243,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:238,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:228,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:227,columnNumber:13},void 0),e.jsxDEV(Y,{sx:{px:0},children:e.jsxDEV(M,{className:"p-5 ",children:[e.jsxDEV(q,{color:"error",className:"typeCall mt-2",multiline:!0,rows:4,inputRef:n,placeholder:"Type SMS",value:s.values.desc,onChange:p,name:"desc",margin:"dense",id:"desc",type:"text",size:"small",fullWidth:!0},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:251,columnNumber:21},void 0),e.jsxDEV(k,{direction:"row",justifyContent:"space-around",alignItems:"flex-end",spacing:1,children:e.jsxDEV("div",{style:{marginLeft:"428px"},children:[s.values.desc.length," of ",r," characters"]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:286,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:271,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:250,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:247,columnNumber:13},void 0),e.jsxDEV(K,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:296,columnNumber:13},void 0),e.jsxDEV(F,{children:[e.jsxDEV(H,{insertSMSTemp:v,loadTemplates:C},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:298,columnNumber:17},void 0),e.jsxDEV(z,{onInsertField:A},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:299,columnNumber:17},void 0),e.jsxDEV(G,{message:s.values.desc,templateAdded:()=>E(a=>!a)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:300,columnNumber:17},void 0),e.jsxDEV(w,{variant:"contained",color:"primary",onClick:()=>{P()},children:"Send SMS"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:302,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:297,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/shared/PhoneDialog/PhoneDialog.tsx",lineNumber:221,columnNumber:9},void 0)};export{ie as P};
