import{L as d,r as n,W as g,A as m,k as e,D as re,I as j,n as se,o as te,S as T,U as oe,B as Y,V as u,O as V,T as ae,b1 as ne}from"./Cgppv_Sf.js";import{E as ce}from"./CtTUZ4Jr.js";import{D as ue}from"./DYDlcIIt.js";import{S as ie}from"./8-7dSsDd.js";import{M as le}from"./D8IKBRq0.js";import{u as de}from"./C-Jq_Y4P.js";import{c as me,a as A}from"./CRJpcgJc.js";import{E as k}from"./CVtbaTfk.js";import{l as w}from"./kx4FOAoQ.js";import{D as Se}from"./B-98_CNj.js";import{T as z,I as fe}from"./BxLAtHuG.js";import{F as pe,S as be}from"./XPHitdj4.js";import{M as De}from"./ChUKxi90.js";import{L as ye}from"./CbbOXEJA.js";import{C as Ne}from"./CAYZvuI-.js";import{T as $}from"./CagltWra.js";import"./D6SqIoha.js";import"./Bp2g836F.js";import"./BESjHuWm.js";import"./DYhLeBIs.js";import"./DaGbQO6h.js";import"./6HgfybZm.js";import"./CW6dvan5.js";import"./CB9nuhLI.js";import"./Dho3ZFNS.js";import"./DZd2l5Bl.js";import"./dZX7lgtO.js";import"./DxILc9AR.js";import"./DIGW6AYh.js";import"./BiLTbjOU.js";import"./CAWvjt4G.js";import"./CbCF5Xps.js";import"./BteIfgc7.js";import"./BJCg17MG.js";const ge=({open:v,handleClose:p,add:b,sourceData:c})=>{let I=d.getvalue("clientId");const[E,D]=n.useState(!1),[x,C]=n.useState([]),L=c?{sourceId:c?c.sourceId:"",sourceName:c?c.sourceName:"",description:c?c.description:"",sourceTypeId:c?c.sourceTypeId.toString():"",clientId:d.getvalue("clientId")}:{sourceName:"",description:"",sourceTypeId:"",sourceId:"",clientId:d.getvalue("clientId")},M=me().shape({sourceName:A().matches(/^[a-zA-Z0-9-_@() ]+$/,"Source name can only contain letters, numbers, and spaces").required("Source name is required"),description:A(),sourceTypeId:A().required("Source Type is required"),sourceId:A(),clientId:A()}),s=de({initialValues:L,validationSchema:M,onSubmit:()=>{D(!0)},validateOnMount:!0}),h=()=>{if(s.values.sourceName.trim()==="")return u("Please Enter Source name","error"),!1;if(s.values.sourceTypeId.trim()==="")return u("Please select 'Source Type","error"),!1;D(!0),s.isValid?g(m.postWithData("admin","saveSource",{...s.values}).then(t=>{t.data.Success?(u("Source has been saved successfully.","success"),s.resetForm(),p(!0)):u(t.data.Message?t.data.Message:"An error occured","error")})):u("Please fill all fields.","error")},S=()=>{if(s.values.sourceName.trim()==="")return u("Please Enter Source name","error"),!1;if(s.values.sourceTypeId==="")return u("Please select 'Source Type","error"),!1;D(!0),s.isValid?g(m.postWithData("admin","updateSource",{...s.values}).then(t=>{var l;(l=t==null?void 0:t.data)!=null&&l.Success?(u("Source has been updated successfully.","success"),s.resetForm(),p(!0)):u(t.data.Message?t.data.Message:"An error occured","error")})):u("Please fill all fields.","error")},y=()=>{p(!1),s.resetForm()},P=n.useCallback(w.debounce(()=>{g(m.getCall("admin",`getSourceTypeList/${I}`).then(t=>{C(t.data.list)}))},600),[]);n.useEffect(()=>{P()},[]);const R=t=>{m.saveAuditLog(t)};return e.jsxDEV(re,{open:v,onClose:p,maxWidth:"sm",fullWidth:!0,children:[e.jsxDEV(Se,{children:[b?"Add New":"Update"," Sources"]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:183,columnNumber:13},void 0),e.jsxDEV(j,{"aria-label":"close",onClick:y,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.grey[500]},children:e.jsxDEV(se,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:194,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:184,columnNumber:13},void 0),e.jsxDEV(te,{children:e.jsxDEV("form",{onSubmit:s.handleSubmit,children:e.jsxDEV(T,{spacing:1,className:"mt-1",children:[e.jsxDEV(z,{autoFocus:!0,id:"sourceName",name:"sourceName",label:"Source Name",size:"small",type:"text",fullWidth:!0,variant:"outlined",value:s.values.sourceName,onChange:s.handleChange},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:200,columnNumber:25},void 0),e.jsxDEV(k,{formikObj:s,name:"sourceName",isFormSubmitted:E},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:219,columnNumber:25},void 0),e.jsxDEV(pe,{size:"small",children:[e.jsxDEV(fe,{id:"type-label",children:"Type "},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:223,columnNumber:29},void 0),e.jsxDEV(be,{labelId:"type-label",id:"type-select",name:"sourceTypeId",label:"sourceTypeId",value:s.values.sourceTypeId?s.values.sourceTypeId:"",onChange:s.handleChange,children:x&&x.map((t,l)=>e.jsxDEV(De,{value:`${t.sourceTypeId}`,children:t.sourceType},l,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:234,columnNumber:45},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:224,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:222,columnNumber:25},void 0),e.jsxDEV(k,{formikObj:s,name:"sourceTypeId",isFormSubmitted:E},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:241,columnNumber:25},void 0),e.jsxDEV(z,{id:"options",label:"Description",placeholder:"Brief Description",multiline:!0,rows:4,fullWidth:!0,variant:"outlined",value:s.values.description,onChange:t=>{const l=t.target.value;s.setFieldValue("description",l)}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:242,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:199,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:198,columnNumber:17},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:196,columnNumber:13},void 0),e.jsxDEV(oe,{children:[e.jsxDEV(Y,{variant:"outlined",type:"button",size:"small",color:"secondary",className:"mr-2",onClick:y,children:"Cancel"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:263,columnNumber:17},void 0),e.jsxDEV(Y,{color:"primary",variant:"contained",size:"small",onClick:()=>{(c&&c.sourceId?S:h)(),R(4235)},children:[b?"Add":"Update"," Sources"]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:271,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:262,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/AddSources.tsx",lineNumber:182,columnNumber:9},void 0)},rr=()=>{const v=d.checkSettings(110005)===5||d.checkSettings(110005)===6,p=d.checkSettings(110005)===6;let b=d.getvalue("clientId");const[c,I]=n.useState([]),[E,D]=n.useState({sourceId:"",sourceName:"",description:"",sourceTypeId:"",clientId:""}),[x,C]=n.useState(!1),[L,M]=n.useState({}),[s,h]=n.useState(!1),[S,y]=n.useState({pageIndex:0,pageSize:10}),[P,R]=n.useState(0),[t,l]=n.useState(""),[W,O]=n.useState([]),[B,G]=n.useState([{desc:!0,id:"createdDate"}]),q=r=>new Promise((o,i)=>{g(m.getCall("admin",`getSourceListbyId/${r}/${b}`).then(a=>{if(a.data&&a.data.sourceid){const f=a.data;D({sourceId:f.sourceid,sourceName:f.sourcename,description:f.description,sourceTypeId:f.sourcetypeid,clientId:d.getvalue("clientId")})}C(!0),o(a)}).catch(a=>{console.error("Error fetching User details:",a),i(a)}))});n.useEffect(()=>{const r=c.filter(o=>{var a;const i=t||"";return(a=o.sourceName)==null?void 0:a.toLowerCase().includes(i.toLowerCase())});O(r),y(o=>({...o,pageIndex:0}))},[t,c]);const K=r=>{q(r).then(()=>{h(!0),N(4236)}).catch(o=>{u("Unable to fetch User Data",o)})},H=()=>{D({sourceId:"",sourceName:"",description:"",sourceTypeId:"",clientId:""}),h(!0),C(!1)},Z=r=>{h(!1),r&&U()},U=n.useCallback(w.debounce(()=>{g(m.getCall("admin",`getSourceList/${b}`).then(r=>{var i;let o=r.data.list;for(let a=0;a<o.length;a++)((i=o[a].createdDate)==null?void 0:i.length)>19&&(o[a].createdDate=ye.ServerEDTToSystem(o[a].createdDate.substring(0,19),"yyyy-MM-dd hh:mm:ss","MM/dd/yyyy hh:mm a"));I(r.data.list),R(r.data.list.length)}))},400),[]),_=w.debounce(U,300);n.useEffect(()=>{!s&&_()},[]);const J=(r,o)=>{ne(`Are you sure you want to delete ${o} Source ?`,()=>{Q(r),N(4237)})},Q=r=>{g(m.getCall("admin",`deleteSource/${r}/${b}`).then(o=>{o.data.Success?(u("Source has been deleted successfully.","success"),U()):u(o.data.Message?o.data.Message:"An error occured while deleting","error")}).catch(o=>{var i,a,f,F;u((a=(i=o.response)==null?void 0:i.data)!=null&&a.Message?(F=(f=o.response)==null?void 0:f.data)==null?void 0:F.Message:"An error occured while deleting","error")}))},X=n.useMemo(()=>[{accessorKey:"sourceName",header:"Name",enableColumnPinning:!0,size:350},{accessorKey:"sourceType",header:"Type",size:350},{accessorKey:"createdDate",header:"Created On",size:300},{accessorKey:"Actions",header:"Actions",enableSorting:!1,Cell:({row:r})=>e.jsxDEV(T,{children:e.jsxDEV(T,{direction:"row",children:[v?e.jsxDEV($,{title:"Edit",placement:"top",color:"primary",children:e.jsxDEV(j,{onClick:()=>{K(r.original.sourceId)},children:e.jsxDEV(ce,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:272,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:271,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:270,columnNumber:19},void 0):null,p?e.jsxDEV($,{title:"Delete",placement:"top",color:"primary",children:e.jsxDEV(j,{onClick:()=>{J(r.original.sourceId,r.original.sourceName)},children:e.jsxDEV(ue,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:282,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:281,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:280,columnNumber:19},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:267,columnNumber:13},void 0)},r.original.sourceId,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:266,columnNumber:11},void 0),size:350}],[]),N=r=>{m.saveAuditLog(r)};n.useEffect(()=>{N(4233)},[]);const ee=r=>{r>S.pageIndex?N(4238):r<S.pageIndex&&N(4239)};return e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",id:"sourceList",children:[e.jsxDEV(V,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(ae,{variant:"h6",className:"headerName",children:"Sources"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:325,columnNumber:9},void 0),e.jsxDEV(T,{direction:"row",className:"btn-container",children:e.jsxDEV(Y,{variant:"contained",color:"primary",size:"small",onClick:()=>{N(4234),H()},children:"New Sources"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:329,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:328,columnNumber:9},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:316,columnNumber:7},void 0),e.jsxDEV(V,{container:!0,className:"customCard p-0 filterExpand-grid",children:[e.jsxDEV(V,{sx:{width:"calc(100%)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:e.jsxDEV(le,{columns:X,data:W,state:{rowSelection:L,pagination:S,sorting:B,globalFilter:t},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","sourceName"]},density:"compact",showGlobalFilter:!0},muiPaginationProps:{rowsPerPageOptions:[10],showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},enablePagination:!0,renderBottomToolbarCustomActions:()=>e.jsxDEV(Ne,{page:S.pageIndex,rowsPerPage:10,rowCount:W.length,onChangePage:r=>{y({...S,pageIndex:r,pageSize:10}),ee(r)},showCount:!0},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:362,columnNumber:17},void 0),onGlobalFilterChange:l,enableSorting:!0,onSortingChange:G,enableDensityToggle:!1,enableFullScreenToggle:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:y,getRowId:r=>r.sourceId,icons:{ArrowDownwardIcon:r=>e.jsxDEV(ie,{...r},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:384,columnNumber:61},void 0)},rowCount:W.length},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:335,columnNumber:13},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:334,columnNumber:11},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:333,columnNumber:9},void 0),s?e.jsxDEV(ge,{open:s,handleClose:Z,sourceData:E,add:!x},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:393,columnNumber:13},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:332,columnNumber:7},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Sources/Sources.tsx",lineNumber:315,columnNumber:5},void 0)};export{rr as default};
