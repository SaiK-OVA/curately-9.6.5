import{r,k as t,O as g,T as F,S as A,B as z,L as u,A as h,V as k}from"./Cgppv_Sf.js";import{D as c,A as K,g as x}from"./kx4FOAoQ.js";import{M as O}from"./D8IKBRq0.js";import{C as B}from"./CAYZvuI-.js";import{M as $}from"./PyTvx8hA.js";import{C as G}from"./BwODXlAG.js";import{L as H,D as E}from"./CtTUZ4Jr.js";import"./XPHitdj4.js";import"./BJCg17MG.js";import"./CagltWra.js";import"./D6SqIoha.js";import"./BxLAtHuG.js";import"./Bp2g836F.js";import"./BESjHuWm.js";import"./DYhLeBIs.js";import"./DaGbQO6h.js";import"./6HgfybZm.js";import"./CW6dvan5.js";import"./CB9nuhLI.js";import"./Dho3ZFNS.js";import"./DZd2l5Bl.js";import"./ChUKxi90.js";import"./dZX7lgtO.js";import"./DxILc9AR.js";import"./B-98_CNj.js";import"./DIGW6AYh.js";import"./BiLTbjOU.js";import"./CAWvjt4G.js";import"./CbCF5Xps.js";import"./BteIfgc7.js";const xe=({type:n,closeInvitePopup:_})=>{const[R,S]=r.useState([]),[y,p]=r.useState(c.now().minus({month:1})),[d,D]=r.useState(c.now()),[T,N]=r.useState(!1),[L,v]=r.useState(!1),[f,j]=r.useState({pageIndex:0,pageSize:10}),[P,W]=r.useState(0),V=e=>{window.open(x.getWindowLocation()+"candidate/view/"+e)},U=e=>{window.open(x.getWindowLocation()+"contact/view/"+e)},Y=[{accessorKey:"name",header:"Name",accessorFn:e=>`${e.firstname} ${e.lastname}`,Cell:({row:e})=>{var a,m;const o=e.original.firstname?(a=e.original.firstname)==null?void 0:a.toLowerCase():"",l=e.original.lastname?(m=e.original.lastname)==null?void 0:m.toLowerCase():"";return t.jsxDEV("span",{className:"hightLightTd",onClick:()=>{Number(e.original.type)===1?V(e.original.userid):Number(e.original.type)===2&&U(e.original.userid)},children:o+" "+l},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:56,columnNumber:24},void 0)}},{accessorKey:"actiondate",header:"Date",Cell:({row:e})=>{var o,l;return t.jsxDEV("span",{children:e.original.actiondate&&((o=e.original.actiondate)==null?void 0:o.length)>11?c.fromFormat(((l=e.original.actiondate)==null?void 0:l.substring(0,19))||"","yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy hh:mm"):""},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:69,columnNumber:17},void 0)},size:120},{accessorKey:"actionname",header:"Accessed Info",Cell:({row:e})=>t.jsxDEV("span",{children:e.original.actionname==="Save Email"?"Email Address":e.original.actionname==="Save Phone No"?"Mobile Number":e.original.actionname==="Referral Recruiter"?"Recruiter Referred":e.original.actionname},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:80,columnNumber:17},void 0),size:120},{accessorKey:"contactinfo",header:"Contact Info",Cell:({row:e})=>{let o=n&&e.original.contactinfo?e.original.contactinfo:"";if(!n&&e.original.contactinfo){let l=e.original.contactinfo.split(",")[0],a=e.original.contactinfo.split(",").length>1?e.original.contactinfo.split(",")[1]:e.original.contactinfo.split(",")[0];o=e.original.actionname==="Save Email"?l:e.original.actionname==="Save Phone No"?a:""}return t.jsxDEV("span",{children:o},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:98,columnNumber:24},void 0)}},{accessorKey:"emailCredits",header:"Credits",Cell:({row:e})=>t.jsxDEV("span",{className:"fw-7 fs-16",children:e.original.emailCredits==="1"&&e.original.phoneCredits==="1"?t.jsxDEV("span",{className:"c-red",children:"2"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:110,columnNumber:102},void 0):t.jsxDEV(t.Fragment,{children:[e.original.emailCredits==="1"?t.jsxDEV("span",{className:"c-red",children:"1"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:112,columnNumber:72},void 0):e.original.emailCredits?t.jsxDEV("span",{className:"c-green",children:e.original.emailCredits},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:112,columnNumber:135},void 0):t.jsxDEV(t.Fragment,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:112,columnNumber:198},void 0),e.original.phoneCredits==="1"?t.jsxDEV("span",{className:"c-red",children:"1"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:113,columnNumber:72},void 0):e.original.phoneCredits?t.jsxDEV("span",{className:"c-green",children:e.original.phoneCredits},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:113,columnNumber:135},void 0):t.jsxDEV(t.Fragment,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:113,columnNumber:198},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:111,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:108,columnNumber:17},void 0),size:70,maxSize:70}],b=e=>{if(N(!!(y&&d)),y&&d){v(!0);let o={recrId:u.getvalue("recrId"),clientId:u.getvalue("clientId"),page_size:10,page_num:e};n&&(o.type=n),n||(o.fromDate=y.toFormat("yyyy-MM-dd"),o.toDate=d.toFormat("yyyy-MM-dd")),h.postWithData("admin","chrome-extension/activity-log",o).then(l=>{var m,C;let a=(m=l.data)!=null&&m.activityLogData?(C=l.data)==null?void 0:C.activityLogData:[];for(let i=0;i<a.length;i++)a[i].emailCredits=["Save Phone No and Email","Save Email"].includes(a[i].actionname)?"1":["4569","4577","4579","4581","4582"].includes(a[i].actionid)?"50":["4570","4578","4580"].includes(a[i].actionid)?"600":["4571","4575","4583"].includes(a[i].actionid)?"750":["4572","4576","4584"].includes(a[i].actionid)?"9000":["4573","4585","4587"].includes(a[i].actionid)?"1000":["4574","4586","4588"].includes(a[i].actionid)?"12000":["4589","4590"].includes(a[i].actionid)?"10":"",a[i].phoneCredits=["Save Phone No and Email","Save Phone No"].includes(a[i].actionname)?"1":["4573","4585","4587"].includes(a[i].actionid)?"100":["4574","4586","4588"].includes(a[i].actionid)?"1200":"";S(a),e===0&&W(l.data.totalRecords),v(!1)})}else k("Please Enter Date","error")},[s,M]=r.useState({consumedEmailCredits:0,consumedProfileCredits:0,consumedSmsCredits:0,daysLeft:0,totalEmailCredits:0,totalProfileCredits:0,totalSmsCredits:0,profilePercentage:0,startDate:"",expireDate:""}),I=()=>{h.getById("admin",`getCredits/${u.getvalue("clientId")}`,u.getvalue("recrId")).then(e=>{e.data.Success&&(M({consumedEmailCredits:e.data.consumedEmailCredits,consumedProfileCredits:e.data.consumedProfileCredits,consumedSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.consumedSmsCredits,daysLeft:e.data.daysLeft,totalEmailCredits:e.data.totalEmailCredits,totalProfileCredits:e.data.totalProfileCredits,totalSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.totalSmsCredits,profilePercentage:e.data.consumedProfileCredits/e.data.totalProfileCredits*100,startDate:e.data.startDate?c.fromFormat(e.data.startDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):"",expireDate:e.data.expireDate?c.fromFormat(e.data.expireDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):""}),localStorage.setItem(`credits_${u.getvalue("recrId")}`,JSON.stringify({consumedEmailCredits:e.data.consumedEmailCredits,consumedProfileCredits:e.data.consumedProfileCredits,consumedSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.consumedSmsCredits,daysLeft:e.data.daysLeft,totalEmailCredits:e.data.totalEmailCredits,totalProfileCredits:e.data.totalProfileCredits,totalSmsCredits:e.data.paymentType===1||e.data.paymentType===2?0:e.data.totalSmsCredits,profilePercentage:e.data.consumedProfileCredits/e.data.totalProfileCredits*100,isPackageEmailValidity:Number(e.data.totalEmailCredits)?Number(e.data.totalEmailCredits)>Number(e.data.consumedEmailCredits):!1,isPackagePhoneValidity:e.data.paymentType!==1&&e.data.paymentType!==2&&Number(e.data.totalSmsCredits)?!!(Number(e.data.totalSmsCredits)-Number(e.data.consumedSmsCredits)):!1,startDate:e.data.startDate?c.fromFormat(e.data.startDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):"",expireDate:e.data.expireDate?c.fromFormat(e.data.expireDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy "):""})))})};return r.useEffect(()=>{b(f.pageIndex)},[f.pageIndex]),r.useEffect(()=>{I()},[]),t.jsxDEV("div",{className:"px-5",id:"ActivityLog",children:[n?null:t.jsxDEV("div",{className:"pt-3",children:t.jsxDEV(g,{container:!0,direction:"row",className:"customCard px-4 py-2 mb-2",justifyContent:"flex-start",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:t.jsxDEV(F,{variant:"h6",className:"headerName",children:"Usage Report"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:257,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:248,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:247,columnNumber:21},void 0),n?null:t.jsxDEV("div",{children:t.jsxDEV(g,{className:"mt-1 mb-3 customCard activityLogDate py-3",container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[t.jsxDEV(A,{direction:"row",spacing:3,style:{paddingRight:"22px"},children:[t.jsxDEV(H,{dateAdapter:K,children:t.jsxDEV(g,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:[t.jsxDEV(E,{value:y,onChange:e=>{p(e||"")},slotProps:{textField:{size:"small",fullWidth:!1,InputProps:{style:{textAlign:"center"}}}},maxDate:d},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:284,columnNumber:41},void 0),t.jsxDEV(E,{value:d,onChange:(e,o)=>{D(e||"")},slotProps:{textField:{size:"small",fullWidth:!1,InputProps:{style:{textAlign:"center"}}}},maxDate:c.now()},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:306,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:278,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:277,columnNumber:33},void 0),t.jsxDEV(g,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:t.jsxDEV(z,{variant:"contained",onClick:()=>{b(0)},children:["Get ",n?"Credits":"Report"]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:336,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:330,columnNumber:33},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:276,columnNumber:29},void 0),s.totalProfileCredits&&s.totalSmsCredits?t.jsxDEV(A,{direction:"row",spacing:3,children:[t.jsxDEV(A,{direction:"row",className:"mr-4",children:[t.jsxDEV("span",{className:"mr-2",children:"Credits Remaining"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:343,columnNumber:45},void 0),t.jsxDEV($,{className:"mr-1"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:344,columnNumber:45},void 0),t.jsxDEV("span",{className:"mr-3",children:s.totalProfileCredits-s.consumedProfileCredits},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:345,columnNumber:45},void 0),t.jsxDEV(G,{className:"mr-1"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:347,columnNumber:45},void 0),t.jsxDEV("span",{children:s.totalSmsCredits-s.consumedSmsCredits},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:348,columnNumber:45},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:342,columnNumber:41},void 0),t.jsxDEV(A,{direction:"row",children:t.jsxDEV("span",{className:"mr-2",children:["Valid from ",s.startDate," to ",s.expireDate]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:351,columnNumber:45},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:350,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:341,columnNumber:37},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:268,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:267,columnNumber:21},void 0),t.jsxDEV("div",{className:n?"inPopUp":"",children:T?t.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:t.jsxDEV(O,{columns:Y,data:R,enableDensityToggle:!1,enableColumnFilters:!1,enableFullScreenToggle:!1,enableGlobalFilter:!1,enableHiding:!1,enableColumnActions:!1,enablePagination:!1,enableTopToolbar:!1,enableStickyHeader:!0,state:{isLoading:L},renderBottomToolbarCustomActions:()=>t.jsxDEV(B,{page:f.pageIndex,rowsPerPage:10,rowCount:P,onChangePage:e=>j({...f,pageIndex:e,pageSize:10})},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:381,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:365,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:364,columnNumber:21},void 0):null},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:362,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Reports/Activitylog/Activitylog.tsx",lineNumber:244,columnNumber:9},void 0)};export{xe as default};
