import{r as s,k as i,O as M,T as U,B as Y,S as x,L as d,W as m,A as f,V as N}from"./Cgppv_Sf.js";import{M as w}from"./D8IKBRq0.js";import{S as B}from"./8-7dSsDd.js";import{T as A}from"./BxLAtHuG.js";import{M as D}from"./ChUKxi90.js";import{S as F}from"./GDwwTdj-.js";import{I as P}from"./Bp2g836F.js";import{C as k}from"./B93O5liC.js";import"./BESjHuWm.js";import"./DYhLeBIs.js";import"./DaGbQO6h.js";import"./CtTUZ4Jr.js";import"./XPHitdj4.js";import"./D6SqIoha.js";import"./6HgfybZm.js";import"./CW6dvan5.js";import"./CB9nuhLI.js";import"./Dho3ZFNS.js";import"./CagltWra.js";import"./DZd2l5Bl.js";import"./dZX7lgtO.js";import"./DxILc9AR.js";import"./B-98_CNj.js";import"./DIGW6AYh.js";import"./BiLTbjOU.js";import"./CAWvjt4G.js";import"./CbCF5Xps.js";import"./BteIfgc7.js";const De=({})=>{const[o,u]=s.useState([]),[z,E]=s.useState([]),[g,h]=s.useState([]),[c,S]=s.useState(""),[I,b]=s.useState({}),[C,$]=s.useState({pageIndex:0,pageSize:50}),[v,O]=s.useState(""),p=s.useMemo(()=>c?o.filter(e=>e.metric.toLowerCase().includes(c.toLowerCase())):o,[o,c]);s.useMemo(()=>p.length,[p]);const G=()=>{let t=d.getvalue("clientId");m(f.getCall("admin",`getshortListBarStages/${t}`).then(e=>{var a,l;console.log((a=e==null?void 0:e.data)==null?void 0:a.shortlistBarStages),(l=e==null?void 0:e.data)!=null&&l.shortlistBarStages?h(e.data.shortlistBarStages):h([])}).catch(e=>{console.error("Error fetching metric list",e),h([])}))},L=()=>{m(f.getCall("admin","getGoalMetrics/1").then(t=>{var e,a;if((e=t==null?void 0:t.data)!=null&&e.Success){let l=((a=t==null?void 0:t.data)==null?void 0:a.goalMetrics)||[];u([...l]),y(l)}}).catch(t=>{console.error("Error fetching candidate status list",t)}))},y=t=>{m(f.postWithData("admin","getGoalMetricStatusMapping",{clientId:d.getvalue("clientId")}).then(e=>{var a,l,r,n;(a=e==null?void 0:e.data)!=null&&a.Success&&(E(((l=e==null?void 0:e.data)==null?void 0:l.goalMetricStatusMappings)||[]),T(t,((r=e==null?void 0:e.data)==null?void 0:r.goalMetricStatusMappings)||[]),console.log((n=e==null?void 0:e.data)==null?void 0:n.goalMetricStatusMappings))}).catch(e=>{console.log("Error fetching metric status mapping list",e)}))},T=(t,e)=>{if(e.length>0){let a=t||[];a=a.map(r=>{var n;return{...r,statusId:e!=null&&e.length&&((n=e.find(W=>W.metricId===r.metricId))==null?void 0:n.statusId)||""}});let l=a.reduce((r,n)=>(n!=null&&n.statusId&&(r[n.metricId]=!0),r),{});b({...l}),u([...a])}else u(a=>a.map(l=>({...l,statusId:0})))};s.useEffect(()=>{G(),L()},[]);const R=(t,e)=>{const a=t.target.value;let l=o||[];l=l.map(r=>r.metricId===e?{...r,statusId:a}:r),u([...l])},j=async()=>{Object.entries(I).filter(([a,l])=>l).map(([a])=>parseInt(a));const t=o.map(a=>({metricId:a.metricId,statusId:a!=null&&a.statusId?a.statusId:null})),e={clientId:d.getvalue("clientId"),recrId:d.getvalue("recrId"),goalMetricStatusMappings:t};try{m(f.postWithData("admin","saveGoalMetricStatusMapping",e).then(a=>{a.data.Success?(N("Goal metric status mapping saved successfully","success"),b({}),S(""),y(o)):N(a.data.Message||"Failed to update Goal metric status mapping","error")}))}catch(a){console.error("Error updating recruiter credits:",a),N("Something went wrong. Please try again.","error")}},V=s.useMemo(()=>[{accessorKey:"metric",header:"Metric Name",Cell:({row:t})=>i.jsxDEV("span",{children:t.original.metric},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:198,columnNumber:17},void 0)},{accessorKey:"statusId",header:"Metric Status",Cell:({row:t})=>(t.getIsSelected(),i.jsxDEV(A,{sx:{width:"220px"},fullWidth:!0,className:"selHeight",name:`metric-${t.original.metricId}`,id:`metric-${t.original.metricId}`,size:"small",select:!0,defaultValue:t.original.statusId?t.original.statusId:"0",value:t.original.statusId?t.original.statusId:"0",placeholder:"Goal Status List",onChange:e=>R(e,t.original.metricId),children:[i.jsxDEV(D,{value:"0",children:"None "},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:224,columnNumber:21},void 0),g.length>0?g.map((e,a)=>i.jsxDEV(D,{value:e.statusId,children:e.label},`${e.statusId}-${a}-${t.original.metricId}`,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:227,columnNumber:29},void 0)):i.jsxDEV(D,{disabled:!0,children:"No Options Available"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:232,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:208,columnNumber:24},void 0))}],[o,g]);return i.jsxDEV("div",{id:"MetricList",className:"pt-2 px-1 ",children:[i.jsxDEV(M,{container:!0,direction:"row",className:"customCard  px-2 py-1",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[i.jsxDEV(U,{variant:"h6",className:"headerFormContainer",children:"Metrics Mapping"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:253,columnNumber:17},void 0),i.jsxDEV("div",{children:i.jsxDEV(M,{container:!0,direction:"row",justifyContent:"end",alignItems:"center",children:i.jsxDEV(Y,{variant:"contained",type:"button",color:"primary",onClick:()=>j(),children:"save"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:270,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:257,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:256,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:244,columnNumber:13},void 0),i.jsxDEV("div",{className:"MRTableCustom pl-0 mt-0",children:[i.jsxDEV(x,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,className:"headerFormContainer",children:i.jsxDEV(x,{direction:"row",alignItems:"center",spacing:1,justifyContent:"flex-end",children:i.jsxDEV(A,{placeholder:"Search by metric name",size:"small",id:"Search",name:"Search",className:"matricSearchName",value:c,onChange:t=>{S(t.target.value)},slotProps:{input:{startAdornment:i.jsxDEV(F,{fontSize:"small",htmlColor:"#757575"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:296,columnNumber:53},void 0),endAdornment:i.jsxDEV(P,{position:"end",disablePointerEvents:!c,children:i.jsxDEV(k,{fontSize:"small",htmlColor:c?"#757575":"#ebebeb",sx:{cursor:"pointer"},onClick:()=>S("")},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:298,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:297,columnNumber:51},void 0)}}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:286,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:285,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:284,columnNumber:17},void 0),i.jsxDEV(w,{columns:V,data:p,enableTopToolbar:!1,enableBottomToolbar:!1,enableStickyHeader:!0,enableRowSelection:!1,initialState:{columnPinning:{left:["metric"]},density:"compact",showGlobalFilter:!0},enableDensityToggle:!1,enableFullScreenToggle:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",enablePagination:!0,state:{pagination:C,globalFilter:v},muiPaginationProps:{showFirstButton:!1,showLastButton:!1,SelectProps:{style:{display:"none"}}},icons:{ArrowDownwardIcon:t=>i.jsxDEV(B,{...t},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:334,columnNumber:60},void 0)},enableSelectAll:!0,getRowId:t=>t.metricId,onRowSelectionChange:b},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:305,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:283,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Settings/Goals/Metric.tsx",lineNumber:240,columnNumber:9},void 0)};export{De as default};
