import{Y as X,r as a,R as Z,L as n,A as N,k as e,S as j,B as c,b1 as ee,O as d,T as te,D as R,n as V,o as W,W as le,V as E}from"./Cgppv_Sf.js";import{V as ie}from"./FVe6lIVR.js";import{E as ae,b as re,c as se}from"./CtTUZ4Jr.js";import{D as ne}from"./DYDlcIIt.js";import{l as me,D as oe}from"./kx4FOAoQ.js";import{S as ue}from"./8-7dSsDd.js";import{M as de}from"./D8IKBRq0.js";import{E as ce}from"./d3hw7ejT.js";import{T as p}from"./CagltWra.js";import{B as Ee}from"./XFArKoHE.js";import{D as I}from"./B-98_CNj.js";import{D as pe}from"./BiLTbjOU.js";import"./BxLAtHuG.js";import"./XPHitdj4.js";import"./ChUKxi90.js";import"./D6SqIoha.js";import"./Bp2g836F.js";import"./BJCg17MG.js";import"./BESjHuWm.js";import"./DYhLeBIs.js";import"./DaGbQO6h.js";import"./6HgfybZm.js";import"./CW6dvan5.js";import"./CB9nuhLI.js";import"./Dho3ZFNS.js";import"./DZd2l5Bl.js";import"./dZX7lgtO.js";import"./DxILc9AR.js";import"./DIGW6AYh.js";import"./CAWvjt4G.js";import"./CbCF5Xps.js";import"./BteIfgc7.js";import"./C-Jq_Y4P.js";import"./CRJpcgJc.js";import"./CVtbaTfk.js";import"./Dau3miA7.js";import"./rYcqsWUw.js";import"./CtuCFr0K.js";import"./DUrHk-MO.js";import"./CPvg8iC8.js";const rt=()=>{X();const[D,y]=a.useState(!1),[Y,h]=a.useState([]),[fe,x]=Z.useState(!1),[Le,U]=a.useState(!1),[be,f]=a.useState(!1),[F,Ne]=a.useState(!1),[w,B]=a.useState(0),[A,L]=a.useState(!1),[M,T]=a.useState(null),[b,k]=a.useState("My Templates"),[P,z]=a.useState({}),[H,O]=a.useState({pageIndex:0,pageSize:25}),[r,C]=a.useState({templateName:"",templateId:"",subject:"",description:"",jsonFile:"",htmlFile:"",createdBy:n.getvalue("recrId"),type:1,isActive:!0,clientId:n.getvalue("clientId")}),G=(l,t)=>{k(t),u()},$=["All","My Templates"],K=()=>{T(""),L(!0)},_=l=>{J(l)},g=l=>{T(l),L(!0)},J=async l=>{le(N.getById("admin","getEmailBuilderTemplatesListById",(l||"")+"/"+n.getvalue("clientId")).then(async t=>{var i,m,o;(i=t.data)!=null&&i.EmailTemplates&&((m=t.data)!=null&&m.EmailTemplates.length)&&((o=t.data)!=null&&o.EmailTemplates[0])&&t.data.EmailTemplates[0].jsonFile?C({templateName:t.data.EmailTemplates[0].templateName?t.data.EmailTemplates[0].templateName:"",templateId:l||"",subject:t.data.EmailTemplates[0].subject?t.data.EmailTemplates[0].subject:"",description:t.data.EmailTemplates[0].description?t.data.EmailTemplates[0].description:"",jsonFile:t.data.EmailTemplates[0].jsonFile?JSON.stringify(t.data.EmailTemplates[0].jsonFile):"",htmlFile:t.data.EmailTemplates[0].htmlFile?t.data.EmailTemplates[0].htmlFile:"",createdBy:n.getvalue("recrId"),type:1,isActive:!0,clientId:n.getvalue("clientId")}):(C({templateName:"",templateId:"",subject:"",description:"",jsonFile:"",htmlFile:"",createdBy:n.getvalue("recrId"),type:1,isActive:!0,clientId:n.getvalue("clientId")}),E("Error loading template","error")),y(!0)}).catch(t=>{console.error("Error:",t)}))},q=async l=>{let t=n.getvalue("clientId");try{N.deleteById(214,`deleteEmailTemplates/${l}`,t).then(i=>{x(!1),i.data.Success===!0?(E(i.data.Message,"success"),U(m=>!m)):i.data.Error===!0?E(i.data.Message,"error"):E("Something went wrong","error")}).catch(i=>{console.error("Error:",i)})}catch{x(!1)}},v=()=>{L(!1)},S=()=>{y(!1),u()},u=a.useCallback(me.debounce(async()=>{f(!1);const l=n.getvalue("clientId");let t="0";b==="My Templates"&&(t=n.getvalue("recrId")),N.getCall(214,`getEmailBuilderTemplatesList/${t}/${l}`).then(i=>{if(i.data&&i.data.List){let m=[];for(let o=0;o<i.data.List.length;o++){const s=i.data.List[o];s.type!==0&&m.push({templateId:s.templateId,templateName:s.templateName,description:s.description,subject:s.subject,type:s.type,isactive:s.isactive,createdBy:s.createdBy,createdDate:s.createdDate,modifyBy:s.modifyBy,modifyDate:s.modifyDate})}h(m),B(m.length)}else console.error("List data is undefined."),h([]),B(0);f(!0)}).catch(i=>{console.error("Error:",i),f(!0)})},400),[b]);a.useEffect(()=>(u(),()=>{u.cancel()}),[u]);const Q=a.useMemo(()=>[{enableColumnPinning:!0,accessorKey:"templateName",header:"Name",size:300,Cell:({renderedCellValue:l,row:t})=>{let i=t.original.templateName.length>30?t.original.templateName.slice(0,30)+"...":t.original.templateName;return e.jsxDEV(p,{title:t.original.templateName,classes:{tooltip:"tt-capital"},children:e.jsxDEV("span",{className:"hightLightTd",onClick:()=>g(t.original.templateId),children:i},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:343,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:342,columnNumber:25},void 0)}},{accessorKey:"modifyDate",header:"Last Modified",accessorFn:l=>`${l.date}`,Cell:({renderedCellValue:l,row:t})=>e.jsxDEV("span",{children:t.original.modifyDate?oe.fromFormat(t.original.modifyDate.substring(0,19),"yyyy-MM-dd hh:mm:ss").toFormat("MM/dd/yyyy hh:mm a"):""},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:358,columnNumber:21},void 0)},{accessorKey:"Actions",header:"Actions",Cell:({renderedCellValue:l,row:t})=>e.jsxDEV(j,{children:e.jsxDEV(Ee,{variant:"outlined",id:t.original.templateId,sx:{height:"31px","& .MuiButtonGroup-grouped":{marginRight:"1px",border:"1px solid var(--c-neutral-40)"}},children:[e.jsxDEV(p,{title:"Edit",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>g(t.original.templateId),children:e.jsxDEV(ae,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:416,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:405,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:401,columnNumber:29},void 0),e.jsxDEV(p,{title:"View",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>_(t.original.templateId),children:e.jsxDEV(ie,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:441,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:430,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:426,columnNumber:29},void 0),e.jsxDEV(p,{title:"Delete",placement:"top",children:e.jsxDEV(c,{className:"customButtonForHover",sx:{borderColor:"var(--c-neutral-40)",backgroundColor:"#ffffff",color:"#919191",width:"33px"},onClick:()=>{ee("Are you sure you want to delete - "+t.original.templateName+"?",()=>q(t.original.templateId))},children:e.jsxDEV(ne,{sx:{fontSize:"16px"}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:471,columnNumber:37},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:455,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:451,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:387,columnNumber:25},void 0)},t.original.templateId,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:384,columnNumber:21},void 0)}],[]);return e.jsxDEV("div",{className:"emailTemplateList pt-3 px-5",children:[e.jsxDEV(d,{container:!0,direction:"row",className:"customCard px-4 py-2",justifyContent:"space-between",alignItems:"center",display:"flex",sx:{minHeight:"auto !important"},children:[e.jsxDEV(te,{variant:"h6",className:"headerName",children:"Templates"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:506,columnNumber:17},void 0),e.jsxDEV(j,{direction:"row",className:"btn-container",children:e.jsxDEV(c,{variant:"contained",color:"primary",size:"small",onClick:K,children:"Add Template"},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:510,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:509,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:497,columnNumber:13},void 0),e.jsxDEV(d,{container:!0,className:"customCard p-0 filterExpand-grid",children:[e.jsxDEV(d,{sx:{width:F?"calc(100%)":"calc(100% - 0px)"},children:e.jsxDEV("div",{className:"MRTableCustom  pl-0 ",children:[e.jsxDEV(re,{value:b,onChange:G,className:"tableTabs",children:$.map((l,t)=>e.jsxDEV(se,{value:l,label:e.jsxDEV("span",{children:l},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:527,columnNumber:41},void 0)},t,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:526,columnNumber:37},void 0))},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:519,columnNumber:25},void 0),e.jsxDEV(de,{columns:Q,enableRowSelection:!1,data:Y,onRowSelectionChange:z,state:{rowSelection:P,pagination:H},enablePinning:!0,enableStickyHeader:!0,initialState:{columnPinning:{left:["mrt-row-select","templateName"]},density:"compact",showGlobalFilter:!1},enableDensityToggle:!1,enableFullScreenToggle:!0,enableColumnResizing:!0,enableFilters:!1,enableGlobalFilterModes:!0,columnResizeMode:"onChange",onPaginationChange:O,getRowId:l=>l.templateId,icons:{ArrowDownwardIcon:l=>e.jsxDEV(ue,{...l},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:554,columnNumber:68},void 0)},rowCount:w},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:532,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:518,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:516,columnNumber:17},void 0),D?e.jsxDEV(R,{open:D,onClose:S,className:"Instructions",fullWidth:!0,maxWidth:"md",children:[e.jsxDEV(I,{className:"py-2",children:e.jsxDEV(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{children:r&&(r==null?void 0:r.templateName)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:592,columnNumber:37},void 0),e.jsxDEV("span",{onClick:S,className:"closePopup",children:e.jsxDEV(V,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:596,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:595,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:586,columnNumber:33},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:583,columnNumber:29},void 0),e.jsxDEV(pe,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:600,columnNumber:29},void 0),e.jsxDEV(W,{sx:{p:0},children:r&&(r!=null&&r.htmlFile)?e.jsxDEV("div",{style:{padding:"20px"},dangerouslySetInnerHTML:{__html:r==null?void 0:r.htmlFile}},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:604,columnNumber:41},void 0):null},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:601,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:582,columnNumber:25},void 0):null,A?e.jsxDEV(R,{maxWidth:"xl",open:A,onClose:v,fullWidth:!0,children:[e.jsxDEV(I,{id:"alert-dialog-title",children:e.jsxDEV(d,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxDEV("span",{style:{fontWeight:"bold"},children:"Email Template "},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:621,columnNumber:35},void 0),e.jsxDEV("span",{onClick:v,children:e.jsxDEV(V,{},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:623,columnNumber:39},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:622,columnNumber:35},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:615,columnNumber:23},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:614,columnNumber:23},void 0),e.jsxDEV(W,{children:e.jsxDEV(e.Fragment,{children:e.jsxDEV(ce,{templateId:M},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:630,columnNumber:31},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:629,columnNumber:31},void 0)},void 0,!1,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:628,columnNumber:27},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:613,columnNumber:23},void 0):null]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:514,columnNumber:13},void 0)]},void 0,!0,{fileName:"D:/AWS-CURATELY-9.6.5/curately-9.6.5/curately-9.6.5/src/components/Dashboard/Letters/EmailBuilder/List/ListEmailBuilder.tsx",lineNumber:496,columnNumber:9},void 0)};export{rt as default};
